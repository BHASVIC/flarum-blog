{"version":3,"sources":["webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/./forum.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/index.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Component']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Alert']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Dropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/PostStream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/ReplyComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Switch']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/avatar']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['models/Discussion']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/mixin']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/string']\""],"names":["BlogMeta","mixin","Model","discussion","hasOne","featuredImage","attribute","summary","isFeatured","isSized","isPendingReview","BlogCategories","init","blogCategories","app","forum","view","map","tagId","tag","store","getById","tags","push","route","slug","m","icon","name","all","forEach","_tag","isChild","parent","id","Component","BlogPostController","loadedPost","article","props","buttons","canRename","Button","component","className","onclick","modal","show","RenameArticleModal","children","translator","trans","articlePost","firstPost","firstPostId","disabled","canEdit","composer","load","EditPostComposer","post","BlogPostSettingsModal","canTag","TagDiscussionModal","blogMeta","save","then","alerts","Alert","type","response","loading","handleErrors","canLock","DiscussionControls","lockAction","bind","isLocked","canHide","isHidden","restoreAction","canDelete","confirm","extractText","history","getCurrent","previous","back","redraw","hideAction","Dropdown","label","buttonClassName","menuClassName","onshow","find","isNew","meta","createRecord","prop","title","content","fields","toArray","items","ItemList","add","withAttr","marginTop","Switch","state","onchange","val","fontWeight","submitData","relationships","onsubmit","e","preventDefault","pushData","hide","Modal","redirect","target","value","url","window","replaceState","document","initializers","routes","blog","path","BlogOverview","blogCategory","blogArticle","BlogItem","models","Discussion","prototype","redirector","setTitle","bodyClass","found","loadBlogItem","preloadBlogOverview","preloadedApiDocument","setTimeout","param","split","include","lazyRedraw","includedPosts","payload","included","articleId","console","log","filter","record","data","sort","a","b","slice","stream","PostStream","on","positionChanged","blogImage","backgroundImage","opacity","session","user","posts","fontSize","marginRight","trust","contentHtml","commentCount","render","backgroundColor","color","avatar","padding","displayName","bio","startNumber","endNumber","lastReadPostNumber","Page","isLoading","featuredPosts","hasMore","loadBlogOverview","q","articles","length","blogTag","isSticky","humanTime","createdAt","extend","IndexPage","currentTag","tagRedirectEnabled","blogTags","indexOf","override","DiscussionPage","original","discussionRedirectEnabled","foundTags","location","href","textAlign"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA,wC;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;ACJA;AACA;;IAEqBA,Q;;;;;;;;EAAiBC,yDAAK,CAACC,mDAAD,EAAQ;AAC/CC,YAAU,EAAED,mDAAK,CAACE,MAAN,CAAa,YAAb,CADmC;AAE/CC,eAAa,EAAEH,mDAAK,CAACI,SAAN,CAAgB,eAAhB,CAFgC;AAG/CC,SAAO,EAAEL,mDAAK,CAACI,SAAN,CAAgB,SAAhB,CAHsC;AAI/CE,YAAU,EAAEN,mDAAK,CAACI,SAAN,CAAgB,YAAhB,CAJmC;AAK/CG,SAAO,EAAEP,mDAAK,CAACI,SAAN,CAAgB,SAAhB,CALsC;AAM/CI,iBAAe,EAAER,mDAAK,CAACI,SAAN,CAAgB,iBAAhB;AAN8B,CAAR,C;;;;;;;;;;;;;;;;;;;;ACH3C;;IAEqBK,c;;;;;;;;;SACnBC,I,GAAA,gBAAO;AACL,SAAKC,cAAL,GAAsBC,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,CAAtB;AACD,G;;SAEDU,I,GAAA,gBAAO;AACL,WACE;AAAK,eAAS,EAAE;AAAhB,OACE,2BADF,EAGG,KAAKH,cAAL,IAAuB,KAAKA,cAAL,CAAoBI,GAApB,CAAwB,UAAAC,KAAK,EAAI;AACvD,UAAMC,GAAG,GAAGL,GAAG,CAACM,KAAJ,CAAUC,OAAV,CAAkB,MAAlB,EAA0BH,KAA1B,CAAZ;AAEA,UAAG,CAACC,GAAJ,EAAS,OAAO,IAAP;AAET,UAAMG,IAAI,GAAG,EAAb,CALuD,CAOvD;;AACAA,UAAI,CAACC,IAAL,CACE;AAAG,YAAI,EAAET,GAAG,CAACU,KAAJ,CAAU,cAAV,EAA0B;AAAEC,cAAI,EAAEN,GAAG,CAACM,IAAJ;AAAR,SAA1B,CAAT;AAA0D,iBAAS,EAAE,qBAArE;AAA4F,cAAM,EAAEC,CAAC,CAACF;AAAtG,SAA6G,gBAAM;AAAG,iBAAS,EAAEL,GAAG,CAACQ,IAAJ;AAAd,QAAN,CAA7G,OAAwJR,GAAG,CAACS,IAAJ,EAAxJ,CADF,EARuD,CAYvD;;AACAd,SAAG,CAACM,KAAJ,CAAUS,GAAV,CAAc,MAAd,EAAsBC,OAAtB,CAA8B,UAAAC,IAAI,EAAI;AACpC,YAAGA,IAAI,CAACC,OAAL,MAAkBD,IAAI,CAACE,MAAL,GAAcC,EAAd,OAAuBf,GAAG,CAACe,EAAJ,EAA5C,EAAsD;AACpDZ,cAAI,CAACC,IAAL,CACE;AAAG,gBAAI,EAAET,GAAG,CAACU,KAAJ,CAAU,cAAV,EAA0B;AAAEC,kBAAI,EAAEM,IAAI,CAACN,IAAL;AAAR,aAA1B,CAAT;AAA2D,qBAAS,EAAE,qBAAtE;AAA6F,kBAAM,EAAEC,CAAC,CAACF;AAAvG,aAA8G,gBAAM;AAAG,qBAAS,EAAEO,IAAI,CAACJ,IAAL;AAAd,YAAN,CAA9G,OAA0JI,IAAI,CAACH,IAAL,EAA1J,CADF;AAGD;AACF,OAND;AAQA,aAAON,IAAP;AACD,KAtBuB,CAH1B,CADF;AA6BD,G;;;EAnCyCa,uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACF5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqBC,kB;;;;;;;;;SACnBxB,I,GAAA,gBAAO;AACL,SAAKyB,UAAL,GAAkB,KAAlB;AACD,G;;SAEDrB,I,GAAA,gBAAO;AAAA;;AACL,QAAMsB,OAAO,GAAG,KAAKC,KAAL,CAAWD,OAA3B;AACA,QAAIE,OAAO,GAAG,EAAd,CAFK,CAIL;;AACA,QAAGF,OAAO,CAACG,SAAR,EAAH,EAAwB;AACtBD,aAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,iBAAS,EAAE,QADI;AAEfC,eAAO,EAAE;AAAA,iBAAM/B,GAAG,CAACgC,KAAJ,CAAUC,IAAV,CAAe,IAAIC,kEAAJ,CAAuB;AAAEV,mBAAO,EAAPA;AAAF,WAAvB,CAAf,CAAN;AAAA,SAFM;AAGfX,YAAI,EAAE,mBAHS;AAIfsB,gBAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,uDAArB;AAJK,OAAjB,CADF;AAQD;;AAED,QAAMC,WAAW,GAAGd,OAAO,CAACe,SAAR,KAAsBf,OAAO,CAACe,SAAR,EAAtB,GAA4CvC,GAAG,CAACM,KAAJ,CAAUC,OAAV,CAAkB,OAAlB,EAA2BiB,OAAO,CAACgB,WAAR,EAA3B,CAAhE,CAhBK,CAkBL;;AACAd,WAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,eAAS,EAAE,QADI;AAEfW,cAAQ,EAAE,CAACH,WAAW,CAACI,OAAZ,EAFI;AAGfX,aAAO,EAAE,mBAAM;AACb/B,WAAG,CAAC2C,QAAJ,CAAaC,IAAb,CAAkB,IAAIC,yEAAJ,CAAqB;AAACC,cAAI,EAAER;AAAP,SAArB,CAAlB;AACAtC,WAAG,CAAC2C,QAAJ,CAAaV,IAAb;AACD,OANc;AAOfpB,UAAI,EAAE,aAPS;AAQfsB,cAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,qDAArB;AARK,KAAjB,CADF,EAnBK,CAgCL;;AACAX,WAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,eAAS,EAAE,QADI;AAEfC,aAAO,EAAE;AAAA,eAAM/B,GAAG,CAACgC,KAAJ,CAAUC,IAAV,CAAe,IAAIc,qEAAJ,CAA0B;AAAEvB,iBAAO,EAAPA;AAAF,SAA1B,CAAf,CAAN;AAAA,OAFM;AAGfX,UAAI,EAAE,aAHS;AAIfsB,cAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,yDAArB;AAJK,KAAjB,CADF,EAjCK,CA0CL;;AACA,QAAGb,OAAO,CAACwB,MAAR,EAAH,EAAqB;AACnBtB,aAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,iBAAS,EAAE,QADI;AAEfC,eAAO,EAAE;AAAA,iBAAM/B,GAAG,CAACgC,KAAJ,CAAUC,IAAV,CAAe,IAAIgB,gFAAJ,CAAuB;AAAE5D,sBAAU,EAAEmC;AAAd,WAAvB,CAAf,CAAN;AAAA,SAFM;AAGfX,YAAI,EAAE,YAHS;AAIfsB,gBAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,wDAArB;AAJK,OAAjB,CADF;AAQD,KApDI,CAsDL;;;AACA,QAAGb,OAAO,CAAC0B,QAAR,MAAsB1B,OAAO,CAAC0B,QAAR,GAAmBtD,eAAnB,EAAzB,EAA+D;AAC7D8B,aAAO,CAACjB,IAAR,CAAa;AAAI,iBAAS,EAAC;AAAd,QAAb;AAEAiB,aAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,iBAAS,EAAE,QADI;AAEfW,gBAAQ,EAAE,CAACzC,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,qBAApB,CAFI;AAGfuC,eAAO,EAAE,mBAAM;AACbP,iBAAO,CAAC0B,QAAR,GAAmBC,IAAnB,CAAwB;AACtBvD,2BAAe,EAAE;AADK,WAAxB,EAEGwD,IAFH,CAEQ,YAAM;AACZpD,eAAG,CAACqD,MAAJ,CAAWpB,IAAX,CAAgB,IAAIqB,8DAAJ,CAAU;AAACC,kBAAI,EAAE,SAAP;AAAkBpB,sBAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,0EAArB;AAA5B,aAAV,CAAhB;AACD,WAJD,EAKA,UAAAmB,QAAQ,EAAI;AACV,iBAAI,CAACC,OAAL,GAAe,KAAf;;AACA,iBAAI,CAACC,YAAL,CAAkBF,QAAlB;AACD,WARD;AASD,SAbc;AAcf3C,YAAI,EAAE,kBAdS;AAefsB,gBAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,iEAArB;AAfK,OAAjB,CADF;AAmBD;;AAEDX,WAAO,CAACjB,IAAR,CAAa;AAAI,eAAS,EAAC;AAAd,MAAb,EA/EK,CAiFL;;AACA,QAAGe,OAAO,CAACmC,OAAR,EAAH,EAAsB;AACpBjC,aAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,iBAAS,EAAE,QADI;AAEfC,eAAO,EAAE6B,sEAAkB,CAACC,UAAnB,CAA8BC,IAA9B,CAAmCtC,OAAnC,CAFM;AAGfX,YAAI,YAASW,OAAO,CAACuC,QAAR,KAAqB,aAArB,GAAqC,kBAA9C,CAHW;AAIf5B,gBAAQ,EAAEX,OAAO,CAACuC,QAAR,KAAqB/D,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,wDAArB,CAArB,GAAsGrC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,yDAArB;AAJjG,OAAjB,CADF;AAQD,KA3FI,CA6FL;;;AACA,QAAGb,OAAO,CAACwC,OAAR,EAAH,EAAsB;AACpB;AACA,UAAGxC,OAAO,CAACyC,QAAR,EAAH,EAAuB;AACrB;AACAvC,eAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,mBAAS,EAAE,QADI;AAEfC,iBAAO,EAAE6B,sEAAkB,CAACM,aAAnB,CAAiCJ,IAAjC,CAAsCtC,OAAtC,CAFM;AAGfX,cAAI,EAAE,YAHS;AAIfsB,kBAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,wDAArB;AAJK,SAAjB,CADF,EAFqB,CAWrB;;AACA,YAAGb,OAAO,CAAC2C,SAAR,EAAH,EAAwB;AACtBzC,iBAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,qBAAS,EAAE,QADI;AAEfC,mBAAO,EAAE,mBAAM;AACb;AACA,kBAAIqC,OAAO,CAACC,WAAW,CAACrE,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,oDAArB,CAAD,CAAZ,CAAX,EAAsG;AACpG;AACA,oBAAIrC,GAAG,CAACsE,OAAJ,CAAYC,UAAZ,GAAyBzD,IAAzB,KAAkC,aAAtC,EAAqD;AACnD,sBAAGd,GAAG,CAACwE,QAAP,EAAiB;AACfxE,uBAAG,CAACsE,OAAJ,CAAYG,IAAZ;AACD,mBAFD,MAEK;AACH7D,qBAAC,CAACF,KAAF,CAAQV,GAAG,CAACU,KAAJ,CAAU,MAAV,CAAR;AACD;AACF;;AAED,uBAAOc,OAAO,UAAP,GAAiB4B,IAAjB,CAAsB,YAAM;AACjCxC,mBAAC,CAAC8D,MAAF;AACD,iBAFM,CAAP;AAGD;AACF,aAlBc;AAmBf7D,gBAAI,EAAE,kBAnBS;AAoBfsB,oBAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,uDAArB;AApBK,WAAjB,CADF;AAwBD;AACF,OAtCD,MAsCK;AACH;AACAX,eAAO,CAACjB,IAAR,CACEmB,+DAAM,CAACC,SAAP,CAAiB;AACfC,mBAAS,EAAE,QADI;AAEfC,iBAAO,EAAE6B,sEAAkB,CAACe,UAAnB,CAA8Bb,IAA9B,CAAmCtC,OAAnC,CAFM;AAGfX,cAAI,EAAE,kBAHS;AAIfsB,kBAAQ,EAAEnC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,qDAArB;AAJK,SAAjB,CADF;AAQD;AACF;;AAED,WACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACGuC,iEAAQ,CAAC/C,SAAT,CAAmB;AAClBhB,UAAI,EAAE,YADY;AAElBgE,WAAK,EAAE,QAFW;AAGlBC,qBAAe,EAAE,QAHC;AAIlBC,mBAAa,EAAE,sBAJG;AAKlB5C,cAAQ,EAAET,OALQ;AAMlBsD,YAAM,EAAE,kBAAM;AACZ;AACA,YAAG1C,WAAW,IAAI,CAACA,WAAW,CAACI,OAAZ,EAAhB,IAAyC,CAAC,KAAI,CAACnB,UAAlD,EAA8D;AAC5D,eAAI,CAACA,UAAL,GAAkB,IAAlB;AACAvB,aAAG,CAACM,KAAJ,CACG2E,IADH,CACQ,OADR,EACiBzD,OAAO,CAACe,SAAR,KAAsBf,OAAO,CAACe,SAAR,GAAoBnB,EAApB,EAAtB,GAAiDI,OAAO,CAACgB,WAAR,EADlE,EAEGY,IAFH,CAEQ,YAAM,CAAE,CAFhB,WAGS,YAAM,CAAE,CAHjB,EAIGA,IAJH,CAIQ;AAAA,mBAAMxC,CAAC,CAAC8D,MAAF,EAAN;AAAA,WAJR;AAKD;AACF;AAhBiB,KAAnB,CADH,CADF,CADF;AAwBD,G;;;EAhL6CrD,uD;;;;;;;;;;;;;;;;;;;;;;;;;;ACVhD;AACA;AACA;AACA;;IAEqB0B,qB;;;;;;;;;SACnBjD,I,GAAA,gBAAO;AACL,qBAAMA,IAAN;;AAEA,SAAKoF,KAAL,GAAa,KAAKzD,KAAL,CAAWD,OAAX,CAAmB0B,QAAnB,KAAgC,KAAhC,GAAwC,IAArD;AACA,SAAKiC,IAAL,GAAY,KAAK1D,KAAL,CAAWD,OAAX,CAAmB0B,QAAnB,KAAgC,KAAKzB,KAAL,CAAWD,OAAX,CAAmB0B,QAAnB,EAAhC,GAAgElD,GAAG,CAACM,KAAJ,CAAU8E,YAAV,CAAuB,UAAvB,CAA5E;AAEA,SAAK3F,OAAL,GAAemB,CAAC,CAACyE,IAAF,CAAO,KAAKF,IAAL,CAAU1F,OAAV,MAAuB,EAA9B,CAAf;AAEA,SAAKF,aAAL,GAAqBqB,CAAC,CAACyE,IAAF,CAAO,KAAKF,IAAL,CAAU5F,aAAV,MAA6B,EAApC,CAArB;AAEA,SAAKG,UAAL,GAAkBkB,CAAC,CAACyE,IAAF,CAAO,KAAKF,IAAL,CAAUzF,UAAV,MAA0B,KAAjC,CAAlB;AACA,SAAKC,OAAL,GAAeiB,CAAC,CAACyE,IAAF,CAAO,KAAKF,IAAL,CAAUxF,OAAV,MAAuB,KAA9B,CAAf;AACA,SAAKC,eAAL,GAAuBgB,CAAC,CAACyE,IAAF,CAAO,KAAKF,IAAL,CAAUvF,eAAV,MAA+B,KAAtC,CAAvB;AACD,G;;SAEDkC,S,GAAA,qBAAY;AACV,WAAO,4BAAP;AACD,G;;SAEDwD,K,GAAA,iBAAQ;AACN,WAAO,oBAAP;AACD,G;;SAEDC,O,GAAA,mBAAU;AACR,WACE;AAAK,eAAS,EAAC;AAAf,OACE;AAAK,eAAS,EAAC;AAAf,OACG,KAAKC,MAAL,GAAcC,OAAd,EADH,CADF,CADF;AAOD,G;;SAEDD,M,GAAA,kBAAS;AAAA;;AACP,QAAME,KAAK,GAAG,IAAIC,4DAAJ,EAAd;AAEAD,SAAK,CAACE,GAAN,CAAU,SAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,oCADF,EAEE;AAAU,eAAS,EAAC,aAApB;AAAkC,WAAK,EAAE,KAAKnG,OAAL,EAAzC;AAAyD,iBAAW,EAAE,wBAAtE;AAAgG,aAAO,EAAEmB,CAAC,CAACiF,QAAF,CAAW,OAAX,EAAoB,KAAKpG,OAAzB;AAAzG,MAFF,EAIE,6GAJF,CADF,EAOG,EAPH;AASAiG,SAAK,CAACE,GAAN,CAAU,OAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,sCADF,EAEE;AAAO,UAAI,EAAC,MAAZ;AAAmB,eAAS,EAAC,aAA7B;AAA2C,WAAK,EAAE,KAAKrG,aAAL,EAAlD;AAAwE,iBAAW,EAAE,UAArF;AAAiG,aAAO,EAAEqB,CAAC,CAACiF,QAAF,CAAW,OAAX,EAAoB,KAAKtG,aAAzB;AAA1G,MAFF,EAIG,KAAKA,aAAL,MAAwB,EAAxB,IACC;AAAK,SAAG,EAAE,KAAKA,aAAL,EAAV;AAAgC,SAAG,EAAE,KAAKkC,KAAL,CAAWD,OAAX,CAAmB8D,KAAnB,EAArC;AAAiE,WAAK,EAAE,iBAAxE;AAA2F,WAAK,EAAE,MAAlG;AAA0G,WAAK,EAAE;AAAEQ,iBAAS,EAAE;AAAb;AAAjH,MALJ,CADF,EASG,EATH;AAWAJ,SAAK,CAACE,GAAN,CAAU,OAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACGG,+DAAM,CAAClE,SAAP,CAAiB;AAChBmE,WAAK,EAAE,KAAKrG,OAAL,MAAkB,IADT;AAEhBsG,cAAQ,EAAE,kBAACC,GAAD,EAAS;AACjB,aAAI,CAACvG,OAAL,CAAauG,GAAb;AACD,OAJe;AAKhB/D,cAAQ,EAAE,CACR,gCADQ,EAER;AAAK,iBAAS,EAAC,UAAf;AAA0B,aAAK,EAAE;AAAEgE,oBAAU,EAAE;AAAd;AAAjC,iEAFQ;AALM,KAAjB,CADH,CADF,EAaG,CAAC,EAbJ;AAeAT,SAAK,CAACE,GAAN,CAAU,QAAV,EAAoB;AAAK,eAAS,EAAC;AAAf,OACjBhE,+DAAM,CAACC,SAAP,CAAiB;AAChB0B,UAAI,EAAE,QADU;AAEhBzB,eAAS,EAAE,0CAFK;AAGhB2B,aAAO,EAAE,KAAKA,OAHE;AAIhBtB,cAAQ,EAAE;AAJM,KAAjB,CADiB,CAApB,EAOQ,CAAC,EAPT;AASA,WAAOuD,KAAP;AACD,G;;SAEDU,U,GAAA,sBAAa;AACX,WAAO;AACL3G,aAAO,EAAE,KAAKA,OAAL,EADJ;AAELF,mBAAa,EAAE,KAAKA,aAAL,EAFV;AAGLG,gBAAU,EAAE,KAAKA,UAAL,EAHP;AAILC,aAAO,EAAE,KAAKA,OAAL,EAJJ;AAKLC,qBAAe,EAAE,KAAKA,eAAL,EALZ;AAMLyG,mBAAa,EAAE,KAAKnB,KAAL,IAAc;AAC3B7F,kBAAU,EAAE,KAAKoC,KAAL,CAAWD;AADI;AANxB,KAAP;AAUD,G;;SAED8E,Q,GAAA,kBAASC,CAAT,EAAY;AAAA;;AACVA,KAAC,CAACC,cAAF;AAEA,SAAK/C,OAAL,GAAe,IAAf;AAEA,SAAK0B,IAAL,CACGhC,IADH,CACQ,KAAKiD,UAAL,EADR,EAEGhD,IAFH,CAEQ,YAAM;AACV,UAAG,MAAI,CAAC8B,KAAR,EAAe;AACb,cAAI,CAACzD,KAAL,CAAWD,OAAX,CAAmBiF,QAAnB,CAA4B;AAC1BJ,uBAAa,EAAE;AACbnD,oBAAQ,EAAE,MAAI,CAACiC;AADF;AADW,SAA5B;AAKD;;AAED,YAAI,CAACuB,IAAL;;AACA9F,OAAC,CAAC8D,MAAF;AACD,KAbH,EAcE,UAAAlB,QAAQ,EAAI;AACV,YAAI,CAACC,OAAL,GAAe,KAAf;;AACA,YAAI,CAACC,YAAL,CAAkBF,QAAlB;AACD,KAjBH;AAkBD,G;;;EAxHgDmD,8D;;;;;;;;;;;;;;;;;;;;;;;;;;ACLnD;AACA;AACA;AACA;;IAEqBzE,kB;;;;;;;;;SACnBpC,I,GAAA,gBAAO;AACL,qBAAMA,IAAN;;AAEA,SAAK0B,OAAL,GAAe,KAAKC,KAAL,CAAWD,OAA1B;AAEA,SAAKV,IAAL,GAAYF,CAAC,CAACyE,IAAF,CAAO,KAAK7D,OAAL,CAAa8D,KAAb,MAAwB,EAA/B,CAAZ;AACA,SAAK3E,IAAL,GAAYC,CAAC,CAACyE,IAAF,CAAO,KAAK7D,OAAL,CAAab,IAAb,MAAuB,EAA9B,CAAZ;AAEA,SAAKiG,QAAL,GAAgB,KAAKnF,KAAL,CAAWmF,QAA3B;AACD,G;;SAED9E,S,GAAA,qBAAY;AACV,WAAO,4BAAP;AACD,G;;SAEDwD,K,GAAA,iBAAQ;AACN,WAAOtF,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,uDAArB,CAAP;AACD,G;;SAEDkD,O,GAAA,mBAAU;AACR,WACE;AAAK,eAAS,EAAC;AAAf,OACE;AAAK,eAAS,EAAC;AAAf,OACG,KAAKC,MAAL,GAAcC,OAAd,EADH,CADF,CADF;AAOD,G;;SAEDD,M,GAAA,kBAAS;AAAA;;AACP,QAAME,KAAK,GAAG,IAAIC,4DAAJ,EAAd;AAEAD,SAAK,CAACE,GAAN,CAAU,MAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,iBAAQ5F,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CAAR,MADF,EAEE;AAAO,eAAS,EAAC,aAAjB;AAA+B,iBAAW,EAAErC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CAA5C;AAAoH,WAAK,EAAE,KAAKvB,IAAL,EAA3H;AAAwI,aAAO,EAAE,iBAAAyF,CAAC,EAAI;AACpJ,aAAI,CAACzF,IAAL,CAAUyF,CAAC,CAACM,MAAF,CAASC,KAAnB;;AACA,aAAI,CAACnG,IAAL,CAAUA,gEAAI,CAAC4F,CAAC,CAACM,MAAF,CAASC,KAAV,CAAd;AACD;AAHD,MAFF,CADF,EAQG,EARH;AAUApB,SAAK,CAACE,GAAN,CAAU,MAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,iBAAQ5F,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAAR,MADF,EAEE;AAAO,eAAS,EAAC,aAAjB;AAA+B,iBAAW,EAAErC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAA5C;AAAmH,WAAK,EAAE,KAAK1B,IAAL,EAA1H;AAAuI,aAAO,EAAEC,CAAC,CAACiF,QAAF,CAAW,OAAX,EAAoB,KAAKlF,IAAzB;AAAhJ,MAFF,CADF,EAKG,EALH;AAOA+E,SAAK,CAACE,GAAN,CAAU,QAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACGhE,+DAAM,CAACC,SAAP,CAAiB;AAChB0B,UAAI,EAAE,QADU;AAEhBzB,eAAS,EAAE,0CAFK;AAGhB2B,aAAO,EAAE,KAAKA,OAHE;AAIhBtB,cAAQ,EAAE;AAJM,KAAjB,CADH,CADF,EASG,CAAC,EATJ;AAWA,WAAOuD,KAAP;AACD,G;;SAEDU,U,GAAA,sBAAa;AACX,WAAO;AACLd,WAAK,EAAE,KAAKxE,IAAL,EADF;AAELH,UAAI,EAAE,KAAKA,IAAL;AAFD,KAAP;AAID,G;;SAED2F,Q,GAAA,kBAASC,CAAT,EAAY;AAAA;;AACVA,KAAC,CAACC,cAAF;AAEA,SAAK/C,OAAL,GAAe,IAAf;AAEA,SAAKjC,OAAL,CAAa2B,IAAb,CAAkB;AAChBmC,WAAK,EAAE,KAAKxE,IAAL,EADS;AAEhBH,UAAI,EAAE,KAAKA,IAAL;AAFU,KAAlB,EAIGyC,IAJH,CAIQ,YAAM;AACV,YAAI,CAACsD,IAAL,GADU,CAGV;;;AACA,UAAG,MAAI,CAACE,QAAR,EAAkB;AAChB,YAAMG,GAAG,uBAAsB,MAAI,CAACvF,OAAL,CAAaJ,EAAb,EAAtB,SAA2C,MAAI,CAACT,IAAL,EAApD;;AAEAC,SAAC,CAACF,KAAF,CAAQqG,GAAR,EAAa,IAAb;AACAC,cAAM,CAAC1C,OAAP,CAAe2C,YAAf,CAA4B,IAA5B,EAAkCC,QAAQ,CAAC5B,KAA3C,EAAkDyB,GAAlD;AACD;AACF,KAdH,EAcK,UAAAvD,QAAQ,EAAI;AACb,YAAI,CAACC,OAAL,GAAe,KAAf;;AACA,YAAI,CAACC,YAAL,CAAkBF,QAAlB;AACD,KAjBH;AAmBD,G;;;EA/F6CmD,8D;;;;;;;;;;;;;;ACLhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;CAGA;;AACA3G,GAAG,CAACmH,YAAJ,CAAiBvB,GAAjB,CAAqB,4BAArB,EAAmD,UAAA5F,GAAG,EAAI;AACxDA,KAAG,CAACoH,MAAJ,CAAWC,IAAX,GAAkB;AAAEC,QAAI,EAAE,OAAR;AAAiBzF,aAAS,EAAE0F,2DAAY,CAAC1F,SAAb;AAA5B,GAAlB;AAEA7B,KAAG,CAACoH,MAAJ,CAAWI,YAAX,GAA0B;AAAEF,QAAI,EAAE,sBAAR;AAAgCzF,aAAS,EAAE0F,2DAAY,CAAC1F,SAAb;AAA3C,GAA1B;AAEA7B,KAAG,CAACoH,MAAJ,CAAWK,WAAX,GAAyB;AAAEH,QAAI,EAAE,WAAR;AAAqBzF,aAAS,EAAE6F,uDAAQ,CAAC7F,SAAT;AAAhC,GAAzB;AAEA7B,KAAG,CAACM,KAAJ,CAAUqH,MAAV,CAAiBzE,QAAjB,GAA4BhE,+DAA5B;AAEA0I,iEAAU,CAACC,SAAX,CAAqB3E,QAArB,GAAgC9D,mDAAK,CAACE,MAAN,CAAa,UAAb,CAAhC;AAEAwI,mEAAU;AACX,CAZD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqBJ,Q;;;;;;;;;SACnB5H,I,GAAA,gBAAO;AACL,oBAAMA,IAAN;;AAEAE,OAAG,CAAC+H,QAAJ,CAAa/H,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAAb,EAHK,CAKL;;AACArC,OAAG,CAACsE,OAAJ,CAAY7D,IAAZ,CAAiB,aAAjB;AAEA,SAAKuH,SAAL,GAAiB,cAAjB;AAEA,SAAKvE,OAAL,GAAe,IAAf;AACA,SAAKwE,KAAL,GAAa,KAAb;AACA,SAAKzG,OAAL,GAAe,IAAf,CAZK,CAaL;;AAEA,SAAK0G,YAAL;AACD,G,CAED;;;SACAA,Y,GAAA,wBAAe;AACb,QAAMC,mBAAmB,GAAGnI,GAAG,CAACoI,oBAAJ,EAA5B;;AAEA,QAAID,mBAAJ,EAAyB;AACvB;AACA;AACA;AACA;AACAE,gBAAU,CAAC,KAAKpG,IAAL,CAAU6B,IAAV,CAAe,IAAf,EAAqBqE,mBAArB,CAAD,EAA4C,CAA5C,CAAV;AACD,KAND,MAMO;AACLnI,SAAG,CAACM,KAAJ,CAAU2E,IAAV,CAAe,aAAf,EAA8BrE,CAAC,CAACF,KAAF,CAAQ4H,KAAR,CAAc,IAAd,EAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAA9B,EAAiE;AAC/DC,eAAO,EAAE;AADsD,OAAjE,EAGGpF,IAHH,CAGQ,KAAKnB,IAAL,CAAU6B,IAAV,CAAe,IAAf,CAHR,WAIS,YAAM;AACXlD,SAAC,CAAC8D,MAAF;AACD,OANH;AAOD;;AAED9D,KAAC,CAAC6H,UAAF;AACD,G,CAED;;;SACAxG,I,GAAA,cAAKT,OAAL,EAAc;AACZ;AACA,SAAKA,OAAL,GAAeA,OAAf,CAFY,CAIZ;;AACAxB,OAAG,CAAC+H,QAAJ,CAAgBvG,OAAO,CAAC8D,KAAR,EAAhB,WAAqCtF,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAArC;AAEA,SAAKoB,OAAL,GAAe,KAAf;AAEA,QAAIiF,aAAa,GAAG,EAApB;;AACA,QAAIlH,OAAO,CAACmH,OAAR,IAAmBnH,OAAO,CAACmH,OAAR,CAAgBC,QAAvC,EAAiD;AAC/C,UAAMC,SAAS,GAAGrH,OAAO,CAACJ,EAAR,EAAlB;AAEA0H,aAAO,CAACC,GAAR,CAAYvH,OAAO,CAACmH,OAAR,CAAgBC,QAA5B;AAEAF,mBAAa,GAAGlH,OAAO,CAACmH,OAAR,CAAgBC,QAAhB,CACbI,MADa,CAEZ,UAACC,MAAD;AAAA,eACEA,MAAM,CAAC1F,IAAP,KAAgB,OAAhB,IACA0F,MAAM,CAAC5C,aADP,IAEA4C,MAAM,CAAC5C,aAAP,CAAqBhH,UAFrB,IAGA4J,MAAM,CAAC5C,aAAP,CAAqBhH,UAArB,CAAgC6J,IAAhC,CAAqC9H,EAArC,KAA4CyH,SAJ9C;AAAA,OAFY,EAQb1I,GARa,CAQT,UAAC8I,MAAD;AAAA,eAAYjJ,GAAG,CAACM,KAAJ,CAAUC,OAAV,CAAkB,OAAlB,EAA2B0I,MAAM,CAAC7H,EAAlC,CAAZ;AAAA,OARS,EASb+H,IATa,CASR,UAACC,CAAD,EAAIC,CAAJ;AAAA,eAAUD,CAAC,CAAChI,EAAF,KAASiI,CAAC,CAACjI,EAAF,EAAnB;AAAA,OATQ,EAUbkI,KAVa,CAUP,CAVO,EAUJ,EAVI,CAAhB;AAWD;;AAEDR,WAAO,CAACC,GAAR,CAAYL,aAAZ;AAEA,SAAKa,MAAL,GAAc,IAAIC,mEAAJ,CAAe;AAAEnK,gBAAU,EAAEmC,OAAd;AAAuBkH,mBAAa,EAAbA;AAAvB,KAAf,CAAd;AACA,SAAKa,MAAL,CAAYE,EAAZ,CAAe,iBAAf,EAAkC,KAAKC,eAAL,CAAqB5F,IAArB,CAA0B,IAA1B,CAAlC;AAEAlD,KAAC,CAAC6H,UAAF;AACD,G;;SAEDvI,I,GAAA,gBAAO;AACL,QAAMyJ,SAAS,GAAG,KAAKnI,OAAL,IAAgB,KAAKA,OAAL,CAAa0B,QAAb,EAAhB,IAA2C,KAAK1B,OAAL,CAAa0B,QAAb,GAAwB3D,aAAxB,EAA3C,YAA4F,KAAKiC,OAAL,CAAa0B,QAAb,GAAwB3D,aAAxB,EAA5F,SAAyI,IAA3J;AACA,QAAI+C,WAAW,GAAG,IAAlB;;AAEA,QAAG,CAAC,KAAKmB,OAAN,IAAiB,KAAKjC,OAAzB,EAAkC;AAChCc,iBAAW,GAAG,KAAKd,OAAL,CAAae,SAAb,KAA2B,KAAKf,OAAL,CAAae,SAAb,EAA3B,GAAsDvC,GAAG,CAACM,KAAJ,CAAUC,OAAV,CAAkB,OAAlB,EAA2B,KAAKiB,OAAL,CAAagB,WAAb,EAA3B,CAApE;AACD;;AAED,WACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AACE,eAAS,0DAAuD,KAAKiB,OAAL,GAAe,+BAAf,GAAiD,EAAxG,CADX;AAEE,WAAK,EAAE;AACLmG,uBAAe,EAAED,SADZ;AAELE,eAAO,EAAE,KAAKrI,OAAL,IAAgB,KAAKA,OAAL,CAAayC,QAAb,EAAhB,GAA0C,GAA1C,GAAgD;AAFpD;AAFT,MADF,EASG,KAAKzC,OAAL,IAAgBxB,GAAG,CAAC8J,OAAJ,CAAYC,IAA5B,KAAqC/J,GAAG,CAAC8J,OAAJ,CAAYC,IAAZ,CAAiBrH,OAAjB,MAA8B,KAAKlB,OAAL,CAAaG,SAAb,EAA9B,IAA2D,KAAKH,OAAL,CAAawI,KAAb,MAAwB,KAAKxI,OAAL,CAAawI,KAAb,GAAqB,CAArB,EAAwBtH,OAAxB,EAAxH,KACC,EAAC,sEAAD;AAAoB,aAAO,EAAE,KAAKlB;AAAlC,MAVJ,EAcE;AAAK,eAAS,EAAE;AAAhB,OACG,CAAC,KAAKiC,OAAN,IAAiB,KAAKjC,OAAtB,IAAiC,KAAKA,OAAL,CAAahB,IAAb,EAAjC,IAAwD,KAAKgB,OAAL,CAAahB,IAAb,GAAoBL,GAApB,CAAwB,UAAAE,GAAG;AAAA,aAClF;AAAG,YAAI,EAAEL,GAAG,CAACU,KAAJ,CAAU,cAAV,EAA0B;AAAEC,cAAI,EAAEN,GAAG,CAACM,IAAJ;AAAR,SAA1B,CAAT;AAA0D,cAAM,EAAEC,CAAC,CAACF;AAApE,SAA4EL,GAAG,CAACS,IAAJ,EAA5E,CADkF;AAAA,KAA3B,CAD3D,EAKG,KAAK2C,OAAL,IACC,CAAC,CAAD,EAAI,CAAJ,EAAOtD,GAAP,CAAW;AAAA,aAAO;AAAM,iBAAS,EAAE;AAAjB,oBAAP;AAAA,KAAX,CANJ,CAdF,EAwBE;AAAK,eAAS,EAAE;AAAhB,OAEE;AAAI,eAAS,EAAE,KAAKsD,OAAL,GAAe,+BAAf,GAAiD;AAAhE,OACG,KAAKjC,OAAL,GAAe,KAAKA,OAAL,CAAa8D,KAAb,EAAf,GAAsC,aADzC,EAEG,KAAK9D,OAAL,IAAgB,KAAKA,OAAL,CAAayC,QAAb,EAAhB,UAA+CjE,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,yCAArB,CAA/C,MAFH,CAFF,EAOG,KAAKoB,OAAL,IAAgB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAUtD,GAAV,CAAc;AAAA,aAC7B,eACE;AAAG,iBAAS,EAAE;AAAd,gBADF,EAEE;AAAG,iBAAS,EAAE;AAAd,gBAFF,EAGE;AAAG,iBAAS,EAAE;AAAd,gBAHF,EAIE,oBAJF,CAD6B;AAAA,KAAd,CAPnB,EAgBE;AAAK,eAAS,EAAE;AAAhB,OACG,CAAC,KAAKsD,OAAN,IAAiB,KAAKjC,OAAL,CAAa0B,QAAb,EAAjB,IAA4C,KAAK1B,OAAL,CAAa0B,QAAb,GAAwBtD,eAAxB,EAA5C,IACC;AAAY,eAAM,SAAlB;AAA4B,WAAK,EAAE;AAAEqK,gBAAQ,EAAE;AAAZ;AAAnC,OAAyD,eAAK;AAAM,eAAS,EAAE,cAAjB;AAAiC,WAAK,EAAE;AAAEC,mBAAW,EAAE;AAAf;AAAxC,MAAL,OAAyElK,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,gEAArB,CAAzE,CAAzD,CAFJ,EAKG,CAAC,KAAKoB,OAAN,IAAiBnB,WAAjB,IAAgC1B,CAAC,CAACuJ,KAAF,CAAQ7H,WAAW,CAAC8H,WAAZ,EAAR,CALnC,CAhBF,CAxBF,CADF,EAoDE;AAAK,eAAS,EAAE;AAAhB,OACE,cAAKpK,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,2DAArB,CAAL,QAA0F,KAAKb,OAAL,GAAgB,KAAKA,OAAL,CAAa6I,YAAb,KAA8B,CAA9C,GAAmD,CAA7I,MADF,EAGG,CAAC,KAAK5G,OAAN,IAAiB,KAAKjC,OAAL,CAAauC,QAA9B,IAA0C,KAAKvC,OAAL,CAAauC,QAAb,EAA1C,IACC;AAAK,eAAS,EAAE;AAAhB,OACE;AAAY,eAAM;AAAlB,OAA4B,eAAK;AAAM,eAAS,EAAE,aAAjB;AAAgC,WAAK,EAAE;AAAEmG,mBAAW,EAAE;AAAf;AAAvC,MAAL,OAAwElK,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,yDAArB,CAAxE,CAA5B,CADF,CAJJ,EASG,CAAC,KAAKoB,OAAN,IAAiB,KAAK8F,MAAtB,IAAgC,KAAKA,MAAL,CAAYe,MAAZ,EATnC,CApDF,CADF,EAkEE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,6CAA0C,KAAK7G,OAAL,GAAe,yBAAf,GAA2C,EAArF,CAAd;AAAyG,WAAK,EAAE;AAAE8G,uBAAe,EAAE,KAAK/I,OAAL,IAAgB,KAAKA,OAAL,CAAauI,IAAb,EAAhB,GAAsC,KAAKvI,OAAL,IAAgB,KAAKA,OAAL,CAAauI,IAAb,GAAoBS,KAApB,EAAtD,GAAoF;AAAvG;AAAhH,MADF,EAGE;AAAK,eAAS,EAAE;AAAhB,OAAqD,KAAKhJ,OAAL,IAAgB,KAAKA,OAAL,CAAauI,IAAb,EAAhB,GAAsCU,4DAAM,CAAC,KAAKjJ,OAAL,CAAauI,IAAb,EAAD,CAA5C,GAAoE;AAAM,eAAS,EAAE;AAAjB,MAAzH,CAHF,EAKG,KAAKvI,OAAL,IAAgB,KAAKA,OAAL,CAAauI,IAAb,EAAhB,IACC;AAAK,WAAK,EAAE;AAAEW,eAAO,EAAE;AAAX;AAAZ,OACE;AAAM,eAAS,EAAE;AAAjB,OAAoD,KAAKlJ,OAAL,CAAauI,IAAb,GAAoBY,WAApB,EAApD,CADF,EAEE;AAAG,eAAS,EAAE;AAAd,OAAgD,KAAKnJ,OAAL,CAAauI,IAAb,GAAoBa,GAApB,EAAhD,CAFF,CANJ,EAYG,KAAKnH,OAAL,IACC,eACE;AAAM,eAAS,EAAE;AAAjB,cADF,EAEE;AAAG,eAAS,EAAE;AAAd,cAFF,EAGE;AAAG,eAAS,EAAE;AAAd,cAHF,EAIE;AAAG,eAAS,EAAE;AAAd,cAJF,CAbJ,CADF,EAuBE,EAAC,kEAAD,OAvBF,CAlEF,CADF,CADF,CADF;AAkGD,G;;SAEDiG,e,GAAA,yBAAgBmB,WAAhB,EAA6BC,SAA7B,EAAwC;AACtC,QAAMtJ,OAAO,GAAG,KAAKA,OAArB;;AAEA,QAAIxB,GAAG,CAAC8J,OAAJ,CAAYC,IAAZ,IAAoBe,SAAS,IAAItJ,OAAO,CAACuJ,kBAAR,MAAgC,CAApC,CAAjC,EAAyE;AACvEvJ,aAAO,CAAC2B,IAAR,CAAa;AAAE4H,0BAAkB,EAAED;AAAtB,OAAb;AACAlK,OAAC,CAAC8D,MAAF;AACD;AAEF,G;;;EAnMmCsG,6D;;;;;;;;;;;;;;;;;;;;;;;ACRtC;AACA;AACA;;IAEqBzD,Y;;;;;;;;;SACnBzH,I,GAAA,gBAAO;AACL,oBAAMA,IAAN;;AAEAE,OAAG,CAAC+H,QAAJ,CAAa/H,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAAb;AAEA,SAAK2F,SAAL,GAAiB,kBAAjB;AAEA,SAAKiD,SAAL,GAAiB,IAAjB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKlB,KAAL,GAAa,EAAb;AACA,SAAKmB,OAAL,GAAe,IAAf,CAVK,CAYL;;AACAnL,OAAG,CAACsE,OAAJ,CAAY7D,IAAZ,CAAiB,MAAjB;AAEA,SAAK2K,gBAAL;AACD,G,CAED;;;SACAA,gB,GAAA,4BAAmB;AACjB,QAAMjD,mBAAmB,GAAGnI,GAAG,CAACoI,oBAAJ,EAA5B;;AAEA,QAAID,mBAAJ,EAAyB;AACvB;AACA;AACA;AACA;AACAE,gBAAU,CAAC,KAAKpG,IAAL,CAAU6B,IAAV,CAAe,IAAf,EAAqBqE,mBAArB,CAAD,EAA4C,CAA5C,CAAV;AACD,KAND,MAMO;AACLnI,SAAG,CAACM,KAAJ,CAAU2E,IAAV,CAAe,aAAf,EAA8B;AAC5B+D,cAAM,EAAE;AACNqC,WAAC,EAAE;AADG,SADoB;AAI5B7C,eAAO,EAAE;AAJmB,OAA9B,EAMGpF,IANH,CAMQ,KAAKnB,IAAL,CAAU6B,IAAV,CAAe,IAAf,CANR,WAOS,YAAM;AACXlD,SAAC,CAAC8D,MAAF;AACD,OATH;AAUD;;AAED9D,KAAC,CAAC6H,UAAF;AACD,G,CAED;;;SACAxG,I,GAAA,cAAKqJ,QAAL,EAAe;AACb,QAAGA,QAAQ,CAACC,MAAT,KAAoB,CAAvB,EAA0B;AAE1B,SAAKL,aAAL,GAAqBI,QAAQ,CAAChC,KAAT,CAAe,CAAf,EAAkB,CAAlB,CAArB;AACA,SAAKU,KAAL,GAAasB,QAAQ,CAACC,MAAT,IAAmB,CAAnB,GAAuBD,QAAQ,CAAChC,KAAT,CAAe,CAAf,EAAkBgC,QAAQ,CAACC,MAA3B,CAAvB,GAA4D,EAAzE;AAEA,SAAKN,SAAL,GAAiB,KAAjB;AAEArK,KAAC,CAAC6H,UAAF;AACD,G;;SAEDvI,I,GAAA,gBAAO;AACL,WACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE,kCADF,EAGE;AAAK,eAAS,EAAE;AAAhB,OAEG,KAAK+K,SAAL,IAAkB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU9K,GAAV,CAAc;AAAA,aAC/B;AAAK,iBAAS,EAAE;AAAhB,SACE;AAAK,iBAAS,EAAE;AAAhB,SACE,qBADF,EAGE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,CADF,CAHF,CADF,CAD+B;AAAA,KAAd,CAFrB,EAcG,CAAC,KAAK8K,SAAN,IAAmB,KAAKC,aAAL,CAAmBK,MAAnB,IAA6B,CAAhD,IAAqD,KAAKL,aAAL,CAAmB/K,GAAnB,CAAuB,UAACqB,OAAD,EAAa;AACxF,UAAMmI,SAAS,GAAGnI,OAAO,CAAC0B,QAAR,MAAsB1B,OAAO,CAAC0B,QAAR,GAAmB3D,aAAnB,EAAtB,YAAkEiC,OAAO,CAAC0B,QAAR,GAAmB3D,aAAnB,EAAlE,SAA0G,IAA5H;AACA,UAAMiM,OAAO,GAAGhK,OAAO,CAAChB,IAAR,KAAiBgB,OAAO,CAAChB,IAAR,GAAewI,MAAf,CAAsB,UAAA3I,GAAG;AAAA,eAAIA,GAAG,CAACa,OAAJ,EAAJ;AAAA,OAAzB,CAAjB,GAA+D,EAA/E;AAEA,aACE;AACE,YAAI,EAAElB,GAAG,CAACU,KAAJ,CAAU,aAAV,EAAyB;AAAEU,YAAE,EAAKI,OAAO,CAACJ,EAAR,EAAL,SAAqBI,OAAO,CAACb,IAAR;AAAzB,SAAzB,CADR;AAEE,iBAAS,EAAE,iDAFb;AAGE,aAAK,EAAE;AAAEiJ,yBAAe,EAAED;AAAnB,SAHT;AAIE,cAAM,EAAE/I,CAAC,CAACF;AAJZ,SAME;AAAK,iBAAS,EAAE;AAAhB,SACG8K,OAAO,CAAC,CAAD,CAAP,IACC,gBAAOA,OAAO,CAAC,CAAD,CAAP,CAAW1K,IAAX,EAAP,CAFJ,EAIGU,OAAO,CAACiK,QAAR,MACC,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,CALJ,CANF,EAeE;AAAK,iBAAS,EAAE;AAAhB,SACE,cAAKjK,OAAO,CAAC8D,KAAR,EAAL,CADF,EAGE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAwCoG,+DAAS,CAAClK,OAAO,CAACmK,SAAR,EAAD,CAAjD,CADF,EAEE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAuCnK,OAAO,CAACuI,IAAR,KAAiBvI,OAAO,CAACuI,IAAR,GAAeY,WAAf,EAAjB,GAAgD,WAAvF,CAFF,EAGE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAA0CnJ,OAAO,CAAC6I,YAAR,EAA1C,CAHF,CAHF,CAfF,CADF;AA2BD,KA/BqD,CAdxD,CAHF,CADF,EAqDE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACG,KAAKY,SAAL,IAAkB,CAAC,KAAD,EAAQ,KAAR,EAAe,IAAf,EAAqB,KAArB,EAA4B9K,GAA5B,CAAgC,UAAC6F,KAAD,EAAW;AAC5D,aACE;AAAK,iBAAS,oCAAiCA,KAAK,KAAK,IAAV,GAAiB,OAAjB,GAA2B,SAA5D;AAAd,SACE;AAAK,iBAAS,EAAE;AAAhB,QADF,EAEE;AAAK,iBAAS,EAAE;AAAhB,SACE,qBADF,EAEE,oBAFF,EAIE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,CADF,CAJF,CAFF,CADF;AAaD,KAdkB,CADrB,EAiBG,CAAC,KAAKiF,SAAN,IAAmB,KAAKjB,KAAL,CAAWuB,MAAX,IAAqB,CAAxC,IAA6C,KAAKvB,KAAL,CAAW7J,GAAX,CAAe,UAAAqB,OAAO,EAAI;AACtE,UAAMmI,SAAS,GAAGnI,OAAO,CAAC0B,QAAR,MAAsB1B,OAAO,CAAC0B,QAAR,GAAmB3D,aAAnB,EAAtB,YAAkEiC,OAAO,CAAC0B,QAAR,GAAmB3D,aAAnB,EAAlE,SAA0G,IAA5H;AACA,UAAMI,OAAO,GAAG6B,OAAO,CAAC0B,QAAR,MAAsB1B,OAAO,CAAC0B,QAAR,GAAmBvD,OAAnB,EAAtC;AACA,UAAMF,OAAO,GAAG+B,OAAO,CAAC0B,QAAR,MAAsB1B,OAAO,CAAC0B,QAAR,GAAmBzD,OAAnB,EAAtB,GAAqD+B,OAAO,CAAC0B,QAAR,GAAmBzD,OAAnB,EAArD,GAAoF,EAApG;AAEA,aACE;AACE,YAAI,EAAEO,GAAG,CAACU,KAAJ,CAAU,aAAV,EAAyB;AAAEU,YAAE,EAAKI,OAAO,CAACJ,EAAR,EAAL,SAAqBI,OAAO,CAACb,IAAR;AAAzB,SAAzB,CADR;AAEE,iBAAS,oCAAiChB,OAAO,GAAG,OAAH,GAAa,SAArD,CAFX;AAGE,cAAM,EAAEiB,CAAC,CAACF;AAHZ,SAIE;AAAK,iBAAS,EAAE,8CAAhB;AAAgE,aAAK,EAAE;AAAEkJ,yBAAe,EAAED;AAAnB;AAAvE,QAJF,EAKE;AAAK,iBAAS,EAAE;AAAhB,SACE,cAAKnI,OAAO,CAAC8D,KAAR,EAAL,CADF,EAEE,aAAI7F,OAAJ,CAFF,EAIE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAwCiM,+DAAS,CAAClK,OAAO,CAACmK,SAAR,EAAD,CAAjD,CADF,EAEE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAuCnK,OAAO,CAACuI,IAAR,KAAiBvI,OAAO,CAACuI,IAAR,GAAeY,WAAf,EAAjB,GAAgD,WAAvF,CAFF,EAGE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAA0CnJ,OAAO,CAAC6I,YAAR,EAA1C,CAHF,CAJF,CALF,CADF;AAkBD,KAvB6C,CAjBhD,EA0CG,CAAC,KAAKY,SAAN,IAAmB,KAAKjB,KAAL,CAAWuB,MAAX,KAAsB,CAAzC,IACC;AAAG,eAAS,EAAE;AAAd,6BA3CJ,CADF,EAgDE;AAAK,eAAS,EAAE;AAAhB,OACE,EAAC,kEAAD,OADF,CAhDF,CArDF,CADF,CADF;AA8GD,G;;;EAxKuCP,6D;;;;;;;;;;;;;;ACJ1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEe,2EAAW;AACxB;AACAY,8DAAM,CAACC,kEAAS,CAAChE,SAAX,EAAsB,QAAtB,EAAgC,YAAW;AAC/C,QAAMxH,GAAG,GAAG,KAAKyL,UAAL,EAAZ;AACA,QAAMC,kBAAkB,GAAG/L,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,MAAhD,IAA0DQ,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,WAArI,CAF+C,CAI/C;;AACA,QAAGa,GAAG,IAAI0L,kBAAV,EAA8B;AAC5B,UAAMC,QAAQ,GAAGhM,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,CAAjB,CAD4B,CAG5B;;AACA,UAAGwM,QAAQ,CAACC,OAAT,CAAiB5L,GAAG,CAACe,EAAJ,EAAjB,KAA8B,CAA9B,IAAoCf,GAAG,CAACc,MAAJ,MAAgB6K,QAAQ,CAACC,OAAT,CAAiB5L,GAAG,CAACc,MAAJ,GAAaC,EAAb,EAAjB,KAAuC,CAA9F,EAAkG;AAChGR,SAAC,CAACF,KAAF,CAAQV,GAAG,CAACU,KAAJ,CAAU,MAAV,CAAR;AACD;AACF;AACF,GAbK,CAAN,CAFwB,CAiBxB;;AACAwL,gEAAQ,CAACC,uEAAc,CAACtE,SAAhB,EAA2B,MAA3B,EAAmC,UAASuE,QAAT,EAAmB;AAC5D,QAAMC,yBAAyB,GAAGrM,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,MAAhD,IAA0DQ,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,kBAA5I;;AACA,QAAG6M,yBAAyB,IAAI,KAAKhN,UAAlC,IAAgD,KAAKA,UAArD,IAAmE,KAAKA,UAAL,CAAgBmB,IAAhB,GAAuB+K,MAAvB,GAAgC,CAAtG,EAAyG;AACvG,UAAMS,QAAQ,GAAGhM,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,CAAjB;AAEA,UAAM8M,SAAS,GAAG,KAAKjN,UAAL,CAAgBmB,IAAhB,GAAuBwI,MAAvB,CAA8B,UAAA3I,GAAG,EAAI;AACrD,eAAO2L,QAAQ,CAACC,OAAT,CAAiB5L,GAAG,CAACe,EAAJ,EAAjB,KAA8B,CAA9B,IAAqCf,GAAG,CAACc,MAAJ,MAAgB6K,QAAQ,CAACC,OAAT,CAAiB5L,GAAG,CAACc,MAAJ,GAAaC,EAAb,EAAjB,KAAuC,CAAnG;AACD,OAFiB,CAAlB,CAHuG,CAOvG;;AACA,UAAGkL,SAAS,CAACf,MAAV,GAAmB,CAAtB,EAAyB;AACvB;AACA,YAAMxE,GAAG,GAAG/G,GAAG,CAACU,KAAJ,CAAU,aAAV,EAAyB;AACnCU,YAAE,EAAK,KAAK/B,UAAL,CAAgB+B,EAAhB,EAAL,SAA6B,KAAK/B,UAAL,CAAgBsB,IAAhB;AADI,SAAzB,CAAZ;AAIAuG,gBAAQ,CAACqF,QAAT,CAAkBC,IAAlB,GAAyBzF,GAAzB;AAEA,eACE;AAAK,eAAK,EAAE;AAAE0F,qBAAS,EAAE,QAAb;AAAuB/B,mBAAO,EAAE;AAAhC;AAAZ,WACE,EAAC,yEAAD;AAAkB,cAAI,EAAE;AAAxB,UADF,EAGE;AAAI,eAAK,EAAE;AAAE5E,qBAAS,EAAE;AAAb;AAAX,WAAmC9F,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,0DAArB,CAAnC,CAHF,EAIGrC,GAAG,CAACoC,UAAJ,CAAeC,KAAf,CAAqB,yDAArB,EAAgF;AAC/E+G,WAAC,EAAE;AAAG,gBAAI,EAAErC;AAAT;AAD4E,SAAhF,CAJH,CADF;AAUD;AACF;;AAED,WAAOqF,QAAQ,EAAf;AACD,GAhCO,CAAR;AAiCD,C;;;;;;;;;;;ACxDD,iD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,0E;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,oD","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class BlogMeta extends mixin(Model, {\r\n    discussion: Model.hasOne('discussion'),\r\n    featuredImage: Model.attribute('featuredImage'),\r\n    summary: Model.attribute('summary'),\r\n    isFeatured: Model.attribute('isFeatured'),\r\n    isSized: Model.attribute('isSized'),\r\n    isPendingReview: Model.attribute('isPendingReview'),\r\n}) {}","import Component from 'flarum/Component';\r\n\r\nexport default class BlogCategories extends Component {\r\n  init() {\r\n    this.blogCategories = app.forum.attribute('blogTags');\r\n  }\r\n  \r\n  view() {\r\n    return (\r\n      <div className={\"BlogCategories\"}>\r\n        <h3>Categories</h3>\r\n\r\n        {this.blogCategories && this.blogCategories.map(tagId => {\r\n          const tag = app.store.getById('tags', tagId);\r\n\r\n          if(!tag) return null; \r\n\r\n          const tags = [];\r\n\r\n          // Add tag\r\n          tags.push(\r\n            <a href={app.route(\"blogCategory\", { slug: tag.slug() })} className={\"BlogCategories-item\"} config={m.route}><span><i className={tag.icon()} /></span> {tag.name()}</a>\r\n          );\r\n\r\n          // Add tags\r\n          app.store.all('tags').forEach(_tag => {\r\n            if(_tag.isChild() && _tag.parent().id() === tag.id()) {\r\n              tags.push(\r\n                <a href={app.route(\"blogCategory\", { slug: _tag.slug() })} className={\"BlogCategories-item\"} config={m.route}><span><i className={_tag.icon()} /></span> {_tag.name()}</a>\r\n              );\r\n            }\r\n          });\r\n          \r\n          return tags;\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n}","import Component from 'flarum/Component';\r\nimport TagDiscussionModal from 'flarum/tags/components/TagDiscussionModal';\r\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\r\nimport Alert from 'flarum/components/Alert';\r\nimport Button from 'flarum/components/Button';\r\nimport Dropdown from 'flarum/components/Dropdown';\r\nimport BlogPostSettingsModal from './Modals/BlogPostSettingsModal';\r\nimport EditPostComposer from 'flarum/components/EditPostComposer';\r\nimport RenameArticleModal from './Modals/RenameArticleModal';\r\n\r\nexport default class BlogPostController extends Component {\r\n  init() {\r\n    this.loadedPost = false;\r\n  }\r\n  \r\n  view() {\r\n    const article = this.props.article;\r\n    let buttons = [];\r\n\r\n    // Rename article\r\n    if(article.canRename()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new RenameArticleModal({ article })),\r\n          icon: 'fas fa-pencil-alt',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.rename_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    const articlePost = article.firstPost() ? article.firstPost() : app.store.getById('posts', article.firstPostId());\r\n\r\n    // Edit article\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        disabled: !articlePost.canEdit(),\r\n        onclick: () => {\r\n          app.composer.load(new EditPostComposer({post: articlePost}));\r\n          app.composer.show();\r\n        },\r\n        icon: 'fas fa-edit',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.edit_article')\r\n      })\r\n    );\r\n\r\n    // Article settings\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        onclick: () => app.modal.show(new BlogPostSettingsModal({ article })),\r\n        icon: 'fas fa-cogs',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.article_settings')\r\n      })\r\n    );\r\n\r\n    // Update categories\r\n    if(article.canTag()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new TagDiscussionModal({ discussion: article })),\r\n          icon: 'fas fa-tag',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.update_category')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Approve article\r\n    if(article.blogMeta() && article.blogMeta().isPendingReview()) {\r\n      buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          disabled: !app.forum.attribute('canApproveBlogPosts'),\r\n          onclick: () => {\r\n            article.blogMeta().save({\r\n              isPendingReview: false\r\n            }).then(() => {\r\n              app.alerts.show(new Alert({type: 'success', children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article_approved')}));\r\n            },\r\n            response => {\r\n              this.loading = false;\r\n              this.handleErrors(response);\r\n            });\r\n          },\r\n          icon: 'fas fa-thumbs-up',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n    // Lock article\r\n    if(article.canLock()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: DiscussionControls.lockAction.bind(article),\r\n          icon: `fas ${article.isLocked() ? 'fa-comments' : 'fa-comment-slash'}`,\r\n          children: article.isLocked() ? app.translator.trans('v17development-flarum-blog.forum.tools.enable_comments') : app.translator.trans('v17development-flarum-blog.forum.tools.disable_comments')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Hide/show/delete\r\n    if(article.canHide()) {\r\n      // Article is hidden\r\n      if(article.isHidden()) {\r\n        // Recover article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.restoreAction.bind(article),\r\n            icon: 'fas fa-eye',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.recover_article')\r\n          })\r\n        );\r\n\r\n        // Delete article\r\n        if(article.canDelete()) {\r\n          buttons.push(\r\n            Button.component({\r\n              className: 'Button',\r\n              onclick: () => {\r\n                // Confirm deletion\r\n                if (confirm(extractText(app.translator.trans('core.forum.discussion_controls.delete_confirmation')))) {\r\n                  // Redirect if the current page is an knowledge base article\r\n                  if (app.history.getCurrent().name === 'blogArticle') {\r\n                    if(app.previous) {\r\n                      app.history.back();\r\n                    }else{\r\n                      m.route(app.route('blog'));\r\n                    }\r\n                  }\r\n            \r\n                  return article.delete().then(() => {\r\n                    m.redraw();\r\n                  });\r\n                }            \r\n              },\r\n              icon: 'far fa-trash-alt',\r\n              children: app.translator.trans('v17development-flarum-blog.forum.tools.delete_forever')\r\n            })\r\n          );\r\n        }\r\n      }else{\r\n        // Hide article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.hideAction.bind(article),\r\n            icon: 'fas fa-eye-slash',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.hide_article')\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\r\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\r\n          {Dropdown.component({\r\n            icon: 'fas fa-cog',\r\n            label: 'Manage',\r\n            buttonClassName: 'Button',\r\n            menuClassName: 'Dropdown-menu--right',\r\n            children: buttons,\r\n            onshow: () => {\r\n              // Get post data to make sure they can edit the post\r\n              if(articlePost && !articlePost.canEdit() && !this.loadedPost) {\r\n                this.loadedPost = true;\r\n                app.store\r\n                  .find('posts', article.firstPost() ? article.firstPost().id() : article.firstPostId())\r\n                  .then(() => {})\r\n                  .catch(() => {})\r\n                  .then(() => m.redraw())\r\n              }     \r\n            }\r\n          })}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport Switch from 'flarum/components/Switch';\r\n\r\nexport default class BlogPostSettingsModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.isNew = this.props.article.blogMeta() ? false : true;\r\n    this.meta = this.props.article.blogMeta() ? this.props.article.blogMeta() : app.store.createRecord('blogMeta');\r\n    \r\n    this.summary = m.prop(this.meta.summary() || '');\r\n\r\n    this.featuredImage = m.prop(this.meta.featuredImage() || '');\r\n\r\n    this.isFeatured = m.prop(this.meta.isFeatured() || false);\r\n    this.isSized = m.prop(this.meta.isSized() || false);\r\n    this.isPendingReview = m.prop(this.meta.isPendingReview() || false);\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return 'Blog post settings';\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('summary', (\r\n      <div className=\"Form-group\">\r\n        <label>Article summary:</label>\r\n        <textarea className=\"FormControl\" value={this.summary()} placeholder={\"Please enter a summary\"} oninput={m.withAttr('value', this.summary)}/>\r\n\r\n        <small>This summary will be visible on the blog overview page and will be used for SEO purposes.</small>\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('image', (\r\n      <div className=\"Form-group\">\r\n        <label>Article image URL:</label>\r\n        <input type=\"text\" className=\"FormControl\" value={this.featuredImage()} placeholder={\"https://\"} oninput={m.withAttr('value', this.featuredImage)}/>\r\n\r\n        {this.featuredImage() != \"\" && (\r\n          <img src={this.featuredImage()} alt={this.props.article.title()} title={\"Blog post image\"} width={\"100%\"} style={{ marginTop: '15px' }} />\r\n        )}\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('sized', (\r\n      <div className=\"Form-group\">\r\n        {Switch.component({\r\n          state: this.isSized() == true,\r\n          onchange: (val) => {\r\n            this.isSized(val);\r\n          },\r\n          children: [\r\n            <b>Highlighted post</b>, \r\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>Give this post a big image on the blog overview page.</div>,\r\n          ]\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    items.add('submit', <div className=\"Form-group\">\r\n      {Button.component({\r\n        type: 'submit',\r\n        className: 'Button Button--primary SupportModal-save',\r\n        loading: this.loading,\r\n        children: 'Update'\r\n      })}\r\n    </div>, -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      summary: this.summary(),\r\n      featuredImage: this.featuredImage(),\r\n      isFeatured: this.isFeatured(),\r\n      isSized: this.isSized(),\r\n      isPendingReview: this.isPendingReview(),\r\n      relationships: this.isNew && {\r\n        discussion: this.props.article\r\n      }\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.meta\r\n      .save(this.submitData())\r\n      .then(() => {\r\n        if(this.isNew) {\r\n          this.props.article.pushData({\r\n            relationships: {\r\n              blogMeta: this.meta\r\n            }\r\n          });\r\n        }\r\n\r\n        this.hide();\r\n        m.redraw();\r\n      },\r\n      response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      });\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport { slug } from 'flarum/utils/string';\r\n\r\nexport default class RenameArticleModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.article = this.props.article;\r\n\r\n    this.name = m.prop(this.article.title() || '');\r\n    this.slug = m.prop(this.article.slug() || '');\r\n\r\n    this.redirect = this.props.redirect;\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('v17development-flarum-blog.forum.tools.rename_article');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('name', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.title')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.title')} value={this.name()} oninput={e => {\r\n          this.name(e.target.value);\r\n          this.slug(slug(e.target.value));\r\n        }}/>\r\n      </div>\r\n    ), 50);\r\n\r\n    items.add('slug', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.slug')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.slug')} value={this.slug()} oninput={m.withAttr('value', this.slug)}/>\r\n      </div>\r\n    ), 40);\r\n\r\n    items.add('submit', (\r\n      <div className=\"Form-group\">\r\n        {Button.component({\r\n          type: 'submit',\r\n          className: 'Button Button--primary SupportModal-save',\r\n          loading: this.loading,\r\n          children: 'Update'\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.article.save({\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    })\r\n      .then(() => {\r\n        this.hide();\r\n\r\n        // Redirect\r\n        if(this.redirect) {\r\n          const url =  `/knowledgebase/${this.article.id()}-${this.slug()}`;\r\n\r\n          m.route(url, true);\r\n          window.history.replaceState(null, document.title, url);\r\n        }\r\n      }, response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      }\r\n    );\r\n  }\r\n}","import BlogItem from \"./pages/BlogItem\";\r\nimport Model from 'flarum/Model';\r\nimport Discussion from 'flarum/models/Discussion';\r\n\r\nimport BlogOverview from \"./pages/BlogOverview\";\r\nimport redirector from \"./utils/redirector\";\r\nimport BlogMeta from \"../common/Models/BlogMeta\";\r\n\r\n// Register Flarum Blog\r\napp.initializers.add('v17development-flarum-blog', app => {\r\n  app.routes.blog = { path: '/blog', component: BlogOverview.component() };\r\n  \r\n  app.routes.blogCategory = { path: '/blog/category/:slug', component: BlogOverview.component() };\r\n\r\n  app.routes.blogArticle = { path: '/blog/:id', component: BlogItem.component() };\r\n\r\n  app.store.models.blogMeta = BlogMeta;\r\n\r\n  Discussion.prototype.blogMeta = Model.hasOne('blogMeta');\r\n\r\n  redirector();\r\n});","import Page from 'flarum/components/Page';\r\nimport avatar from 'flarum/helpers/avatar';\r\nimport Button from 'flarum/components/Button';\r\nimport ReplyComposer from 'flarum/components/ReplyComposer';\r\nimport PostStream from 'flarum/components/PostStream';\r\nimport BlogCategories from '../components/BlogCategories';\r\nimport BlogPostController from '../components/BlogPostController';\r\n\r\nexport default class BlogItem extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    // Send history push\r\n    app.history.push('blogArticle');\r\n\r\n    this.bodyClass = 'BlogItemPage';\r\n\r\n    this.loading = true;\r\n    this.found = false;\r\n    this.article = null;\r\n    // this.posts = [];\r\n\r\n    this.loadBlogItem();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogItem() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', m.route.param('id').split('-')[0], {\r\n        include: 'user,tags,firstPost,blogMeta,posts,posts.discussion,posts.user'\r\n      })\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog post\r\n  show(article) {\r\n    // Set article data\r\n    this.article = article;\r\n\r\n    // Update title\r\n    app.setTitle(`${article.title()} - ${app.translator.trans('v17development-flarum-blog.forum.blog')}`);\r\n\r\n    this.loading = false;\r\n\r\n    let includedPosts = [];\r\n    if (article.payload && article.payload.included) {\r\n      const articleId = article.id();\r\n\r\n      console.log(article.payload.included);\r\n\r\n      includedPosts = article.payload.included\r\n        .filter(\r\n          (record) =>\r\n            record.type === 'posts' &&\r\n            record.relationships &&\r\n            record.relationships.discussion &&\r\n            record.relationships.discussion.data.id === articleId\r\n        )\r\n        .map((record) => app.store.getById('posts', record.id))\r\n        .sort((a, b) => a.id() - b.id())\r\n        .slice(0, 20);\r\n    }\r\n\r\n    console.log(includedPosts);\r\n\r\n    this.stream = new PostStream({ discussion: article, includedPosts });\r\n    this.stream.on('positionChanged', this.positionChanged.bind(this));\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  view() {\r\n    const blogImage = this.article && this.article.blogMeta() && this.article.blogMeta().featuredImage() ? `url(${this.article.blogMeta().featuredImage()})` : null;\r\n    let articlePost = null;\r\n\r\n    if(!this.loading && this.article) {\r\n      articlePost = this.article.firstPost() ? this.article.firstPost() : app.store.getById('posts', this.article.firstPostId());\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlogItem\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"FlarumBlog-Article\"}>\r\n            <div className={\"FlarumBlog-Article-Container\"}>\r\n              <div className={\"FlarumBlog-Article-Content\"}>\r\n                <div \r\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image ${this.loading ? 'FlarumBlog-Article-GhostImage' : ''}`} \r\n                  style={{ \r\n                    backgroundImage: blogImage,\r\n                    opacity: this.article && this.article.isHidden() ? 0.4 : null\r\n                  }}\r\n                  />\r\n\r\n                {this.article && app.session.user && (app.session.user.canEdit() || this.article.canRename() || (this.article.posts() && this.article.posts()[0].canEdit())) && (\r\n                  <BlogPostController article={this.article} />\r\n                )}\r\n\r\n                {/* Article Categories */}\r\n                <div className={\"FlarumBlog-Article-Categories\"}>\r\n                  {!this.loading && this.article && this.article.tags() && this.article.tags().map(tag => (\r\n                    <a href={app.route(\"blogCategory\", { slug: tag.slug() })} config={m.route}>{tag.name()}</a>\r\n                  ))}\r\n\r\n                  {this.loading && (\r\n                    [0, 1].map(() => (<span className={\"FlarumBlog-Article-GhostCategory\"}>Category</span>))\r\n                  )}\r\n                </div>\r\n                \r\n                <div className={\"FlarumBlog-Article-Post\"}>\r\n                  {/* Article name */}\r\n                  <h3 className={this.loading ? 'FlarumBlog-Article-GhostTitle' : null}>\r\n                    {this.article ? this.article.title() : 'Ghost title'} \r\n                    {this.article && this.article.isHidden() && `(${app.translator.trans('v17development-flarum-blog.forum.hidden')})`}\r\n                  </h3>\r\n                  \r\n                  {this.loading && [0, 1, 2].map(() => (\r\n                    <div>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p>&nbsp;</p>\r\n                    </div>\r\n                  ))}\r\n\r\n                  <div className={\"Post-body\"}>\r\n                    {!this.loading && this.article.blogMeta() && this.article.blogMeta().isPendingReview() && (\r\n                      <blockquote class=\"uncited\" style={{ fontSize: '16px' }}><div><span className={\"far fa-clock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')}</div></blockquote>\r\n                    )}\r\n\r\n                    {!this.loading && articlePost && m.trust(articlePost.contentHtml())}\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className={\"FlarumBlog-Article-Comments\"}>\r\n                <h4>{app.translator.trans('v17development-flarum-blog.forum.comment_section.comments')} ({this.article ? (this.article.commentCount() - 1) : 0})</h4>\r\n                {/* Locked */}\r\n                {!this.loading && this.article.isLocked && this.article.isLocked() && (\r\n                  <div className={\"Post-body\"}>\r\n                    <blockquote class=\"uncited\"><div><span className={\"far fa-lock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.comment_section.locked')}</div></blockquote>\r\n                  </div>\r\n                )}\r\n\r\n                {!this.loading && this.stream && this.stream.render()}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={\"FlarumBlog-Article-Author\"}>\r\n              <div className={\"FlarumBlog-Article-Author-Info\"}>\r\n                <div className={`FlarumBlog-Article-Author-background ${this.loading ? 'FlarumBlog-Author-Ghost' : ''}`} style={{ backgroundColor: this.article && this.article.user() ? this.article && this.article.user().color() : null }} />\r\n\r\n                <div className={\"FlarumBlog-Article-Author-Avatar\"}>{this.article && this.article.user() ? avatar(this.article.user()) : <span className={\"Avatar FlarumBlog-Author-Ghost\"} />}</div>\r\n\r\n                {this.article && this.article.user() && (\r\n                  <div style={{ padding: '0 20px 20px' }}>\r\n                    <span className={\"FlarumBlog-Article-Author-Name\"}>{this.article.user().displayName()}</span>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio\"}>{this.article.user().bio()}</p>\r\n                  </div>\r\n                )}\r\n\r\n                {this.loading && (\r\n                  <div>\r\n                    <span className={\"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"}>&nbsp;</span>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <BlogCategories />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  positionChanged(startNumber, endNumber) {\r\n    const article = this.article;\r\n\r\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\r\n      article.save({ lastReadPostNumber: endNumber });\r\n      m.redraw();\r\n    }\r\n\r\n  }\r\n}","import Page from 'flarum/components/Page';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\nimport BlogCategories from '../components/BlogCategories';\r\n\r\nexport default class BlogOverview extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    this.bodyClass = 'BlogOverviewPage';\r\n\r\n    this.isLoading = true;\r\n    this.featuredPosts = [];\r\n    this.posts = [];\r\n    this.hasMore = null;\r\n\r\n    // Send history push\r\n    app.history.push('blog');\r\n\r\n    this.loadBlogOverview();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogOverview() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', {\r\n        filter: {\r\n          q: 'is:blog'\r\n        },\r\n        include: 'user,tags,firstPost,blogMeta'\r\n      })\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog posts\r\n  show(articles) {\r\n    if(articles.length === 0) return;\r\n\r\n    this.featuredPosts = articles.slice(0, 3);\r\n    this.posts = articles.length >= 4 ? articles.slice(3, articles.length) : [];\r\n\r\n    this.isLoading = false;\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className={\"FlarumBlogOverview\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"BlogFeatured\"}>\r\n            <h2>Recent blog posts</h2>\r\n\r\n            <div className={\"BlogFeatured-list\"}>\r\n              {/* Ghost data */}\r\n              {this.isLoading && [0, 1, 2].map(() => (\r\n                <div className={\"BlogFeatured-list-item BlogFeatured-list-item-ghost\"}>\r\n                  <div className={\"BlogFeatured-list-item-details\"}>\r\n                    <h4>&nbsp;</h4>\r\n\r\n                    <div className={\"data\"}>\r\n                      <span><i className={\"far fa-wave\"} /></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              {!this.isLoading && this.featuredPosts.length >= 0 && this.featuredPosts.map((article) => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const blogTag = article.tags() ? article.tags().filter(tag => tag.isChild()) : [];\r\n\r\n                return (\r\n                  <a \r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={\"BlogFeatured-list-item FlarumBlog-default-image\"} \r\n                    style={{ backgroundImage: blogImage }}\r\n                    config={m.route}\r\n                    >\r\n                    <div className={\"BlogFeatured-list-item-top\"}>\r\n                      {blogTag[0] && (\r\n                        <span>{blogTag[0].name()}</span>\r\n                      )}\r\n                      {article.isSticky() && (\r\n                        <span><i className={\"fas fa-thumbtack\"} /></span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className={\"BlogFeatured-list-item-details\"}>\r\n                      <h4>{article.title()}</h4>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={\"BlogScrubber\"}>\r\n            <div className={\"BlogList\"}>\r\n              {this.isLoading && [false, false, true, false].map((state) => {\r\n                return (\r\n                  <div className={`BlogList-item BlogList-item-${state === true ? 'sized' : 'default'} BlogList-item-ghost`}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>&nbsp;</h4>\r\n                      <p>&nbsp;</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-wave\"} /></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.posts.length >= 1 && this.posts.map(article => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const isSized = article.blogMeta() && article.blogMeta().isSized();\r\n                const summary = article.blogMeta() && article.blogMeta().summary() ? article.blogMeta().summary() : \"\";\r\n                \r\n                return (\r\n                  <a\r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={`BlogList-item BlogList-item-${isSized ? 'sized' : 'default'}`}\r\n                    config={m.route}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"} style={{ backgroundImage: blogImage }}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>{article.title()}</h4>\r\n                      <p>{summary}</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.posts.length === 0 && (\r\n                <p className={\"FlarumBlog-reached-end\"}>No more blog posts.</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className={\"Sidebar\"}>\r\n              <BlogCategories />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import IndexPage from 'flarum/components/IndexPage';\r\nimport DiscussionPage from 'flarum/components/DiscussionPage';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport { extend, override } from 'flarum/extend';\r\n\r\nexport default function() {\r\n  // Redirect tag to blog category\r\n  extend(IndexPage.prototype, 'config', function() {\r\n    const tag = this.currentTag();\r\n    const tagRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'tags_only';\r\n\r\n    // Only trigger when it's a tag page and the redirects are enabled\r\n    if(tag && tagRedirectEnabled) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      // Tag is inside list\r\n      if(blogTags.indexOf(tag.id()) >= 0 || (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)) {\r\n        m.route(app.route('blog'));\r\n      }\r\n    }\r\n  });\r\n\r\n  // Redirect discussion to blog article\r\n  override(DiscussionPage.prototype, 'view', function(original) {\r\n    const discussionRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'discussions_only';\r\n    if(discussionRedirectEnabled && this.discussion && this.discussion && this.discussion.tags().length > 0) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      const foundTags = this.discussion.tags().filter(tag => {\r\n        return blogTags.indexOf(tag.id()) >= 0 ||  (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\r\n      });\r\n\r\n      // Only redirect if the discussion has blog tags\r\n      if(foundTags.length > 0) {\r\n        // Redirect to discussion\r\n        const url = app.route('blogArticle', {\r\n          id: `${this.discussion.id()}-${this.discussion.slug()}`\r\n        });\r\n\r\n        document.location.href = url;\r\n\r\n        return (\r\n          <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n            <LoadingIndicator size={\"large\"} />\r\n            \r\n            <h2 style={{ marginTop: '40px' }}>{app.translator.trans('v17development-flarum-support.forum.utils.redirect.title')}</h2>\r\n            {app.translator.trans('v17development-flarum-support.forum.utils.redirect.link', {\r\n              a: <a href={url} />\r\n            })}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return original();\r\n  });\r\n}","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/EditPostComposer'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/PostStream'];","module.exports = flarum.core.compat['components/ReplyComposer'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['tags/components/TagDiscussionModal'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}