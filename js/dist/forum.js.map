{"version":3,"sources":["webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/./forum.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/index.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/BlogComposer.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/./src/forum/utils/tooltip.js","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Component']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Alert']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Dropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/PostStream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/ReplyComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Switch']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/avatar']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['models/Discussion']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/extractText']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/mixin']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/string']\""],"names":["BlogMeta","mixin","Model","discussion","hasOne","featuredImage","attribute","summary","isFeatured","isSized","isPendingReview","BlogCategories","init","blogCategories","app","forum","view","translator","trans","map","tagId","tag","store","getById","tags","push","route","slug","m","icon","name","all","forEach","_tag","isChild","parent","id","Component","BlogPostController","loadedPost","article","props","buttons","canRename","Button","component","className","onclick","modal","show","RenameArticleModal","children","articlePost","firstPost","firstPostId","disabled","canEdit","composer","load","EditPostComposer","post","BlogPostSettingsModal","canTag","TagDiscussionModal","blogMeta","save","then","alerts","Alert","type","response","loading","handleErrors","canLock","DiscussionControls","lockAction","bind","isLocked","canHide","isHidden","restoreAction","canDelete","confirm","extractText","history","getCurrent","previous","back","redraw","hideAction","Dropdown","label","buttonClassName","menuClassName","onshow","find","isNew","meta","createRecord","prop","title","content","fields","toArray","items","ItemList","add","maxWidth","minWidth","width","minHeight","withAttr","marginTop","Switch","state","onchange","val","fontWeight","submitData","relationships","onsubmit","e","preventDefault","pushData","hide","Modal","redirect","target","value","url","window","replaceState","document","initializers","routes","blog","path","BlogOverview","blogCategory","blogArticle","BlogItem","models","Discussion","prototype","redirector","setTitle","bodyClass","found","loadBlogItem","preloadBlogOverview","preloadedApiDocument","setTimeout","param","split","include","lazyRedraw","includedPosts","payload","included","articleId","filter","record","data","sort","a","b","slice","stream","PostStream","on","positionChanged","blogImage","backgroundImage","opacity","session","user","posts","fontSize","marginRight","trust","contentHtml","commentCount","render","backgroundColor","color","avatar","padding","displayName","bio","startNumber","endNumber","lastReadPostNumber","Page","isLoading","featuredPosts","hasMore","loadBlogOverview","q","articles","length","newArticle","clear","blogTag","isSticky","tooltip","humanTime","createdAt","BlogComposer","loaded","DiscussionComposer","extend","IndexPage","currentTag","tagRedirectEnabled","blogTags","indexOf","override","DiscussionPage","original","discussionRedirectEnabled","foundTags","location","href","textAlign","element","$"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class BlogMeta extends mixin(Model, {\r\n    discussion: Model.hasOne('discussion'),\r\n    featuredImage: Model.attribute('featuredImage'),\r\n    summary: Model.attribute('summary'),\r\n    isFeatured: Model.attribute('isFeatured'),\r\n    isSized: Model.attribute('isSized'),\r\n    isPendingReview: Model.attribute('isPendingReview'),\r\n}) {}","import Component from 'flarum/Component';\r\n\r\nexport default class BlogCategories extends Component {\r\n  init() {\r\n    this.blogCategories = app.forum.attribute('blogTags');\r\n  }\r\n  \r\n  view() {\r\n    return (\r\n      <div className={\"BlogCategories\"}>\r\n        <h3>{app.translator.trans('v17development-flarum-blog.forum.categories')}</h3>\r\n\r\n        {this.blogCategories && this.blogCategories.map(tagId => {\r\n          const tag = app.store.getById('tags', tagId);\r\n\r\n          if(!tag) return null; \r\n\r\n          const tags = [];\r\n\r\n          // Add tag\r\n          tags.push(\r\n            <a href={app.route(\"blogCategory\", { slug: tag.slug() })} className={\"BlogCategories-item\"} config={m.route}><span><i className={tag.icon()} /></span> {tag.name()}</a>\r\n          );\r\n\r\n          // Add tags\r\n          app.store.all('tags').forEach(_tag => {\r\n            if(_tag.isChild() && _tag.parent().id() === tag.id()) {\r\n              tags.push(\r\n                <a href={app.route(\"blogCategory\", { slug: _tag.slug() })} className={\"BlogCategories-item\"} config={m.route}><span><i className={_tag.icon()} /></span> {_tag.name()}</a>\r\n              );\r\n            }\r\n          });\r\n          \r\n          return tags;\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n}","import Component from 'flarum/Component';\r\nimport TagDiscussionModal from 'flarum/tags/components/TagDiscussionModal';\r\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\r\nimport Alert from 'flarum/components/Alert';\r\nimport Button from 'flarum/components/Button';\r\nimport Dropdown from 'flarum/components/Dropdown';\r\nimport BlogPostSettingsModal from './Modals/BlogPostSettingsModal';\r\nimport EditPostComposer from 'flarum/components/EditPostComposer';\r\nimport extractText from 'flarum/utils/extractText';\r\nimport RenameArticleModal from './Modals/RenameArticleModal';\r\n\r\nexport default class BlogPostController extends Component {\r\n  init() {\r\n    this.loadedPost = false;\r\n  }\r\n  \r\n  view() {\r\n    const article = this.props.article;\r\n    let buttons = [];\r\n\r\n    // Rename article\r\n    if(article.canRename()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new RenameArticleModal({ article })),\r\n          icon: 'fas fa-pencil-alt',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.rename_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    const articlePost = article.firstPost() ? article.firstPost() : app.store.getById('posts', article.firstPostId());\r\n\r\n    // Edit article\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        disabled: !articlePost.canEdit(),\r\n        onclick: () => {\r\n          app.composer.load(new EditPostComposer({post: articlePost}));\r\n          app.composer.show();\r\n        },\r\n        icon: 'fas fa-edit',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.edit_article')\r\n      })\r\n    );\r\n\r\n    // Article settings\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        onclick: () => app.modal.show(new BlogPostSettingsModal({ article })),\r\n        icon: 'fas fa-cogs',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.article_settings')\r\n      })\r\n    );\r\n\r\n    // Update categories\r\n    if(article.canTag()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new TagDiscussionModal({ discussion: article })),\r\n          icon: 'fas fa-tag',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.update_category')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Approve article\r\n    if(article.blogMeta() && article.blogMeta().isPendingReview()) {\r\n      buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          disabled: !app.forum.attribute('canApproveBlogPosts'),\r\n          onclick: () => {\r\n            article.blogMeta().save({\r\n              isPendingReview: false\r\n            }).then(() => {\r\n              app.alerts.show(new Alert({type: 'success', children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article_approved')}));\r\n            },\r\n            response => {\r\n              this.loading = false;\r\n              this.handleErrors(response);\r\n            });\r\n          },\r\n          icon: 'fas fa-thumbs-up',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n    // Lock article\r\n    if(article.canLock()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: DiscussionControls.lockAction.bind(article),\r\n          icon: `fas ${article.isLocked() ? 'fa-comments' : 'fa-comment-slash'}`,\r\n          children: article.isLocked() ? app.translator.trans('v17development-flarum-blog.forum.tools.enable_comments') : app.translator.trans('v17development-flarum-blog.forum.tools.disable_comments')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Hide/show/delete\r\n    if(article.canHide()) {\r\n      // Article is hidden\r\n      if(article.isHidden()) {\r\n        // Recover article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.restoreAction.bind(article),\r\n            icon: 'fas fa-eye',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.recover_article')\r\n          })\r\n        );\r\n\r\n        // Delete article\r\n        if(article.canDelete()) {\r\n          buttons.push(\r\n            Button.component({\r\n              className: 'Button',\r\n              onclick: () => {\r\n                // Confirm deletion\r\n                if (confirm(extractText(app.translator.trans('core.forum.discussion_controls.delete_confirmation')))) {\r\n                  // Redirect if the current page is an blog article\r\n                  if (app.history.getCurrent().name === 'blogArticle') {\r\n                    if(app.previous) {\r\n                      app.history.back();\r\n                    }else{\r\n                      m.route(app.route('blog'));\r\n                    }\r\n                  }\r\n            \r\n                  return article.delete().then(() => {\r\n                    m.redraw();\r\n                  });\r\n                }            \r\n              },\r\n              icon: 'far fa-trash-alt',\r\n              children: app.translator.trans('v17development-flarum-blog.forum.tools.delete_forever')\r\n            })\r\n          );\r\n        }\r\n      }else{\r\n        // Hide article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.hideAction.bind(article),\r\n            icon: 'fas fa-eye-slash',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.hide_article')\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\r\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\r\n          {Dropdown.component({\r\n            icon: 'fas fa-cog',\r\n            label: 'Manage',\r\n            buttonClassName: 'Button',\r\n            menuClassName: 'Dropdown-menu--right',\r\n            children: buttons,\r\n            onshow: () => {\r\n              // Get post data to make sure they can edit the post\r\n              if(articlePost && !articlePost.canEdit() && !this.loadedPost) {\r\n                this.loadedPost = true;\r\n                app.store\r\n                  .find('posts', article.firstPost() ? article.firstPost().id() : article.firstPostId())\r\n                  .then(() => {})\r\n                  .catch(() => {})\r\n                  .then(() => m.redraw())\r\n              }     \r\n            }\r\n          })}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport Switch from 'flarum/components/Switch';\r\n\r\nexport default class BlogPostSettingsModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.isNew = this.props.article.blogMeta() ? false : true;\r\n    this.meta = this.props.article.blogMeta() ? this.props.article.blogMeta() : app.store.createRecord('blogMeta');\r\n    \r\n    this.summary = m.prop(this.meta.summary() || '');\r\n\r\n    this.featuredImage = m.prop(this.meta.featuredImage() || '');\r\n\r\n    this.isFeatured = m.prop(this.meta.isFeatured() || false);\r\n    this.isSized = m.prop(this.meta.isSized() || false);\r\n    this.isPendingReview = m.prop(this.meta.isPendingReview() || false);\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return 'Blog post settings';\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('summary', (\r\n      <div className=\"Form-group\">\r\n        <label>Article summary:</label>\r\n        <textarea className=\"FormControl\" style={{ maxWidth: '100%', minWidth: '100%', width: '100%', minHeight: '120px' }} value={this.summary()} placeholder={\"Please enter a summary\"} oninput={m.withAttr('value', this.summary)}/>\r\n\r\n        <small>This summary will be visible on the blog overview page and will be used for SEO purposes.</small>\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('image', (\r\n      <div className=\"Form-group\">\r\n        <label>Article image URL:</label>\r\n        <input type=\"text\" className=\"FormControl\" value={this.featuredImage()} placeholder={\"https://\"} oninput={m.withAttr('value', this.featuredImage)}/>\r\n\r\n        <small>Best image resolution for social media: 1200x630</small>\r\n\r\n        {this.featuredImage() != \"\" && (\r\n          <img src={this.featuredImage()} alt={this.props.article.title()} title={\"Blog post image\"} width={\"100%\"} style={{ marginTop: '15px' }} />\r\n        )}\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('sized', (\r\n      <div className=\"Form-group\">\r\n        {Switch.component({\r\n          state: this.isSized() == true,\r\n          onchange: (val) => {\r\n            this.isSized(val);\r\n          },\r\n          children: [\r\n            <b>Highlighted post</b>, \r\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>Give this post a big image on the blog overview page.</div>,\r\n          ]\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    items.add('submit', <div className=\"Form-group\">\r\n      {Button.component({\r\n        type: 'submit',\r\n        className: 'Button Button--primary SupportModal-save',\r\n        loading: this.loading,\r\n        children: 'Update'\r\n      })}\r\n    </div>, -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      summary: this.summary(),\r\n      featuredImage: this.featuredImage(),\r\n      isFeatured: this.isFeatured(),\r\n      isSized: this.isSized(),\r\n      isPendingReview: this.isPendingReview(),\r\n      relationships: this.isNew && {\r\n        discussion: this.props.article\r\n      }\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.meta\r\n      .save(this.submitData())\r\n      .then(() => {\r\n        if(this.isNew) {\r\n          this.props.article.pushData({\r\n            relationships: {\r\n              blogMeta: this.meta\r\n            }\r\n          });\r\n        }\r\n\r\n        this.hide();\r\n        m.redraw();\r\n      },\r\n      response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      });\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport { slug } from 'flarum/utils/string';\r\n\r\nexport default class RenameArticleModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.article = this.props.article;\r\n\r\n    this.name = m.prop(this.article.title() || '');\r\n    this.slug = m.prop(this.article.slug() || '');\r\n\r\n    this.redirect = this.props.redirect;\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('v17development-flarum-blog.forum.tools.rename_article');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('name', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.title')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.title')} value={this.name()} oninput={e => {\r\n          this.name(e.target.value);\r\n          this.slug(slug(e.target.value));\r\n        }}/>\r\n      </div>\r\n    ), 50);\r\n\r\n    items.add('slug', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.slug')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.slug')} value={this.slug()} oninput={m.withAttr('value', this.slug)}/>\r\n      </div>\r\n    ), 40);\r\n\r\n    items.add('submit', (\r\n      <div className=\"Form-group\">\r\n        {Button.component({\r\n          type: 'submit',\r\n          className: 'Button Button--primary SupportModal-save',\r\n          loading: this.loading,\r\n          children: 'Update'\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.article.save({\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    })\r\n      .then(() => {\r\n        this.hide();\r\n\r\n        // Redirect\r\n        if(this.redirect) {\r\n          const url =  `/knowledgebase/${this.article.id()}-${this.slug()}`;\r\n\r\n          m.route(url, true);\r\n          window.history.replaceState(null, document.title, url);\r\n        }\r\n      }, response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      }\r\n    );\r\n  }\r\n}","import BlogItem from \"./pages/BlogItem\";\r\nimport Model from 'flarum/Model';\r\nimport Discussion from 'flarum/models/Discussion';\r\n\r\nimport BlogOverview from \"./pages/BlogOverview\";\r\nimport redirector from \"./utils/redirector\";\r\nimport BlogMeta from \"../common/Models/BlogMeta\";\r\n\r\n// Register Flarum Blog\r\napp.initializers.add('v17development-flarum-blog', app => {\r\n  app.routes.blog = { path: '/blog', component: BlogOverview.component() };\r\n  \r\n  app.routes.blogCategory = { path: '/blog/category/:slug', component: BlogOverview.component() };\r\n\r\n  app.routes.blogArticle = { path: '/blog/:id', component: BlogItem.component() };\r\n\r\n  app.store.models.blogMeta = BlogMeta;\r\n\r\n  Discussion.prototype.blogMeta = Model.hasOne('blogMeta');\r\n\r\n  redirector();\r\n});","import Page from 'flarum/components/Page';\r\nimport avatar from 'flarum/helpers/avatar';\r\nimport Button from 'flarum/components/Button';\r\nimport ReplyComposer from 'flarum/components/ReplyComposer';\r\nimport PostStream from 'flarum/components/PostStream';\r\nimport BlogCategories from '../components/BlogCategories';\r\nimport BlogPostController from '../components/BlogPostController';\r\n\r\nexport default class BlogItem extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    // Send history push\r\n    app.history.push('blogArticle');\r\n\r\n    this.bodyClass = 'BlogItemPage';\r\n\r\n    this.loading = true;\r\n    this.found = false;\r\n    this.article = null;\r\n    // this.posts = [];\r\n\r\n    this.loadBlogItem();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogItem() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', m.route.param('id').split('-')[0], {\r\n        include: 'user,tags,firstPost,blogMeta,posts,posts.discussion,posts.user'\r\n      })\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog post\r\n  show(article) {\r\n    // Set article data\r\n    this.article = article;\r\n\r\n    // Update title\r\n    app.setTitle(`${article.title()} - ${app.translator.trans('v17development-flarum-blog.forum.blog')}`);\r\n\r\n    this.loading = false;\r\n\r\n    let includedPosts = [];\r\n    if (article.payload && article.payload.included) {\r\n      const articleId = article.id();\r\n\r\n      includedPosts = article.payload.included\r\n        .filter(\r\n          (record) =>\r\n            record.type === 'posts' &&\r\n            record.relationships &&\r\n            record.relationships.discussion &&\r\n            record.relationships.discussion.data.id === articleId\r\n        )\r\n        .map((record) => app.store.getById('posts', record.id))\r\n        .sort((a, b) => a.id() - b.id())\r\n        .slice(0, 20);\r\n    }\r\n\r\n    this.stream = new PostStream({ discussion: article, includedPosts });\r\n    this.stream.on('positionChanged', this.positionChanged.bind(this));\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  view() {\r\n    const blogImage = this.article && this.article.blogMeta() && this.article.blogMeta().featuredImage() ? `url(${this.article.blogMeta().featuredImage()})` : null;\r\n    let articlePost = null;\r\n\r\n    if(!this.loading && this.article) {\r\n      articlePost = this.article.firstPost() ? this.article.firstPost() : app.store.getById('posts', this.article.firstPostId());\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlogItem\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"FlarumBlog-Article\"}>\r\n            <div className={\"FlarumBlog-Article-Container\"}>\r\n              <div className={\"FlarumBlog-Article-Content\"}>\r\n                <div \r\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image ${this.loading ? 'FlarumBlog-Article-GhostImage' : ''}`} \r\n                  style={{ \r\n                    backgroundImage: blogImage,\r\n                    opacity: this.article && this.article.isHidden() ? 0.4 : null\r\n                  }}\r\n                  />\r\n\r\n                {this.article && app.session.user && (app.session.user.canEdit() || this.article.canRename() || (this.article.posts() && this.article.posts()[0].canEdit())) && (\r\n                  <BlogPostController article={this.article} />\r\n                )}\r\n\r\n                {/* Article Categories */}\r\n                <div className={\"FlarumBlog-Article-Categories\"}>\r\n                  {!this.loading && this.article && this.article.tags() && this.article.tags().map(tag => (\r\n                    <a href={app.route(\"blogCategory\", { slug: tag.slug() })} config={m.route}>{tag.name()}</a>\r\n                  ))}\r\n\r\n                  {this.loading && (\r\n                    [0, 1].map(() => (<span className={\"FlarumBlog-Article-GhostCategory\"}>Category</span>))\r\n                  )}\r\n                </div>\r\n                \r\n                <div className={\"FlarumBlog-Article-Post\"}>\r\n                  {/* Article name */}\r\n                  <h3 className={this.loading ? 'FlarumBlog-Article-GhostTitle' : null}>\r\n                    {this.article ? this.article.title() : 'Ghost title'} \r\n                    {this.article && this.article.isHidden() && `(${app.translator.trans('v17development-flarum-blog.forum.hidden')})`}\r\n                  </h3>\r\n                  \r\n                  {this.loading && [0, 1, 2].map(() => (\r\n                    <div>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p>&nbsp;</p>\r\n                    </div>\r\n                  ))}\r\n\r\n                  <div className={\"Post-body\"}>\r\n                    {!this.loading && this.article.blogMeta() && this.article.blogMeta().isPendingReview() == true && (\r\n                      <blockquote class=\"uncited\" style={{ fontSize: '16px' }}><div><span className={\"far fa-clock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')}</div></blockquote>\r\n                    )}\r\n\r\n                    {!this.loading && articlePost && m.trust(articlePost.contentHtml())}\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className={\"FlarumBlog-Article-Comments\"}>\r\n                <h4>{app.translator.trans('v17development-flarum-blog.forum.comment_section.comments')} ({this.article ? (this.article.commentCount() - 1) : 0})</h4>\r\n                {/* Locked */}\r\n                {!this.loading && this.article.isLocked && this.article.isLocked() && (\r\n                  <div className={\"Post-body\"}>\r\n                    <blockquote class=\"uncited\"><div><span className={\"far fa-lock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.comment_section.locked')}</div></blockquote>\r\n                  </div>\r\n                )}\r\n\r\n                {!this.loading && this.stream && this.stream.render()}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={\"FlarumBlog-Article-Author\"}>\r\n              <div className={\"FlarumBlog-Article-Author-Info\"}>\r\n                <div className={`FlarumBlog-Article-Author-background ${this.loading ? 'FlarumBlog-Author-Ghost' : ''}`} style={{ backgroundColor: this.article && this.article.user() ? this.article && this.article.user().color() : null }} />\r\n\r\n                <div className={\"FlarumBlog-Article-Author-Avatar\"}>{this.article && this.article.user() ? avatar(this.article.user()) : <span className={\"Avatar FlarumBlog-Author-Ghost\"} />}</div>\r\n\r\n                {this.article && this.article.user() && (\r\n                  <div style={{ padding: '0 20px 20px' }}>\r\n                    <span className={\"FlarumBlog-Article-Author-Name\"}>{this.article.user().displayName()}</span>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio\"}>{this.article.user().bio()}</p>\r\n                  </div>\r\n                )}\r\n\r\n                {this.loading && (\r\n                  <div>\r\n                    <span className={\"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"}>&nbsp;</span>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <BlogCategories />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  positionChanged(startNumber, endNumber) {\r\n    const article = this.article;\r\n\r\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\r\n      article.save({ lastReadPostNumber: endNumber });\r\n      m.redraw();\r\n    }\r\n\r\n  }\r\n}","import Page from 'flarum/components/Page';\r\nimport Button from 'flarum/components/Button';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\nimport BlogCategories from '../components/BlogCategories';\r\nimport BlogComposer from '../utils/BlogComposer';\r\nimport tooltip from '../utils/tooltip';\r\n\r\nexport default class BlogOverview extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    this.bodyClass = 'BlogOverviewPage';\r\n\r\n    this.isLoading = true;\r\n    this.featuredPosts = [];\r\n    this.posts = [];\r\n    this.hasMore = null;\r\n\r\n    // Send history push\r\n    app.history.push('blog');\r\n\r\n    this.loadBlogOverview();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogOverview() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', {\r\n        filter: {\r\n          q: `is:blog${m.route.param('slug') ? ` tag:${m.route.param('slug')}` : ''}`\r\n        },\r\n        include: 'user,tags,firstPost,blogMeta'\r\n      })\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog posts\r\n  show(articles) {\r\n    if(articles.length === 0) return;\r\n\r\n    this.featuredPosts = articles.slice(0, 3);\r\n    this.posts = articles.length >= 4 ? articles.slice(3, articles.length) : [];\r\n\r\n    this.isLoading = false;\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  title() {\r\n    if(!m.route.param('slug')) {\r\n      return <h2>{app.translator.trans('v17development-flarum-blog.forum.recent_posts')}</h2>;\r\n    }\r\n\r\n    const tag = app.store.all('tags').filter(tag => tag.slug() === m.route.param('slug'));\r\n\r\n    return (\r\n      <h2>\r\n        {tag && tag[0] && tag[0].name()}\r\n        <small> - <a href={app.route(\"blog\")} config={m.route}>{app.translator.trans('v17development-flarum-blog.forum.return_to_overview')}</a></small>\r\n      </h2>\r\n    );\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className={\"FlarumBlogOverview\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"BlogFeatured\"}>\r\n            {app.forum.attribute('canWriteBlogPosts') && (\r\n              <Button \r\n                className={\"Button FlarumBlogWrite\"}\r\n                onclick={() => this.newArticle()}\r\n                icon={\"fas fa-pencil\"}\r\n                >\r\n                {app.translator.trans('v17development-flarum-blog.forum.compose.write_article')}\r\n              </Button>\r\n            )}\r\n\r\n            {this.title()}\r\n\r\n            <div style={{ clear: 'both' }} />\r\n\r\n            <div className={\"BlogFeatured-list\"}>\r\n              {/* Ghost data */}\r\n              {this.isLoading && [0, 1, 2].map(() => (\r\n                <div className={\"BlogFeatured-list-item BlogFeatured-list-item-ghost\"}>\r\n                  <div className={\"BlogFeatured-list-item-details\"}>\r\n                    <h4>&nbsp;</h4>\r\n\r\n                    <div className={\"data\"}>\r\n                      <span><i className={\"far fa-wave\"} /></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              {!this.isLoading && this.featuredPosts.length >= 0 && this.featuredPosts.map((article) => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const blogTag = article.tags() ? article.tags().filter(tag => tag.isChild()) : [];\r\n\r\n                return (\r\n                  <a \r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={\"BlogFeatured-list-item FlarumBlog-default-image\"} \r\n                    style={{ backgroundImage: blogImage }}\r\n                    config={m.route}\r\n                    >\r\n                    <div className={\"BlogFeatured-list-item-top\"}>\r\n                      {blogTag[0] && (\r\n                        <span>{blogTag[0].name()}</span>\r\n                      )}\r\n                      {article.isSticky() && (\r\n                        <span><i className={\"fas fa-thumbtack\"} /></span>\r\n                      )}\r\n                      {((article.blogMeta() && article.blogMeta().isPendingReview() == true) || article.isHidden()) && (\r\n                        <span><i className={\"fas fa-eye-slash\"} /></span>\r\n                      )}\r\n                      {article.blogMeta() && article.blogMeta().isPendingReview() == true && (\r\n                        <span title={app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')} config={tooltip.bind(this)} data-placement={\"bottom\"}><i className={\"far fa-clock\"} /> {app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review_title')}</span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className={\"BlogFeatured-list-item-details\"}>\r\n                      <h4>{article.title()}</h4>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={\"BlogScrubber\"}>\r\n            <div className={\"BlogList\"}>\r\n              {this.isLoading && [false, false, true, false].map((state) => {\r\n                return (\r\n                  <div className={`BlogList-item BlogList-item-${state === true ? 'sized' : 'default'} BlogList-item-ghost`}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>&nbsp;</h4>\r\n                      <p>&nbsp;</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-wave\"} /></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.posts.length >= 1 && this.posts.map(article => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const isSized = article.blogMeta() && article.blogMeta().isSized();\r\n                const summary = article.blogMeta() && article.blogMeta().summary() ? article.blogMeta().summary() : \"\";\r\n                \r\n                return (\r\n                  <a\r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={`BlogList-item BlogList-item-${isSized ? 'sized' : 'default'}`}\r\n                    config={m.route}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"} style={{ backgroundImage: blogImage }}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>\r\n                        {article.title()}\r\n                        {((article.blogMeta() && article.blogMeta().isPendingReview() == true) || article.isHidden()) && (\r\n                          <i className={\"fas fa-eye-slash\"} />\r\n                        )}\r\n                        {article.blogMeta() && article.blogMeta().isPendingReview() == true && (\r\n                          <i className={\"far fa-clock\"} title={app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')} config={tooltip.bind(this)} />\r\n                        )}\r\n                      </h4>\r\n                      <p>{summary}</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.posts.length === 0 && (\r\n                <p className={\"FlarumBlog-reached-end\"}>{app.translator.trans('v17development-flarum-blog.forum.no_more_posts')}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className={\"Sidebar\"}>\r\n              <BlogCategories />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  newArticle() {\r\n    const component = new BlogComposer({\r\n        user: app.session.user\r\n    });\r\n\r\n    let tags = [];\r\n\r\n    app.forum.attribute('blogTags').forEach(tagId => {\r\n      const tag = app.store.getById('tags', tagId);\r\n      \r\n      if(tags.length === 0 && !tag.isChild()) {\r\n        tags.push(tag);\r\n      }\r\n    });\r\n\r\n    // Update tags\r\n    component.tags = tags;\r\n\r\n    app.composer.load(component);\r\n    app.composer.show();\r\n  }\r\n}","import DiscussionComposer from 'flarum/components/DiscussionComposer';\r\n\r\nexport default class BlogComposer extends DiscussionComposer {\r\n  onsubmit() {\r\n    this.loading = true;\r\n\r\n    const data = this.data();\r\n\r\n    app.store.createRecord('discussions').save(data).then(\r\n        article => {\r\n            app.composer.hide();\r\n            m.route(app.route('blogArticle', { id: article.id() + '-' + article.slug() }));\r\n        },\r\n        this.loaded.bind(this)\r\n    );\r\n  }\r\n}\r\n","import IndexPage from 'flarum/components/IndexPage';\r\nimport DiscussionPage from 'flarum/components/DiscussionPage';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport { extend, override } from 'flarum/extend';\r\n\r\nexport default function() {\r\n  // Redirect tag to blog category\r\n  extend(IndexPage.prototype, 'config', function() {\r\n    const tag = this.currentTag();\r\n    const tagRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'tags_only';\r\n\r\n    // Only trigger when it's a tag page and the redirects are enabled\r\n    if(tag && tagRedirectEnabled) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      // Tag is inside list\r\n      if(blogTags.indexOf(tag.id()) >= 0 || (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)) {\r\n        m.route(app.route('blog'));\r\n      }\r\n    }\r\n  });\r\n\r\n  // Redirect discussion to blog article\r\n  override(DiscussionPage.prototype, 'view', function(original) {\r\n    const discussionRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'discussions_only';\r\n    if(discussionRedirectEnabled && this.discussion && this.discussion && this.discussion.tags().length > 0) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      const foundTags = this.discussion.tags().filter(tag => {\r\n        return blogTags.indexOf(tag.id()) >= 0 ||  (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\r\n      });\r\n\r\n      // Only redirect if the discussion has blog tags\r\n      if(foundTags.length > 0) {\r\n        // Redirect to discussion\r\n        const url = app.route('blogArticle', {\r\n          id: `${this.discussion.id()}-${this.discussion.slug()}`\r\n        });\r\n\r\n        document.location.href = url;\r\n\r\n        return (\r\n          <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n            <LoadingIndicator size={\"large\"} />\r\n            \r\n            <h2 style={{ marginTop: '40px' }}>{app.translator.trans('v17development-flarum-blog.forum.utils.redirect.title')}</h2>\r\n            {app.translator.trans('v17development-flarum-blog.forum.utils.redirect.link', {\r\n              a: <a href={url} />\r\n            })}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return original();\r\n  });\r\n}","export default function tooltip(element) {\r\n  $(element).tooltip();\r\n}","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/EditPostComposer'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/PostStream'];","module.exports = flarum.core.compat['components/ReplyComposer'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['tags/components/TagDiscussionModal'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}