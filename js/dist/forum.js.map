{"version":3,"sources":["webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/./forum.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogAuthor.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogItemSidebar.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/index.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/BlogComposer.js","webpack://@v17development/flarum-blog/./src/forum/utils/extendTagOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/./src/forum/utils/tooltip.js","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Component']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Alert']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/CommentPost']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Dropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/PostStream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/ReplyComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Switch']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/avatar']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/listItems']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['models/Discussion']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/extractText']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/mixin']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/string']\""],"names":["BlogMeta","mixin","Model","discussion","hasOne","featuredImage","attribute","summary","isFeatured","isSized","isPendingReview","BlogCategories","init","blogCategories","app","forum","view","translator","trans","map","tagId","tag","store","getById","tags","push","categoryItem","all","forEach","_tag","isChild","parent","id","route","slug","m","icon","backgroundColor","color","name","Component","BlogAuthor","props","loading","article","user","avatar","displayName","bio","listItems","items","toArray","ItemList","BlogItemSidebar","itemlist","add","component","BlogPostController","loadedPost","buttons","canRename","Button","className","onclick","modal","show","RenameArticleModal","children","articlePost","firstPost","firstPostId","disabled","canEdit","composer","load","EditPostComposer","post","BlogPostSettingsModal","canTag","TagDiscussionModal","blogMeta","save","then","alerts","Alert","type","response","handleErrors","canLock","DiscussionControls","lockAction","bind","isLocked","canHide","isHidden","restoreAction","canDelete","confirm","extractText","history","getCurrent","previous","back","redraw","hideAction","Dropdown","label","buttonClassName","menuClassName","onshow","find","isNew","meta","createRecord","prop","title","content","fields","maxWidth","minWidth","width","minHeight","withAttr","marginTop","Switch","state","onchange","val","fontWeight","submitData","relationships","onsubmit","e","preventDefault","pushData","hide","Modal","redirect","target","value","url","window","replaceState","document","initializers","routes","blog","path","BlogOverview","blogCategory","blogArticle","BlogItem","models","Discussion","prototype","redirector","extendTagOverview","setTitle","bodyClass","found","loadBlogItem","preloadBlogOverview","preloadedApiDocument","setTimeout","param","split","lazyRedraw","includedPosts","payload","included","articleId","filter","record","data","sort","a","b","slice","stream","PostStream","on","positionChanged","blogImage","routeName","backgroundImage","opacity","session","posts","fontSize","marginRight","commentCount","render","startNumber","endNumber","lastReadPostNumber","Page","isLoading","featuredPosts","hasMore","loadBlogOverview","q","articles","length","newArticle","clear","blogTag","isSticky","tooltip","humanTime","createdAt","BlogComposer","loaded","DiscussionComposer","extend","TagsPage","markup","knowledgeBaseTags","tag_tiles","tile","i","indexOf","IndexPage","currentTag","tagRedirectEnabled","blogTags","override","DiscussionPage","original","discussionRedirectEnabled","foundTags","location","href","textAlign","padding","element","$"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA,wC;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;ACJA;AACA;;IAEqBA,Q;;;;;;;;EAAiBC,yDAAK,CAACC,mDAAD,EAAQ;AAC/CC,YAAU,EAAED,mDAAK,CAACE,MAAN,CAAa,YAAb,CADmC;AAE/CC,eAAa,EAAEH,mDAAK,CAACI,SAAN,CAAgB,eAAhB,CAFgC;AAG/CC,SAAO,EAAEL,mDAAK,CAACI,SAAN,CAAgB,SAAhB,CAHsC;AAI/CE,YAAU,EAAEN,mDAAK,CAACI,SAAN,CAAgB,YAAhB,CAJmC;AAK/CG,SAAO,EAAEP,mDAAK,CAACI,SAAN,CAAgB,SAAhB,CALsC;AAM/CI,iBAAe,EAAER,mDAAK,CAACI,SAAN,CAAgB,iBAAhB;AAN8B,CAAR,C;;;;;;;;;;;;;;;;;;;;ACH3C;;IAEqBK,c;;;;;;;;;SACnBC,I,GAAA,gBAAO;AACL,SAAKC,cAAL,GAAsBC,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,CAAtB;AACD,G;;SAEDU,I,GAAA,gBAAO;AAAA;;AACL,WACE;AAAK,eAAS,EAAE;AAAhB,OACE,cAAKF,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,6CAArB,CAAL,CADF,EAGG,KAAKL,cAAL,IAAuB,KAAKA,cAAL,CAAoBM,GAApB,CAAwB,UAAAC,KAAK,EAAI;AACvD,UAAMC,GAAG,GAAGP,GAAG,CAACQ,KAAJ,CAAUC,OAAV,CAAkB,MAAlB,EAA0BH,KAA1B,CAAZ;AAEA,UAAG,CAACC,GAAJ,EAAS,OAAO,IAAP;AAET,UAAMG,IAAI,GAAG,EAAb,CALuD,CAOvD;;AACAA,UAAI,CAACC,IAAL,CACE,KAAI,CAACC,YAAL,CAAkBL,GAAlB,CADF,EARuD,CAYvD;;AACAP,SAAG,CAACQ,KAAJ,CAAUK,GAAV,CAAc,MAAd,EAAsBC,OAAtB,CAA8B,UAAAC,IAAI,EAAI;AACpC,YAAGA,IAAI,CAACC,OAAL,MAAkBD,IAAI,CAACE,MAAL,GAAcC,EAAd,OAAuBX,GAAG,CAACW,EAAJ,EAA5C,EAAsD;AACpDR,cAAI,CAACC,IAAL,CAAU,KAAI,CAACC,YAAL,CAAkBG,IAAlB,CAAV;AACD;AACF,OAJD;AAMA,aAAOL,IAAP;AACD,KApBuB,CAH1B,CADF;AA2BD,G,CAED;;;SACAE,Y,GAAA,sBAAaL,GAAb,EAAkB;AAChB,WACE;AACE,UAAI,EAAEP,GAAG,CAACmB,KAAJ,CAAU,cAAV,EAA0B;AAAEC,YAAI,EAAEb,GAAG,CAACa,IAAJ;AAAR,OAA1B,CADR;AAEE,eAAS,+CAA6Cb,GAAG,CAACW,EAAJ,EAA7C,UAAyDX,GAAG,CAACS,OAAJ,MAAiBhB,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,uBAApB,KAAgD,IAAjE,GAAwE,2BAAxE,GAAsG,EAA/J,CAFX;AAGE,YAAM,EAAE6B,CAAC,CAACF;AAHZ,OAKE;AAAM,eAAS,EAAEZ,GAAG,CAACe,IAAJ,OAAe,EAAf,GAAoB,6BAApB,GAAoD,EAArE;AAAyE,WAAK,EAAE;AAAEC,uBAAe,EAAEhB,GAAG,CAACe,IAAJ,OAAe,EAAf,GAAoBf,GAAG,CAACiB,KAAJ,EAApB,GAAkC;AAArD;AAAhF,OACE;AAAG,eAAS,EAAEjB,GAAG,CAACe,IAAJ;AAAd,MADF,CALF,EAQGf,GAAG,CAACkB,IAAJ,EARH,CADF;AAYD,G;;;EAjDyCC,uD;;;;;;;;;;;;;;;;;;;;;;;;;;ACF5C;AACA;AACA;AACA;;IAEqBC,U;;;;;;;;;SACnBzB,I,GAAA,gBAAO;AACL,WACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,6CAA0C,KAAK0B,KAAL,CAAWC,OAAX,GAAqB,yBAArB,GAAiD,EAA3F,CAAd;AAA+G,WAAK,EAAE;AAAEN,uBAAe,EAAE,KAAKK,KAAL,CAAWE,OAAX,IAAsB,KAAKF,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,EAAtB,GAAkD,KAAKH,KAAL,CAAWE,OAAX,IAAsB,KAAKF,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,GAA0BP,KAA1B,EAAxE,GAA4G;AAA/H;AAAtH,MADF,EAGE;AAAK,eAAS,EAAE;AAAhB,OAAqD,KAAKI,KAAL,CAAWE,OAAX,IAAsB,KAAKF,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,EAAtB,GAAkDC,4DAAM,CAAC,KAAKJ,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,EAAD,CAAxD,GAAsF;AAAM,eAAS,EAAE;AAAjB,MAA3I,CAHF,EAKG,KAAKH,KAAL,CAAWE,OAAX,IAAsB,KAAKF,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,EAAtB,IACC;AAAK,eAAS,EAAE;AAAhB,OACE;AAAM,eAAS,EAAE;AAAjB,OAAoD,KAAKH,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,GAA0BE,WAA1B,EAApD,CADF,EAEE;AAAG,eAAS,EAAE;AAAd,OAAgD,KAAKL,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,GAA0BG,GAA1B,IAAiC,KAAKN,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,GAA0BG,GAA1B,EAAjF,CAFF,EAIE;AAAI,eAAS,EAAE;AAAf,OACGC,+DAAS,CAAC,KAAKC,KAAL,GAAaC,OAAb,EAAD,CADZ,CAJF,CANJ,EAgBG,KAAKT,KAAL,CAAWC,OAAX,IACC,eACE;AAAM,eAAS,EAAE;AAAjB,cADF,EAEE;AAAG,eAAS,EAAE;AAAd,cAFF,EAGE;AAAG,eAAS,EAAE;AAAd,cAHF,EAIE;AAAG,eAAS,EAAE;AAAd,cAJF,CAjBJ,CADF;AA2BD,G;;SAEDO,K,GAAA,iBAAQ;AACN,WAAO,IAAIE,4DAAJ,EAAP;AACD,G;;;EAjCqCZ,uD;;;;;;;;;;;;;;;;;;;;;;;;;;ACLxC;AACA;AACA;AACA;AACA;;IAEqBa,e;;;;;;;;;SACnBrC,I,GAAA,gBAAO;AACL,WACE;AAAK,eAAS,EAAE;AAAhB,OACE,cACGiC,+DAAS,CAAC,KAAKC,KAAL,GAAaC,OAAb,EAAD,CADZ,CADF,CADF;AAOD,G;;SAEDD,K,GAAA,iBAAQ;AACN,QAAMI,QAAQ,GAAG,IAAIF,4DAAJ,EAAjB;AAEAE,YAAQ,CAACC,GAAT,CAAa,QAAb,EAAuBd,mDAAU,CAACe,SAAX,CAAqB,KAAKd,KAA1B,CAAvB,EAAyD,CAAzD;AAEAY,YAAQ,CAACC,GAAT,CAAa,YAAb,EAA2B5C,uDAAc,CAAC6C,SAAf,CAAyB,KAAKd,KAA9B,CAA3B,EAAiE,CAAjE;AAEA,WAAOY,QAAP;AACD,G;;;EAnB0Cd,uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqBiB,kB;;;;;;;;;SACnB7C,I,GAAA,gBAAO;AACL,SAAK8C,UAAL,GAAkB,KAAlB;AACD,G;;SAED1C,I,GAAA,gBAAO;AAAA;;AACL,QAAM4B,OAAO,GAAG,KAAKF,KAAL,CAAWE,OAA3B;AACA,QAAIe,OAAO,GAAG,EAAd,CAFK,CAIL;;AACA,QAAGf,OAAO,CAACgB,SAAR,EAAH,EAAwB;AACtBD,aAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,iBAAS,EAAE,QADI;AAEfC,eAAO,EAAE;AAAA,iBAAMjD,GAAG,CAACkD,KAAJ,CAAUC,IAAV,CAAe,IAAIC,mEAAJ,CAAuB;AAAEtB,mBAAO,EAAPA;AAAF,WAAvB,CAAf,CAAN;AAAA,SAFM;AAGfR,YAAI,EAAE,mBAHS;AAIf+B,gBAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,uDAArB;AAJK,OAAjB,CADF;AAQD;;AAED,QAAMkD,WAAW,GAAGxB,OAAO,CAACyB,SAAR,KAAsBzB,OAAO,CAACyB,SAAR,EAAtB,GAA4CvD,GAAG,CAACQ,KAAJ,CAAUC,OAAV,CAAkB,OAAlB,EAA2BqB,OAAO,CAAC0B,WAAR,EAA3B,CAAhE,CAhBK,CAkBL;;AACAX,WAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,eAAS,EAAE,QADI;AAEfS,cAAQ,EAAE,CAACH,WAAD,IAAgB,CAACA,WAAW,CAACI,OAAZ,EAFZ;AAGfT,aAAO,EAAE,mBAAM;AACbjD,WAAG,CAAC2D,QAAJ,CAAaC,IAAb,CAAkB,IAAIC,yEAAJ,CAAqB;AAACC,cAAI,EAAER;AAAP,SAArB,CAAlB;AACAtD,WAAG,CAAC2D,QAAJ,CAAaR,IAAb;AACD,OANc;AAOf7B,UAAI,EAAE,aAPS;AAQf+B,cAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,qDAArB;AARK,KAAjB,CADF,EAnBK,CAgCL;;AACAyC,WAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,eAAS,EAAE,QADI;AAEfC,aAAO,EAAE;AAAA,eAAMjD,GAAG,CAACkD,KAAJ,CAAUC,IAAV,CAAe,IAAIY,qEAAJ,CAA0B;AAAEjC,iBAAO,EAAPA;AAAF,SAA1B,CAAf,CAAN;AAAA,OAFM;AAGfR,UAAI,EAAE,aAHS;AAIf+B,cAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,yDAArB;AAJK,KAAjB,CADF,EAjCK,CA0CL;;AACA,QAAG0B,OAAO,CAACkC,MAAR,EAAH,EAAqB;AACnBnB,aAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,iBAAS,EAAE,QADI;AAEfC,eAAO,EAAE;AAAA,iBAAMjD,GAAG,CAACkD,KAAJ,CAAUC,IAAV,CAAe,IAAIc,gFAAJ,CAAuB;AAAE5E,sBAAU,EAAEyC;AAAd,WAAvB,CAAf,CAAN;AAAA,SAFM;AAGfR,YAAI,EAAE,YAHS;AAIf+B,gBAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,wDAArB;AAJK,OAAjB,CADF;AAQD,KApDI,CAsDL;;;AACA,QAAG0B,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmBtE,eAAnB,EAAzB,EAA+D;AAC7DiD,aAAO,CAAClC,IAAR,CAAa;AAAI,iBAAS,EAAC;AAAd,QAAb;AAEAkC,aAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,iBAAS,EAAE,QADI;AAEfS,gBAAQ,EAAE,CAACzD,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,qBAApB,CAFI;AAGfyD,eAAO,EAAE,mBAAM;AACbnB,iBAAO,CAACoC,QAAR,GAAmBC,IAAnB,CAAwB;AACtBvE,2BAAe,EAAE;AADK,WAAxB,EAEGwE,IAFH,CAEQ,YAAM;AACZpE,eAAG,CAACqE,MAAJ,CAAWlB,IAAX,CAAgB,IAAImB,8DAAJ,CAAU;AAACC,kBAAI,EAAE,SAAP;AAAkBlB,sBAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,0EAArB;AAA5B,aAAV,CAAhB;AACD,WAJD,EAKA,UAAAoE,QAAQ,EAAI;AACV,iBAAI,CAAC3C,OAAL,GAAe,KAAf;;AACA,iBAAI,CAAC4C,YAAL,CAAkBD,QAAlB;AACD,WARD;AASD,SAbc;AAcflD,YAAI,EAAE,kBAdS;AAef+B,gBAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,iEAArB;AAfK,OAAjB,CADF;AAmBD;;AAEDyC,WAAO,CAAClC,IAAR,CAAa;AAAI,eAAS,EAAC;AAAd,MAAb,EA/EK,CAiFL;;AACA,QAAGmB,OAAO,CAAC4C,OAAR,EAAH,EAAsB;AACpB7B,aAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,iBAAS,EAAE,QADI;AAEfC,eAAO,EAAE0B,sEAAkB,CAACC,UAAnB,CAA8BC,IAA9B,CAAmC/C,OAAnC,CAFM;AAGfR,YAAI,YAASQ,OAAO,CAACgD,QAAR,KAAqB,aAArB,GAAqC,kBAA9C,CAHW;AAIfzB,gBAAQ,EAAEvB,OAAO,CAACgD,QAAR,KAAqB9E,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,wDAArB,CAArB,GAAsGJ,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,yDAArB;AAJjG,OAAjB,CADF;AAQD,KA3FI,CA6FL;;;AACA,QAAG0B,OAAO,CAACiD,OAAR,EAAH,EAAsB;AACpB;AACA,UAAGjD,OAAO,CAACkD,QAAR,EAAH,EAAuB;AACrB;AACAnC,eAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,mBAAS,EAAE,QADI;AAEfC,iBAAO,EAAE0B,sEAAkB,CAACM,aAAnB,CAAiCJ,IAAjC,CAAsC/C,OAAtC,CAFM;AAGfR,cAAI,EAAE,YAHS;AAIf+B,kBAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,wDAArB;AAJK,SAAjB,CADF,EAFqB,CAWrB;;AACA,YAAG0B,OAAO,CAACoD,SAAR,EAAH,EAAwB;AACtBrC,iBAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,qBAAS,EAAE,QADI;AAEfC,mBAAO,EAAE,mBAAM;AACb;AACA,kBAAIkC,OAAO,CAACC,+DAAW,CAACpF,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,oDAArB,CAAD,CAAZ,CAAX,EAAsG;AACpG;AACA,oBAAIJ,GAAG,CAACqF,OAAJ,CAAYC,UAAZ,GAAyB7D,IAAzB,KAAkC,aAAtC,EAAqD;AACnD,sBAAGzB,GAAG,CAACuF,QAAP,EAAiB;AACfvF,uBAAG,CAACqF,OAAJ,CAAYG,IAAZ;AACD,mBAFD,MAEK;AACHnE,qBAAC,CAACF,KAAF,CAAQnB,GAAG,CAACmB,KAAJ,CAAU,MAAV,CAAR;AACD;AACF;;AAED,uBAAOW,OAAO,UAAP,GAAiBsC,IAAjB,CAAsB,YAAM;AACjC/C,mBAAC,CAACoE,MAAF;AACD,iBAFM,CAAP;AAGD;AACF,aAlBc;AAmBfnE,gBAAI,EAAE,kBAnBS;AAoBf+B,oBAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,uDAArB;AApBK,WAAjB,CADF;AAwBD;AACF,OAtCD,MAsCK;AACH;AACAyC,eAAO,CAAClC,IAAR,CACEoC,+DAAM,CAACL,SAAP,CAAiB;AACfM,mBAAS,EAAE,QADI;AAEfC,iBAAO,EAAE0B,sEAAkB,CAACe,UAAnB,CAA8Bb,IAA9B,CAAmC/C,OAAnC,CAFM;AAGfR,cAAI,EAAE,kBAHS;AAIf+B,kBAAQ,EAAErD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,qDAArB;AAJK,SAAjB,CADF;AAQD;AACF;;AAED,WACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACGuF,iEAAQ,CAACjD,SAAT,CAAmB;AAClBpB,UAAI,EAAE,YADY;AAElBsE,WAAK,EAAE,QAFW;AAGlBC,qBAAe,EAAE,QAHC;AAIlBC,mBAAa,EAAE,sBAJG;AAKlBzC,cAAQ,EAAER,OALQ;AAMlBkD,YAAM,EAAE,kBAAM;AACZ;AACA,YAAGzC,WAAW,IAAI,CAACA,WAAW,CAACI,OAAZ,EAAhB,IAAyC,CAAC,KAAI,CAACd,UAAlD,EAA8D;AAC5D,eAAI,CAACA,UAAL,GAAkB,IAAlB;AACA5C,aAAG,CAACQ,KAAJ,CACGwF,IADH,CACQ,OADR,EACiBlE,OAAO,CAACyB,SAAR,KAAsBzB,OAAO,CAACyB,SAAR,GAAoBrC,EAApB,EAAtB,GAAiDY,OAAO,CAAC0B,WAAR,EADlE,EAEGY,IAFH,CAEQ,YAAM,CAAE,CAFhB,WAGS,YAAM,CAAE,CAHjB,EAIGA,IAJH,CAIQ;AAAA,mBAAM/C,CAAC,CAACoE,MAAF,EAAN;AAAA,WAJR;AAKD;AACF;AAhBiB,KAAnB,CADH,CADF,CADF;AAwBD,G;;;EAhL6C/D,uD;;;;;;;;;;;;;;;;;;;;;;;;;;ACXhD;AACA;AACA;AACA;;IAEqBqC,qB;;;;;;;;;SACnBjE,I,GAAA,gBAAO;AACL,qBAAMA,IAAN;;AAEA,SAAKmG,KAAL,GAAa,KAAKrE,KAAL,CAAWE,OAAX,CAAmBoC,QAAnB,KAAgC,KAAhC,GAAwC,IAArD;AACA,SAAKgC,IAAL,GAAY,KAAKtE,KAAL,CAAWE,OAAX,CAAmBoC,QAAnB,KAAgC,KAAKtC,KAAL,CAAWE,OAAX,CAAmBoC,QAAnB,EAAhC,GAAgElE,GAAG,CAACQ,KAAJ,CAAU2F,YAAV,CAAuB,UAAvB,CAA5E;AAEA,SAAK1G,OAAL,GAAe4B,CAAC,CAAC+E,IAAF,CAAO,KAAKF,IAAL,CAAUzG,OAAV,MAAuB,EAA9B,CAAf;AAEA,SAAKF,aAAL,GAAqB8B,CAAC,CAAC+E,IAAF,CAAO,KAAKF,IAAL,CAAU3G,aAAV,MAA6B,EAApC,CAArB;AAEA,SAAKG,UAAL,GAAkB2B,CAAC,CAAC+E,IAAF,CAAO,KAAKF,IAAL,CAAUxG,UAAV,MAA0B,KAAjC,CAAlB;AACA,SAAKC,OAAL,GAAe0B,CAAC,CAAC+E,IAAF,CAAO,KAAKF,IAAL,CAAUvG,OAAV,MAAuB,KAA9B,CAAf;AACA,SAAKC,eAAL,GAAuByB,CAAC,CAAC+E,IAAF,CAAO,KAAKF,IAAL,CAAUtG,eAAV,MAA+B,KAAtC,CAAvB;AACD,G;;SAEDoD,S,GAAA,qBAAY;AACV,WAAO,4BAAP;AACD,G;;SAEDqD,K,GAAA,iBAAQ;AACN,WAAO,oBAAP;AACD,G;;SAEDC,O,GAAA,mBAAU;AACR,WACE;AAAK,eAAS,EAAC;AAAf,OACE;AAAK,eAAS,EAAC;AAAf,OACG,KAAKC,MAAL,GAAclE,OAAd,EADH,CADF,CADF;AAOD,G;;SAEDkE,M,GAAA,kBAAS;AAAA;;AACP,QAAMnE,KAAK,GAAG,IAAIE,4DAAJ,EAAd;AAEAF,SAAK,CAACK,GAAN,CAAU,SAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,oCADF,EAEE;AAAU,eAAS,EAAC,aAApB;AAAkC,WAAK,EAAE;AAAE+D,gBAAQ,EAAE,MAAZ;AAAoBC,gBAAQ,EAAE,MAA9B;AAAsCC,aAAK,EAAE,MAA7C;AAAqDC,iBAAS,EAAE;AAAhE,OAAzC;AAAoH,WAAK,EAAE,KAAKlH,OAAL,EAA3H;AAA2I,iBAAW,EAAE,wBAAxJ;AAAkL,aAAO,EAAE4B,CAAC,CAACuF,QAAF,CAAW,OAAX,EAAoB,KAAKnH,OAAzB;AAA3L,MAFF,EAIE,6GAJF,CADF,EAOG,EAPH;AASA2C,SAAK,CAACK,GAAN,CAAU,OAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,sCADF,EAEE;AAAO,UAAI,EAAC,MAAZ;AAAmB,eAAS,EAAC,aAA7B;AAA2C,WAAK,EAAE,KAAKlD,aAAL,EAAlD;AAAwE,iBAAW,EAAE,UAArF;AAAiG,aAAO,EAAE8B,CAAC,CAACuF,QAAF,CAAW,OAAX,EAAoB,KAAKrH,aAAzB;AAA1G,MAFF,EAIE,oEAJF,EAMG,KAAKA,aAAL,MAAwB,EAAxB,IACC;AAAK,SAAG,EAAE,KAAKA,aAAL,EAAV;AAAgC,SAAG,EAAE,KAAKqC,KAAL,CAAWE,OAAX,CAAmBuE,KAAnB,EAArC;AAAiE,WAAK,EAAE,iBAAxE;AAA2F,WAAK,EAAE,MAAlG;AAA0G,WAAK,EAAE;AAAEQ,iBAAS,EAAE;AAAb;AAAjH,MAPJ,CADF,EAWG,EAXH;AAaAzE,SAAK,CAACK,GAAN,CAAU,OAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACGqE,+DAAM,CAACpE,SAAP,CAAiB;AAChBqE,WAAK,EAAE,KAAKpH,OAAL,MAAkB,IADT;AAEhBqH,cAAQ,EAAE,kBAACC,GAAD,EAAS;AACjB,aAAI,CAACtH,OAAL,CAAasH,GAAb;AACD,OAJe;AAKhB5D,cAAQ,EAAE,CACR,gCADQ,EAER;AAAK,iBAAS,EAAC,UAAf;AAA0B,aAAK,EAAE;AAAE6D,oBAAU,EAAE;AAAd;AAAjC,iEAFQ;AALM,KAAjB,CADH,CADF,EAaG,CAAC,EAbJ;AAeA9E,SAAK,CAACK,GAAN,CAAU,QAAV,EAAoB;AAAK,eAAS,EAAC;AAAf,OACjBM,+DAAM,CAACL,SAAP,CAAiB;AAChB6B,UAAI,EAAE,QADU;AAEhBvB,eAAS,EAAE,0CAFK;AAGhBnB,aAAO,EAAE,KAAKA,OAHE;AAIhBwB,cAAQ,EAAE;AAJM,KAAjB,CADiB,CAApB,EAOQ,CAAC,EAPT;AASA,WAAOjB,KAAP;AACD,G;;SAED+E,U,GAAA,sBAAa;AACX,WAAO;AACL1H,aAAO,EAAE,KAAKA,OAAL,EADJ;AAELF,mBAAa,EAAE,KAAKA,aAAL,EAFV;AAGLG,gBAAU,EAAE,KAAKA,UAAL,EAHP;AAILC,aAAO,EAAE,KAAKA,OAAL,EAJJ;AAKLC,qBAAe,EAAE,KAAKA,eAAL,EALZ;AAMLwH,mBAAa,EAAE,KAAKnB,KAAL,IAAc;AAC3B5G,kBAAU,EAAE,KAAKuC,KAAL,CAAWE;AADI;AANxB,KAAP;AAUD,G;;SAEDuF,Q,GAAA,kBAASC,CAAT,EAAY;AAAA;;AACVA,KAAC,CAACC,cAAF;AAEA,SAAK1F,OAAL,GAAe,IAAf;AAEA,SAAKqE,IAAL,CACG/B,IADH,CACQ,KAAKgD,UAAL,EADR,EAEG/C,IAFH,CAEQ,YAAM;AACV,UAAG,MAAI,CAAC6B,KAAR,EAAe;AACb,cAAI,CAACrE,KAAL,CAAWE,OAAX,CAAmB0F,QAAnB,CAA4B;AAC1BJ,uBAAa,EAAE;AACblD,oBAAQ,EAAE,MAAI,CAACgC;AADF;AADW,SAA5B;AAKD;;AAED,YAAI,CAACuB,IAAL;;AACApG,OAAC,CAACoE,MAAF;AACD,KAbH,EAcE,UAAAjB,QAAQ,EAAI;AACV,YAAI,CAAC3C,OAAL,GAAe,KAAf;;AACA,YAAI,CAAC4C,YAAL,CAAkBD,QAAlB;AACD,KAjBH;AAkBD,G;;;EA1HgDkD,8D;;;;;;;;;;;;;;;;;;;;;;;;;;ACLnD;AACA;AACA;AACA;;IAEqBtE,kB;;;;;;;;;SACnBtD,I,GAAA,gBAAO;AACL,qBAAMA,IAAN;;AAEA,SAAKgC,OAAL,GAAe,KAAKF,KAAL,CAAWE,OAA1B;AAEA,SAAKL,IAAL,GAAYJ,CAAC,CAAC+E,IAAF,CAAO,KAAKtE,OAAL,CAAauE,KAAb,MAAwB,EAA/B,CAAZ;AACA,SAAKjF,IAAL,GAAYC,CAAC,CAAC+E,IAAF,CAAO,KAAKtE,OAAL,CAAaV,IAAb,MAAuB,EAA9B,CAAZ;AAEA,SAAKuG,QAAL,GAAgB,KAAK/F,KAAL,CAAW+F,QAA3B;AACD,G;;SAED3E,S,GAAA,qBAAY;AACV,WAAO,4BAAP;AACD,G;;SAEDqD,K,GAAA,iBAAQ;AACN,WAAOrG,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,uDAArB,CAAP;AACD,G;;SAEDkG,O,GAAA,mBAAU;AACR,WACE;AAAK,eAAS,EAAC;AAAf,OACE;AAAK,eAAS,EAAC;AAAf,OACG,KAAKC,MAAL,GAAclE,OAAd,EADH,CADF,CADF;AAOD,G;;SAEDkE,M,GAAA,kBAAS;AAAA;;AACP,QAAMnE,KAAK,GAAG,IAAIE,4DAAJ,EAAd;AAEAF,SAAK,CAACK,GAAN,CAAU,MAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,iBAAQzC,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CAAR,MADF,EAEE;AAAO,eAAS,EAAC,aAAjB;AAA+B,iBAAW,EAAEJ,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CAA5C;AAAoH,WAAK,EAAE,KAAKqB,IAAL,EAA3H;AAAwI,aAAO,EAAE,iBAAA6F,CAAC,EAAI;AACpJ,aAAI,CAAC7F,IAAL,CAAU6F,CAAC,CAACM,MAAF,CAASC,KAAnB;;AACA,aAAI,CAACzG,IAAL,CAAUA,gEAAI,CAACkG,CAAC,CAACM,MAAF,CAASC,KAAV,CAAd;AACD;AAHD,MAFF,CADF,EAQG,EARH;AAUAzF,SAAK,CAACK,GAAN,CAAU,MAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACE,iBAAQzC,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAAR,MADF,EAEE;AAAO,eAAS,EAAC,aAAjB;AAA+B,iBAAW,EAAEJ,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAA5C;AAAmH,WAAK,EAAE,KAAKgB,IAAL,EAA1H;AAAuI,aAAO,EAAEC,CAAC,CAACuF,QAAF,CAAW,OAAX,EAAoB,KAAKxF,IAAzB;AAAhJ,MAFF,CADF,EAKG,EALH;AAOAgB,SAAK,CAACK,GAAN,CAAU,QAAV,EACE;AAAK,eAAS,EAAC;AAAf,OACGM,+DAAM,CAACL,SAAP,CAAiB;AAChB6B,UAAI,EAAE,QADU;AAEhBvB,eAAS,EAAE,0CAFK;AAGhBnB,aAAO,EAAE,KAAKA,OAHE;AAIhBwB,cAAQ,EAAE;AAJM,KAAjB,CADH,CADF,EASG,CAAC,EATJ;AAWA,WAAOjB,KAAP;AACD,G;;SAED+E,U,GAAA,sBAAa;AACX,WAAO;AACLd,WAAK,EAAE,KAAK5E,IAAL,EADF;AAELL,UAAI,EAAE,KAAKA,IAAL;AAFD,KAAP;AAID,G;;SAEDiG,Q,GAAA,kBAASC,CAAT,EAAY;AAAA;;AACVA,KAAC,CAACC,cAAF;AAEA,SAAK1F,OAAL,GAAe,IAAf;AAEA,SAAKC,OAAL,CAAaqC,IAAb,CAAkB;AAChBkC,WAAK,EAAE,KAAK5E,IAAL,EADS;AAEhBL,UAAI,EAAE,KAAKA,IAAL;AAFU,KAAlB,EAIGgD,IAJH,CAIQ,YAAM;AACV,YAAI,CAACqD,IAAL,GADU,CAGV;;;AACA,UAAG,MAAI,CAACE,QAAR,EAAkB;AAChB,YAAMG,GAAG,uBAAsB,MAAI,CAAChG,OAAL,CAAaZ,EAAb,EAAtB,SAA2C,MAAI,CAACE,IAAL,EAApD;;AAEAC,SAAC,CAACF,KAAF,CAAQ2G,GAAR,EAAa,IAAb;AACAC,cAAM,CAAC1C,OAAP,CAAe2C,YAAf,CAA4B,IAA5B,EAAkCC,QAAQ,CAAC5B,KAA3C,EAAkDyB,GAAlD;AACD;AACF,KAdH,EAcK,UAAAtD,QAAQ,EAAI;AACb,YAAI,CAAC3C,OAAL,GAAe,KAAf;;AACA,YAAI,CAAC4C,YAAL,CAAkBD,QAAlB;AACD,KAjBH;AAmBD,G;;;EA/F6CkD,8D;;;;;;;;;;;;;;ACLhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;CAGA;;AACA1H,GAAG,CAACkI,YAAJ,CAAiBzF,GAAjB,CAAqB,4BAArB,EAAmD,UAAAzC,GAAG,EAAI;AACxDA,KAAG,CAACmI,MAAJ,CAAWC,IAAX,GAAkB;AAAEC,QAAI,EAAE,OAAR;AAAiB3F,aAAS,EAAE4F,2DAAY,CAAC5F,SAAb;AAA5B,GAAlB;AAEA1C,KAAG,CAACmI,MAAJ,CAAWI,YAAX,GAA0B;AAAEF,QAAI,EAAE,sBAAR;AAAgC3F,aAAS,EAAE4F,2DAAY,CAAC5F,SAAb;AAA3C,GAA1B;AAEA1C,KAAG,CAACmI,MAAJ,CAAWK,WAAX,GAAyB;AAAEH,QAAI,EAAE,WAAR;AAAqB3F,aAAS,EAAE+F,uDAAQ,CAAC/F,SAAT;AAAhC,GAAzB;AAEA1C,KAAG,CAACQ,KAAJ,CAAUkI,MAAV,CAAiBxE,QAAjB,GAA4BhF,+DAA5B;AAEAyJ,iEAAU,CAACC,SAAX,CAAqB1E,QAArB,GAAgC9E,mDAAK,CAACE,MAAN,CAAa,UAAb,CAAhC,CATwD,CAWxD;;AACAuJ,mEAAU,GAZ8C,CAcxD;AACA;;AACAC,0EAAiB;AAClB,CAjBD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqBL,Q;;;;;;;;;SACnB3I,I,GAAA,gBAAO;AACL,oBAAMA,IAAN;;AAEAE,OAAG,CAAC+I,QAAJ,CAAa/I,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAAb,EAHK,CAKL;;AACAJ,OAAG,CAACqF,OAAJ,CAAY1E,IAAZ,CAAiB,aAAjB;AAEA,SAAKqI,SAAL,GAAiB,cAAjB;AAEA,SAAKnH,OAAL,GAAe,IAAf;AACA,SAAKoH,KAAL,GAAa,KAAb;AACA,SAAKnH,OAAL,GAAe,IAAf,CAZK,CAaL;;AAEA,SAAKoH,YAAL;AACD,G,CAED;;;SACAA,Y,GAAA,wBAAe;AACb,QAAMC,mBAAmB,GAAGnJ,GAAG,CAACoJ,oBAAJ,EAA5B;;AAEA,QAAID,mBAAJ,EAAyB;AACvB;AACA;AACA;AACA;AACAE,gBAAU,CAAC,KAAKlG,IAAL,CAAU0B,IAAV,CAAe,IAAf,EAAqBsE,mBAArB,CAAD,EAA4C,CAA5C,CAAV;AACD,KAND,MAMO;AACLnJ,SAAG,CAACQ,KAAJ,CAAUwF,IAAV,CAAe,aAAf,EAA8B3E,CAAC,CAACF,KAAF,CAAQmI,KAAR,CAAc,IAAd,EAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAA9B,EACGnF,IADH,CACQ,KAAKjB,IAAL,CAAU0B,IAAV,CAAe,IAAf,CADR,WAES,YAAM;AACXxD,SAAC,CAACoE,MAAF;AACD,OAJH;AAKD;;AAEDpE,KAAC,CAACmI,UAAF;AACD,G,CAED;;;SACArG,I,GAAA,cAAKrB,OAAL,EAAc;AACZ;AACA,SAAKA,OAAL,GAAeA,OAAf,CAFY,CAIZ;;AACA9B,OAAG,CAAC+I,QAAJ,CAAgBjH,OAAO,CAACuE,KAAR,EAAhB,WAAqCrG,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAArC;AAEA,SAAKyB,OAAL,GAAe,KAAf;AAEA,QAAI4H,aAAa,GAAG,EAApB;;AACA,QAAI3H,OAAO,CAAC4H,OAAR,IAAmB5H,OAAO,CAAC4H,OAAR,CAAgBC,QAAvC,EAAiD;AAC/C,UAAMC,SAAS,GAAG9H,OAAO,CAACZ,EAAR,EAAlB;AAEAuI,mBAAa,GAAG3H,OAAO,CAAC4H,OAAR,CAAgBC,QAAhB,CACbE,MADa,CAEZ,UAACC,MAAD;AAAA,eACEA,MAAM,CAACvF,IAAP,KAAgB,OAAhB,IACAuF,MAAM,CAAC1C,aADP,IAEA0C,MAAM,CAAC1C,aAAP,CAAqB/H,UAFrB,IAGAyK,MAAM,CAAC1C,aAAP,CAAqB/H,UAArB,CAAgC0K,IAAhC,CAAqC7I,EAArC,KAA4C0I,SAJ9C;AAAA,OAFY,EAQbvJ,GARa,CAQT,UAACyJ,MAAD;AAAA,eAAY9J,GAAG,CAACQ,KAAJ,CAAUC,OAAV,CAAkB,OAAlB,EAA2BqJ,MAAM,CAAC5I,EAAlC,CAAZ;AAAA,OARS,EASb8I,IATa,CASR,UAACC,CAAD,EAAIC,CAAJ;AAAA,eAAUD,CAAC,CAAC/I,EAAF,KAASgJ,CAAC,CAAChJ,EAAF,EAAnB;AAAA,OATQ,EAUbiJ,KAVa,CAUP,CAVO,EAUJ,EAVI,CAAhB;AAWD;;AAED,SAAKC,MAAL,GAAc,IAAIC,mEAAJ,CAAe;AAAEhL,gBAAU,EAAEyC,OAAd;AAAuB2H,mBAAa,EAAbA;AAAvB,KAAf,CAAd;AACA,SAAKW,MAAL,CAAYE,EAAZ,CAAe,iBAAf,EAAkC,KAAKC,eAAL,CAAqB1F,IAArB,CAA0B,IAA1B,CAAlC;AAEAxD,KAAC,CAACmI,UAAF;AACD,G;;SAEDtJ,I,GAAA,gBAAO;AACL,QAAMsK,SAAS,GAAG,KAAK1I,OAAL,IAAgB,KAAKA,OAAL,CAAaoC,QAAb,EAAhB,IAA2C,KAAKpC,OAAL,CAAaoC,QAAb,GAAwB3E,aAAxB,EAA3C,YAA4F,KAAKuC,OAAL,CAAaoC,QAAb,GAAwB3E,aAAxB,EAA5F,SAAyI,IAA3J;AACA,QAAI+D,WAAW,GAAG,IAAlB;;AAEA,QAAG,CAAC,KAAKzB,OAAN,IAAiB,KAAKC,OAAzB,EAAkC;AAChCwB,iBAAW,GAAG,KAAKxB,OAAL,CAAayB,SAAb,KAA2B,KAAKzB,OAAL,CAAayB,SAAb,EAA3B,GAAsDvD,GAAG,CAACQ,KAAJ,CAAUC,OAAV,CAAkB,OAAlB,EAA2B,KAAKqB,OAAL,CAAa0B,WAAb,EAA3B,CAApE;AACD;;AAED,WACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE,EAAC,+DAAD;AACE,eAAS,EAAE,QADb;AAEE,aAAO,EAAE,mBAAM;AACb,YAAGxD,GAAG,CAACuF,QAAJ,IAAgBvF,GAAG,CAACuF,QAAJ,CAAa3D,KAAb,CAAmB6I,SAAnB,KAAiC,MAApD,EAA4D;AAC1DzK,aAAG,CAACqF,OAAJ,CAAYG,IAAZ;AACD,SAFD,MAEK;AACHnE,WAAC,CAACF,KAAF,CAAQnB,GAAG,CAACmB,KAAJ,CAAU,MAAV,CAAR;AACD;AACF,OARH;AASE,UAAI,EAAE;AATR,OAWGnB,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,qDAArB,CAXH,CADF,CADF,EAgBE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AACE,eAAS,0DAAuD,KAAKyB,OAAL,GAAe,+BAAf,GAAiD,EAAxG,CADX;AAEE,WAAK,EAAE;AACL6I,uBAAe,EAAEF,SADZ;AAELG,eAAO,EAAE,KAAK7I,OAAL,IAAgB,KAAKA,OAAL,CAAakD,QAAb,EAAhB,GAA0C,GAA1C,GAAgD;AAFpD;AAFT,MADF,EASG,KAAKlD,OAAL,IAAgB9B,GAAG,CAAC4K,OAAJ,CAAY7I,IAA5B,KAAqC/B,GAAG,CAAC4K,OAAJ,CAAY7I,IAAZ,CAAiB2B,OAAjB,MAA8B,KAAK5B,OAAL,CAAagB,SAAb,EAA9B,IAA2D,KAAKhB,OAAL,CAAa+I,KAAb,MAAwB,KAAK/I,OAAL,CAAa+I,KAAb,GAAqB,CAArB,EAAwBnH,OAAxB,EAAxH,KACC,EAAC,sEAAD;AAAoB,aAAO,EAAE,KAAK5B;AAAlC,MAVJ,EAcE;AAAK,eAAS,EAAE;AAAhB,OACG,CAAC,KAAKD,OAAN,IAAiB,KAAKC,OAAtB,IAAiC,KAAKA,OAAL,CAAapB,IAAb,EAAjC,IAAwD,KAAKoB,OAAL,CAAapB,IAAb,GAAoBL,GAApB,CAAwB,UAAAE,GAAG;AAAA,aAClF;AAAG,YAAI,EAAEP,GAAG,CAACmB,KAAJ,CAAU,cAAV,EAA0B;AAAEC,cAAI,EAAEb,GAAG,CAACa,IAAJ;AAAR,SAA1B,CAAT;AAA0D,cAAM,EAAEC,CAAC,CAACF;AAApE,SAA4EZ,GAAG,CAACkB,IAAJ,EAA5E,CADkF;AAAA,KAA3B,CAD3D,EAKG,KAAKI,OAAL,IACC,CAAC,CAAD,EAAI,CAAJ,EAAOxB,GAAP,CAAW;AAAA,aAAO;AAAM,iBAAS,EAAE;AAAjB,oBAAP;AAAA,KAAX,CANJ,CAdF,EAwBE;AAAK,eAAS,EAAE;AAAhB,OAEE;AAAI,eAAS,EAAE,KAAKwB,OAAL,GAAe,+BAAf,GAAiD;AAAhE,OACG,KAAKC,OAAL,GAAe,KAAKA,OAAL,CAAauE,KAAb,EAAf,GAAsC,aADzC,EAEG,KAAKvE,OAAL,IAAgB,KAAKA,OAAL,CAAakD,QAAb,EAAhB,UAA+ChF,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,yCAArB,CAA/C,MAFH,CAFF,EAOG,KAAKyB,OAAL,IAAgB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAUxB,GAAV,CAAc;AAAA,aAC7B,eACE;AAAG,iBAAS,EAAE;AAAd,gBADF,EAEE;AAAG,iBAAS,EAAE;AAAd,gBAFF,EAGE;AAAG,iBAAS,EAAE;AAAd,gBAHF,EAIE,oBAJF,CAD6B;AAAA,KAAd,CAPnB,EAgBG,CAAC,KAAKwB,OAAN,IAAiB,KAAKC,OAAL,CAAaoC,QAAb,EAAjB,IAA4C,KAAKpC,OAAL,CAAaoC,QAAb,GAAwBtE,eAAxB,MAA6C,IAAzF,IACC;AAAK,eAAS,EAAE;AAAhB,OACE;AAAY,eAAM,SAAlB;AAA4B,WAAK,EAAE;AAAEkL,gBAAQ,EAAE;AAAZ;AAAnC,OAAyD,eAAK;AAAM,eAAS,EAAE,cAAjB;AAAiC,WAAK,EAAE;AAAEC,mBAAW,EAAE;AAAf;AAAxC,MAAL,OAAyE/K,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,gEAArB,CAAzE,CAAzD,CADF,CAjBJ,EAsBG,CAAC,KAAKyB,OAAN,IAAiByB,WAAjB,IAAgC,EAAC,oEAAD;AAAa,UAAI,EAAEA;AAAnB,MAtBnC,CAxBF,CADF,EAmDE;AAAK,eAAS,EAAE;AAAhB,OACE,cAAKtD,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,2DAArB,CAAL,QAA0F,KAAK0B,OAAL,GAAgB,KAAKA,OAAL,CAAakJ,YAAb,KAA8B,CAA9C,GAAmD,CAA7I,MADF,EAGG,CAAC,KAAKnJ,OAAN,IAAiB,KAAKC,OAAL,CAAagD,QAA9B,IAA0C,KAAKhD,OAAL,CAAagD,QAAb,EAA1C,IACC;AAAK,eAAS,EAAE;AAAhB,OACE;AAAY,eAAM;AAAlB,OAA4B,eAAK;AAAM,eAAS,EAAE,aAAjB;AAAgC,WAAK,EAAE;AAAEiG,mBAAW,EAAE;AAAf;AAAvC,MAAL,OAAwE/K,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,yDAArB,CAAxE,CAA5B,CADF,CAJJ,EASG,CAAC,KAAKyB,OAAN,IAAiB,KAAKuI,MAAtB,IAAgC,KAAKA,MAAL,CAAYa,MAAZ,EATnC,CAnDF,CADF,EAiEE,EAAC,mFAAD;AAAiB,aAAO,EAAE,KAAKnJ,OAA/B;AAAwC,aAAO,EAAE,KAAKD;AAAtD,MAjEF,CAhBF,CADF,CADF;AAwFD,G;;SAED0I,e,GAAA,yBAAgBW,WAAhB,EAA6BC,SAA7B,EAAwC;AACtC,QAAMrJ,OAAO,GAAG,KAAKA,OAArB;;AAEA,QAAI9B,GAAG,CAAC4K,OAAJ,CAAY7I,IAAZ,IAAoBoJ,SAAS,IAAIrJ,OAAO,CAACsJ,kBAAR,MAAgC,CAApC,CAAjC,EAAyE;AACvEtJ,aAAO,CAACqC,IAAR,CAAa;AAAEiH,0BAAkB,EAAED;AAAtB,OAAb;AACA9J,OAAC,CAACoE,MAAF;AACD;AAEF,G;;;EAnLmC4F,6D;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRtC;AACA;AACA;AACA;AACA;AACA;;IAEqB/C,Y;;;;;;;;;SACnBxI,I,GAAA,gBAAO;AACL,oBAAMA,IAAN;;AAEAE,OAAG,CAAC+I,QAAJ,CAAa/I,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAAb;AAEA,SAAK4I,SAAL,GAAiB,kBAAjB;AAEA,SAAKsC,SAAL,GAAiB,IAAjB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKV,KAAL,GAAa,EAAb;AACA,SAAKW,OAAL,GAAe,IAAf,CAVK,CAYL;;AACAxL,OAAG,CAACqF,OAAJ,CAAY1E,IAAZ,CAAiB,MAAjB;AAEA,SAAK8K,gBAAL;AACD,G,CAED;;;SACAA,gB,GAAA,4BAAmB;AACjB,QAAMtC,mBAAmB,GAAGnJ,GAAG,CAACoJ,oBAAJ,EAA5B;;AAEA,QAAID,mBAAJ,EAAyB;AACvB;AACA;AACA;AACA;AACAE,gBAAU,CAAC,KAAKlG,IAAL,CAAU0B,IAAV,CAAe,IAAf,EAAqBsE,mBAArB,CAAD,EAA4C,CAA5C,CAAV;AACD,KAND,MAMO;AACLnJ,SAAG,CAACQ,KAAJ,CAAUwF,IAAV,CAAe,aAAf,EAA8B;AAC5B6D,cAAM,EAAE;AACN6B,WAAC,eAAYrK,CAAC,CAACF,KAAF,CAAQmI,KAAR,CAAc,MAAd,cAAgCjI,CAAC,CAACF,KAAF,CAAQmI,KAAR,CAAc,MAAd,CAAhC,GAA0D,EAAtE;AADK,SADoB;AAI5BU,YAAI,EAAE;AAJsB,OAA9B,EAMG5F,IANH,CAMQ,KAAKjB,IAAL,CAAU0B,IAAV,CAAe,IAAf,CANR,WAOS,YAAM;AACXxD,SAAC,CAACoE,MAAF;AACD,OATH;AAUD;;AAEDpE,KAAC,CAACmI,UAAF;AACD,G,CAED;;;SACArG,I,GAAA,cAAKwI,QAAL,EAAe;AACb,QAAGA,QAAQ,CAACC,MAAT,KAAoB,CAAvB,EAA0B;AACxB,WAAKN,SAAL,GAAiB,KAAjB;AACAjK,OAAC,CAACmI,UAAF;AAEA;AACD;;AAED,SAAK+B,aAAL,GAAqBI,QAAQ,CAACxB,KAAT,CAAe,CAAf,EAAkB,CAAlB,CAArB;AACA,SAAKU,KAAL,GAAac,QAAQ,CAACC,MAAT,IAAmB,CAAnB,GAAuBD,QAAQ,CAACxB,KAAT,CAAe,CAAf,EAAkBwB,QAAQ,CAACC,MAA3B,CAAvB,GAA4D,EAAzE;AAEA,SAAKN,SAAL,GAAiB,KAAjB;AAEAjK,KAAC,CAACmI,UAAF;AACD,G;;SAEDnD,K,GAAA,iBAAQ;AACN,QAAG,CAAChF,CAAC,CAACF,KAAF,CAAQmI,KAAR,CAAc,MAAd,CAAJ,EAA2B;AACzB,aAAO,cAAKtJ,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAAL,CAAP;AACD;;AAED,QAAMG,GAAG,GAAGP,GAAG,CAACQ,KAAJ,CAAUK,GAAV,CAAc,MAAd,EAAsBgJ,MAAtB,CAA6B,UAAAtJ,GAAG;AAAA,aAAIA,GAAG,CAACa,IAAJ,OAAeC,CAAC,CAACF,KAAF,CAAQmI,KAAR,CAAc,MAAd,CAAnB;AAAA,KAAhC,CAAZ;AAEA,WACE,cACG/I,GAAG,IAAIA,GAAG,CAAC,CAAD,CAAV,IAAiBA,GAAG,CAAC,CAAD,CAAH,CAAOkB,IAAP,EADpB,EAEE,wBAAU;AAAG,UAAI,EAAEzB,GAAG,CAACmB,KAAJ,CAAU,MAAV,CAAT;AAA4B,YAAM,EAAEE,CAAC,CAACF;AAAtC,OAA8CnB,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,qDAArB,CAA9C,CAAV,CAFF,CADF;AAMD,G;;SAEDF,I,GAAA,gBAAO;AAAA;;AACL,WACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACGF,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,mBAApB,KACC,EAAC,+DAAD;AACE,eAAS,EAAE,wBADb;AAEE,aAAO,EAAE;AAAA,eAAM,KAAI,CAACqM,UAAL,EAAN;AAAA,OAFX;AAGE,UAAI,EAAE;AAHR,OAKG7L,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,wDAArB,CALH,CAFJ,EAWG,KAAKiG,KAAL,EAXH,EAaE;AAAK,WAAK,EAAE;AAAEyF,aAAK,EAAE;AAAT;AAAZ,MAbF,EAeE;AAAK,eAAS,EAAE;AAAhB,OAEG,KAAKR,SAAL,IAAkB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAUjL,GAAV,CAAc;AAAA,aAC/B;AAAK,iBAAS,EAAE;AAAhB,SACE;AAAK,iBAAS,EAAE;AAAhB,SACE,qBADF,EAGE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,CADF,CAHF,CADF,CAD+B;AAAA,KAAd,CAFrB,EAcG,CAAC,KAAKiL,SAAN,IAAmB,KAAKC,aAAL,CAAmBK,MAAnB,IAA6B,CAAhD,IAAqD,KAAKL,aAAL,CAAmBlL,GAAnB,CAAuB,UAACyB,OAAD,EAAa;AACxF,UAAM0I,SAAS,GAAG1I,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmB3E,aAAnB,EAAtB,YAAkEuC,OAAO,CAACoC,QAAR,GAAmB3E,aAAnB,EAAlE,SAA0G,IAA5H;AACA,UAAMwM,OAAO,GAAGjK,OAAO,CAACpB,IAAR,KAAiBoB,OAAO,CAACpB,IAAR,GAAemJ,MAAf,CAAsB,UAAAtJ,GAAG;AAAA,eAAIA,GAAG,CAACS,OAAJ,EAAJ;AAAA,OAAzB,CAAjB,GAA+D,EAA/E;AAEA,aACE;AACE,YAAI,EAAEhB,GAAG,CAACmB,KAAJ,CAAU,aAAV,EAAyB;AAAED,YAAE,EAAKY,OAAO,CAACZ,EAAR,EAAL,SAAqBY,OAAO,CAACV,IAAR;AAAzB,SAAzB,CADR;AAEE,iBAAS,EAAE,iDAFb;AAGE,aAAK,EAAE;AAAEsJ,yBAAe,EAAEF;AAAnB,SAHT;AAIE,cAAM,EAAEnJ,CAAC,CAACF;AAJZ,SAME;AAAK,iBAAS,EAAE;AAAhB,SACG4K,OAAO,CAAC,CAAD,CAAP,IACC,gBAAOA,OAAO,CAAC,CAAD,CAAP,CAAWtK,IAAX,EAAP,CAFJ,EAIGK,OAAO,CAACkK,QAAR,MACC,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,CALJ,EAOG,CAAElK,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmBtE,eAAnB,MAAwC,IAA/D,IAAwEkC,OAAO,CAACkD,QAAR,EAAzE,KACC,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,CARJ,EAUGlD,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmBtE,eAAnB,MAAwC,IAA9D,IACC;AAAM,aAAK,EAAEI,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,gEAArB,CAAb;AAAqG,cAAM,EAAE6L,sDAAO,CAACpH,IAAR,CAAa,KAAb,CAA7G;AAAiI,0BAAgB;AAAjJ,SAA2J;AAAG,iBAAS,EAAE;AAAd,QAA3J,OAA6L7E,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,sEAArB,CAA7L,CAXJ,CANF,EAqBE;AAAK,iBAAS,EAAE;AAAhB,SACE,cAAK0B,OAAO,CAACuE,KAAR,EAAL,CADF,EAGE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAwC6F,+DAAS,CAACpK,OAAO,CAACqK,SAAR,EAAD,CAAjD,CADF,EAEE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAuCrK,OAAO,CAACC,IAAR,KAAiBD,OAAO,CAACC,IAAR,GAAeE,WAAf,EAAjB,GAAgD,WAAvF,CAFF,EAGE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAA0CH,OAAO,CAACkJ,YAAR,EAA1C,CAHF,CAHF,CArBF,CADF;AAiCD,KArCqD,CAdxD,CAfF,CADF,EAuEE;AAAK,eAAS,EAAE;AAAhB,OACE;AAAK,eAAS,EAAE;AAAhB,OACG,KAAKM,SAAL,IAAkB,CAAC,KAAD,EAAQ,KAAR,EAAe,IAAf,EAAqB,KAArB,EAA4BjL,GAA5B,CAAgC,UAAC0G,KAAD,EAAW;AAC5D,aACE;AAAK,iBAAS,oCAAiCA,KAAK,KAAK,IAAV,GAAiB,OAAjB,GAA2B,SAA5D;AAAd,SACE;AAAK,iBAAS,EAAE;AAAhB,QADF,EAEE;AAAK,iBAAS,EAAE;AAAhB,SACE,qBADF,EAEE,oBAFF,EAIE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,CADF,CAJF,CAFF,CADF;AAaD,KAdkB,CADrB,EAiBG,CAAC,KAAKuE,SAAN,IAAmB,KAAKT,KAAL,CAAWe,MAAX,IAAqB,CAAxC,IAA6C,KAAKf,KAAL,CAAWxK,GAAX,CAAe,UAAAyB,OAAO,EAAI;AACtE,UAAM0I,SAAS,GAAG1I,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmB3E,aAAnB,EAAtB,YAAkEuC,OAAO,CAACoC,QAAR,GAAmB3E,aAAnB,EAAlE,SAA0G,IAA5H;AACA,UAAMI,OAAO,GAAGmC,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmBvE,OAAnB,EAAtC;AACA,UAAMF,OAAO,GAAGqC,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmBzE,OAAnB,EAAtB,GAAqDqC,OAAO,CAACoC,QAAR,GAAmBzE,OAAnB,EAArD,GAAoF,EAApG;AAEA,aACE;AACE,YAAI,EAAEO,GAAG,CAACmB,KAAJ,CAAU,aAAV,EAAyB;AAAED,YAAE,EAAKY,OAAO,CAACZ,EAAR,EAAL,SAAqBY,OAAO,CAACV,IAAR;AAAzB,SAAzB,CADR;AAEE,iBAAS,oCAAiCzB,OAAO,GAAG,OAAH,GAAa,SAArD,CAFX;AAGE,cAAM,EAAE0B,CAAC,CAACF;AAHZ,SAIE;AAAK,iBAAS,EAAE,8CAAhB;AAAgE,aAAK,EAAE;AAAEuJ,yBAAe,EAAEF;AAAnB;AAAvE,QAJF,EAKE;AAAK,iBAAS,EAAE;AAAhB,SACE,cACG1I,OAAO,CAACuE,KAAR,EADH,EAEG,CAAEvE,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmBtE,eAAnB,MAAwC,IAA/D,IAAwEkC,OAAO,CAACkD,QAAR,EAAzE,KACC;AAAG,iBAAS,EAAE;AAAd,QAHJ,EAKGlD,OAAO,CAACoC,QAAR,MAAsBpC,OAAO,CAACoC,QAAR,GAAmBtE,eAAnB,MAAwC,IAA9D,IACC;AAAG,iBAAS,EAAE,cAAd;AAA8B,aAAK,EAAEI,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,gEAArB,CAArC;AAA6H,cAAM,EAAE6L,sDAAO,CAACpH,IAAR,CAAa,KAAb;AAArI,QANJ,CADF,EAUE,aAAIpF,OAAJ,CAVF,EAYE;AAAK,iBAAS,EAAE;AAAhB,SACE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAwCyM,+DAAS,CAACpK,OAAO,CAACqK,SAAR,EAAD,CAAjD,CADF,EAEE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAAuCrK,OAAO,CAACC,IAAR,KAAiBD,OAAO,CAACC,IAAR,GAAeE,WAAf,EAAjB,GAAgD,WAAvF,CAFF,EAGE,gBAAM;AAAG,iBAAS,EAAE;AAAd,QAAN,OAA0CH,OAAO,CAACkJ,YAAR,EAA1C,CAHF,CAZF,CALF,CADF;AA0BD,KA/B6C,CAjBhD,EAkDG,CAAC,KAAKM,SAAN,IAAmB,KAAKC,aAAL,CAAmBK,MAAnB,GAA4B,CAA/C,IAAoD,KAAKf,KAAL,CAAWe,MAAX,KAAsB,CAA1E,IACC;AAAG,eAAS,EAAE;AAAd,OAAyC5L,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CAAzC,CAnDJ,EAsDG,CAAC,KAAKkL,SAAN,IAAmB,KAAKC,aAAL,CAAmBK,MAAnB,KAA8B,CAAjD,IAAsD,KAAKf,KAAL,CAAWe,MAAX,KAAsB,CAA5E,IACC;AAAG,eAAS,EAAE;AAAd,OAAyC5L,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,iDAArB,CAAzC,CAvDJ,CADF,EA4DE;AAAK,eAAS,EAAE;AAAhB,OACE,EAAC,kEAAD,OADF,CA5DF,CAvEF,CADF,CADF;AA4ID,G;;SAEDyL,U,GAAA,sBAAa;AACX,QAAMnJ,SAAS,GAAG,IAAI0J,2DAAJ,CAAiB;AAC/BrK,UAAI,EAAE/B,GAAG,CAAC4K,OAAJ,CAAY7I;AADa,KAAjB,CAAlB;AAIA,QAAIrB,IAAI,GAAG,EAAX;AAEAV,OAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,EAAgCsB,OAAhC,CAAwC,UAAAR,KAAK,EAAI;AAC/C,UAAMC,GAAG,GAAGP,GAAG,CAACQ,KAAJ,CAAUC,OAAV,CAAkB,MAAlB,EAA0BH,KAA1B,CAAZ;;AAEA,UAAGC,GAAG,IAAIG,IAAI,CAACkL,MAAL,KAAgB,CAAvB,IAA4B,CAACrL,GAAG,CAACS,OAAJ,EAAhC,EAA+C;AAC7CN,YAAI,CAACC,IAAL,CAAUJ,GAAV;AACD;AACF,KAND,EAPW,CAeX;;AACAmC,aAAS,CAAChC,IAAV,GAAiBA,IAAjB;AAEAV,OAAG,CAAC2D,QAAJ,CAAaC,IAAb,CAAkBlB,SAAlB;AACA1C,OAAG,CAAC2D,QAAJ,CAAaR,IAAb;AACD,G;;;EAhPuCkI,6D;;;;;;;;;;;;;;;;;;;;ACP1C;;IAEqBe,Y;;;;;;;;;SACnB/E,Q,GAAA,oBAAW;AACT,SAAKxF,OAAL,GAAe,IAAf;AAEA,QAAMkI,IAAI,GAAG,KAAKA,IAAL,EAAb;AAEA/J,OAAG,CAACQ,KAAJ,CAAU2F,YAAV,CAAuB,aAAvB,EAAsChC,IAAtC,CAA2C4F,IAA3C,EAAiD3F,IAAjD,CACI,UAAAtC,OAAO,EAAI;AACP9B,SAAG,CAAC2D,QAAJ,CAAa8D,IAAb;AACApG,OAAC,CAACF,KAAF,CAAQnB,GAAG,CAACmB,KAAJ,CAAU,aAAV,EAAyB;AAAED,UAAE,EAAEY,OAAO,CAACZ,EAAR,KAAe,GAAf,GAAqBY,OAAO,CAACV,IAAR;AAA3B,OAAzB,CAAR;AACH,KAJL,EAKI,KAAKiL,MAAL,CAAYxH,IAAZ,CAAiB,IAAjB,CALJ;AAOD,G;;;EAbuCyH,2E;;;;;;;;;;;;;;ACF1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEe,SAASxD,iBAAT,GAA6B;AACxCyD,8DAAM,CAACC,sEAAQ,CAAC5D,SAAV,EAAqB,MAArB,EAA6B,UAAS6D,MAAT,EAAiB;AAAA;;AAChD,QAAGzM,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,cAApB,KAAuC,KAA1C,EAAiD,OAAOiN,MAAP,CADD,CAGhD;;AACA,QAAMC,iBAAiB,GAAG1M,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,KAAmC,EAA7D,CAJgD,CAMhD;;AACA,QAAImN,SAAS,GAAGF,MAAM,CAACpJ,QAAP,CAAgB,CAAhB,EAAmBA,QAAnB,CAA4B,CAA5B,EAA+BA,QAA/B,CAAwC,CAAxC,EAA2CA,QAA3D,CAPgD,CAShD;;AACAoJ,UAAM,CAACpJ,QAAP,CAAgB,CAAhB,EAAmBA,QAAnB,CAA4B,CAA5B,EAA+BA,QAA/B,CAAwC,CAAxC,EAA2CA,QAA3C,GAAsDsJ,SAAS,CAACtM,GAAV,CAAc,UAACuM,IAAD,EAAOC,CAAP,EAAa;AAC7E,aAAOH,iBAAiB,CAACI,OAAlB,CAA0B,KAAI,CAACpM,IAAL,CAAUmM,CAAV,EAAa3L,EAAb,EAA1B,KAAgD,CAAhD,GAAoD,IAApD,GAA2D0L,IAAlE;AACH,KAFqD,CAAtD;AAIA,WAAOH,MAAP;AACH,GAfK,CAAN;AAgBH,C;;;;;;;;;;;;ACpBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEe,2EAAW;AACxB;AACAF,8DAAM,CAACQ,kEAAS,CAACnE,SAAX,EAAsB,QAAtB,EAAgC,YAAW;AAC/C,QAAMrI,GAAG,GAAG,KAAKyM,UAAL,EAAZ;AACA,QAAMC,kBAAkB,GAAGjN,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,MAAhD,IAA0DQ,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,WAArI,CAF+C,CAI/C;;AACA,QAAGe,GAAG,IAAI0M,kBAAV,EAA8B;AAC5B,UAAMC,QAAQ,GAAGlN,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,CAAjB,CAD4B,CAG5B;;AACA,UAAG0N,QAAQ,CAACJ,OAAT,CAAiBvM,GAAG,CAACW,EAAJ,EAAjB,KAA8B,CAA9B,IAAoCX,GAAG,CAACU,MAAJ,MAAgBiM,QAAQ,CAACJ,OAAT,CAAiBvM,GAAG,CAACU,MAAJ,GAAaC,EAAb,EAAjB,KAAuC,CAA9F,EAAkG;AAChGG,SAAC,CAACF,KAAF,CAAQnB,GAAG,CAACmB,KAAJ,CAAU,MAAV,CAAR;AACD;AACF;AACF,GAbK,CAAN,CAFwB,CAiBxB;;AACAgM,gEAAQ,CAACC,uEAAc,CAACxE,SAAhB,EAA2B,MAA3B,EAAmC,UAASyE,QAAT,EAAmB;AAC5D,QAAMC,yBAAyB,GAAGtN,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,MAAhD,IAA0DQ,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,sBAApB,MAAgD,kBAA5I;;AACA,QAAG8N,yBAAyB,IAAI,KAAKjO,UAAlC,IAAgD,KAAKA,UAArD,IAAmE,KAAKA,UAAL,CAAgBqB,IAAhB,GAAuBkL,MAAvB,GAAgC,CAAtG,EAAyG;AACvG,UAAMsB,QAAQ,GAAGlN,GAAG,CAACC,KAAJ,CAAUT,SAAV,CAAoB,UAApB,CAAjB;AAEA,UAAM+N,SAAS,GAAG,KAAKlO,UAAL,CAAgBqB,IAAhB,GAAuBmJ,MAAvB,CAA8B,UAAAtJ,GAAG,EAAI;AACrD,eAAO2M,QAAQ,CAACJ,OAAT,CAAiBvM,GAAG,CAACW,EAAJ,EAAjB,KAA8B,CAA9B,IAAqCX,GAAG,CAACU,MAAJ,MAAgBiM,QAAQ,CAACJ,OAAT,CAAiBvM,GAAG,CAACU,MAAJ,GAAaC,EAAb,EAAjB,KAAuC,CAAnG;AACD,OAFiB,CAAlB,CAHuG,CAOvG;;AACA,UAAGqM,SAAS,CAAC3B,MAAV,GAAmB,CAAtB,EAAyB;AACvB;AACA,YAAM9D,GAAG,GAAG9H,GAAG,CAACmB,KAAJ,CAAU,aAAV,EAAyB;AACnCD,YAAE,EAAK,KAAK7B,UAAL,CAAgB6B,EAAhB,EAAL,SAA6B,KAAK7B,UAAL,CAAgB+B,IAAhB;AADI,SAAzB,CAAZ;AAIA6G,gBAAQ,CAACuF,QAAT,CAAkBC,IAAlB,GAAyB3F,GAAzB;AAEA,eACE;AAAK,eAAK,EAAE;AAAE4F,qBAAS,EAAE,QAAb;AAAuBC,mBAAO,EAAE;AAAhC;AAAZ,WACE,EAAC,yEAAD;AAAkB,cAAI,EAAE;AAAxB,UADF,EAGE;AAAI,eAAK,EAAE;AAAE9G,qBAAS,EAAE;AAAb;AAAX,WAAmC7G,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,uDAArB,CAAnC,CAHF,EAIGJ,GAAG,CAACG,UAAJ,CAAeC,KAAf,CAAqB,sDAArB,EAA6E;AAC5E6J,WAAC,EAAE;AAAG,gBAAI,EAAEnC;AAAT;AADyE,SAA7E,CAJH,CADF;AAUD;AACF;;AAED,WAAOuF,QAAQ,EAAf;AACD,GAhCO,CAAR;AAiCD,C;;;;;;;;;;;;ACxDD;AAAA;AAAe,SAASpB,OAAT,CAAiB2B,OAAjB,EAA0B;AACvCC,GAAC,CAACD,OAAD,CAAD,CAAW3B,OAAX;AACD,C;;;;;;;;;;;ACFD,iD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,0E;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,oD","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class BlogMeta extends mixin(Model, {\r\n    discussion: Model.hasOne('discussion'),\r\n    featuredImage: Model.attribute('featuredImage'),\r\n    summary: Model.attribute('summary'),\r\n    isFeatured: Model.attribute('isFeatured'),\r\n    isSized: Model.attribute('isSized'),\r\n    isPendingReview: Model.attribute('isPendingReview'),\r\n}) {}","import Component from 'flarum/Component';\r\n\r\nexport default class BlogCategories extends Component {\r\n  init() {\r\n    this.blogCategories = app.forum.attribute('blogTags');\r\n  }\r\n  \r\n  view() {\r\n    return (\r\n      <div className={\"BlogCategories\"}>\r\n        <h3>{app.translator.trans('v17development-flarum-blog.forum.categories')}</h3>\r\n\r\n        {this.blogCategories && this.blogCategories.map(tagId => {\r\n          const tag = app.store.getById('tags', tagId);\r\n\r\n          if(!tag) return null; \r\n\r\n          const tags = [];\r\n\r\n          // Add tag\r\n          tags.push(\r\n            this.categoryItem(tag)\r\n          );\r\n\r\n          // Add tags\r\n          app.store.all('tags').forEach(_tag => {\r\n            if(_tag.isChild() && _tag.parent().id() === tag.id()) {\r\n              tags.push(this.categoryItem(_tag));\r\n            }\r\n          });\r\n          \r\n          return tags;\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Category item\r\n  categoryItem(tag) {\r\n    return (\r\n      <a \r\n        href={app.route(\"blogCategory\", { slug: tag.slug() })} \r\n        className={`BlogCategories-item BlogCategories-item-${tag.id()} ${tag.isChild() && app.forum.attribute('blogCategoryHierarchy') == true ? 'BlogCategories-item-child' : ''}`} \r\n        config={m.route}\r\n        >\r\n        <span className={tag.icon() === '' ? 'BlogCategories-item-colored' : ''} style={{ backgroundColor: tag.icon() === '' ? tag.color() : null }}>\r\n          <i className={tag.icon()} />\r\n        </span>\r\n        {tag.name()}\r\n      </a>\r\n    )\r\n  }\r\n}","import Component from 'flarum/Component';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport listItems from 'flarum/helpers/listItems';\r\nimport avatar from 'flarum/helpers/avatar';\r\n\r\nexport default class BlogAuthor extends Component {  \r\n  view() {\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Author\"}>\r\n        <div className={`FlarumBlog-Article-Author-background ${this.props.loading ? 'FlarumBlog-Author-Ghost' : ''}`} style={{ backgroundColor: this.props.article && this.props.article.user() ? this.props.article && this.props.article.user().color() : null }} />\r\n\r\n        <div className={\"FlarumBlog-Article-Author-Avatar\"}>{this.props.article && this.props.article.user() ? avatar(this.props.article.user()) : <span className={\"Avatar FlarumBlog-Author-Ghost\"} />}</div>\r\n\r\n        {this.props.article && this.props.article.user() && (\r\n          <div className={\"FlarumBlog-Article-Author-Info\"}>\r\n            <span className={\"FlarumBlog-Article-Author-Name\"}>{this.props.article.user().displayName()}</span>\r\n            <p className={\"FlarumBlog-Article-Author-Bio\"}>{this.props.article.user().bio && this.props.article.user().bio()}</p>\r\n\r\n            <ul className={\"FlarumBlog-Article-Author-Extended\"}>\r\n              {listItems(this.items().toArray())}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        {this.props.loading && (\r\n          <div>\r\n            <span className={\"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"}>&nbsp;</span>\r\n            <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n            <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n            <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  items() {\r\n    return new ItemList();\r\n  }\r\n}","import Component from 'flarum/Component';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport listItems from 'flarum/helpers/listItems';\r\nimport BlogAuthor from './BlogAuthor';\r\nimport BlogCategories from '../BlogCategories';\r\n\r\nexport default class BlogItemSidebar extends Component {\r\n  view() {\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Sidebar\"}>\r\n        <ul>\r\n          {listItems(this.items().toArray())}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  items() {\r\n    const itemlist = new ItemList();\r\n\r\n    itemlist.add(\"author\", BlogAuthor.component(this.props), 0);\r\n\r\n    itemlist.add(\"categories\", BlogCategories.component(this.props), 0);\r\n\r\n    return itemlist;\r\n  }\r\n}","import Component from 'flarum/Component';\r\nimport TagDiscussionModal from 'flarum/tags/components/TagDiscussionModal';\r\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\r\nimport Alert from 'flarum/components/Alert';\r\nimport Button from 'flarum/components/Button';\r\nimport Dropdown from 'flarum/components/Dropdown';\r\nimport BlogPostSettingsModal from './Modals/BlogPostSettingsModal';\r\nimport EditPostComposer from 'flarum/components/EditPostComposer';\r\nimport extractText from 'flarum/utils/extractText';\r\nimport RenameArticleModal from './Modals/RenameArticleModal';\r\n\r\nexport default class BlogPostController extends Component {\r\n  init() {\r\n    this.loadedPost = false;\r\n  }\r\n  \r\n  view() {\r\n    const article = this.props.article;\r\n    let buttons = [];\r\n\r\n    // Rename article\r\n    if(article.canRename()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new RenameArticleModal({ article })),\r\n          icon: 'fas fa-pencil-alt',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.rename_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    const articlePost = article.firstPost() ? article.firstPost() : app.store.getById('posts', article.firstPostId());\r\n\r\n    // Edit article\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        disabled: !articlePost || !articlePost.canEdit(),\r\n        onclick: () => {\r\n          app.composer.load(new EditPostComposer({post: articlePost}));\r\n          app.composer.show();\r\n        },\r\n        icon: 'fas fa-edit',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.edit_article')\r\n      })\r\n    );\r\n\r\n    // Article settings\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        onclick: () => app.modal.show(new BlogPostSettingsModal({ article })),\r\n        icon: 'fas fa-cogs',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.article_settings')\r\n      })\r\n    );\r\n\r\n    // Update categories\r\n    if(article.canTag()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new TagDiscussionModal({ discussion: article })),\r\n          icon: 'fas fa-tag',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.update_category')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Approve article\r\n    if(article.blogMeta() && article.blogMeta().isPendingReview()) {\r\n      buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          disabled: !app.forum.attribute('canApproveBlogPosts'),\r\n          onclick: () => {\r\n            article.blogMeta().save({\r\n              isPendingReview: false\r\n            }).then(() => {\r\n              app.alerts.show(new Alert({type: 'success', children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article_approved')}));\r\n            },\r\n            response => {\r\n              this.loading = false;\r\n              this.handleErrors(response);\r\n            });\r\n          },\r\n          icon: 'fas fa-thumbs-up',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n    // Lock article\r\n    if(article.canLock()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: DiscussionControls.lockAction.bind(article),\r\n          icon: `fas ${article.isLocked() ? 'fa-comments' : 'fa-comment-slash'}`,\r\n          children: article.isLocked() ? app.translator.trans('v17development-flarum-blog.forum.tools.enable_comments') : app.translator.trans('v17development-flarum-blog.forum.tools.disable_comments')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Hide/show/delete\r\n    if(article.canHide()) {\r\n      // Article is hidden\r\n      if(article.isHidden()) {\r\n        // Recover article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.restoreAction.bind(article),\r\n            icon: 'fas fa-eye',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.recover_article')\r\n          })\r\n        );\r\n\r\n        // Delete article\r\n        if(article.canDelete()) {\r\n          buttons.push(\r\n            Button.component({\r\n              className: 'Button',\r\n              onclick: () => {\r\n                // Confirm deletion\r\n                if (confirm(extractText(app.translator.trans('core.forum.discussion_controls.delete_confirmation')))) {\r\n                  // Redirect if the current page is an blog article\r\n                  if (app.history.getCurrent().name === 'blogArticle') {\r\n                    if(app.previous) {\r\n                      app.history.back();\r\n                    }else{\r\n                      m.route(app.route('blog'));\r\n                    }\r\n                  }\r\n            \r\n                  return article.delete().then(() => {\r\n                    m.redraw();\r\n                  });\r\n                }            \r\n              },\r\n              icon: 'far fa-trash-alt',\r\n              children: app.translator.trans('v17development-flarum-blog.forum.tools.delete_forever')\r\n            })\r\n          );\r\n        }\r\n      }else{\r\n        // Hide article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.hideAction.bind(article),\r\n            icon: 'fas fa-eye-slash',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.hide_article')\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\r\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\r\n          {Dropdown.component({\r\n            icon: 'fas fa-cog',\r\n            label: 'Manage',\r\n            buttonClassName: 'Button',\r\n            menuClassName: 'Dropdown-menu--right',\r\n            children: buttons,\r\n            onshow: () => {\r\n              // Get post data to make sure they can edit the post\r\n              if(articlePost && !articlePost.canEdit() && !this.loadedPost) {\r\n                this.loadedPost = true;\r\n                app.store\r\n                  .find('posts', article.firstPost() ? article.firstPost().id() : article.firstPostId())\r\n                  .then(() => {})\r\n                  .catch(() => {})\r\n                  .then(() => m.redraw())\r\n              }     \r\n            }\r\n          })}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport Switch from 'flarum/components/Switch';\r\n\r\nexport default class BlogPostSettingsModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.isNew = this.props.article.blogMeta() ? false : true;\r\n    this.meta = this.props.article.blogMeta() ? this.props.article.blogMeta() : app.store.createRecord('blogMeta');\r\n    \r\n    this.summary = m.prop(this.meta.summary() || '');\r\n\r\n    this.featuredImage = m.prop(this.meta.featuredImage() || '');\r\n\r\n    this.isFeatured = m.prop(this.meta.isFeatured() || false);\r\n    this.isSized = m.prop(this.meta.isSized() || false);\r\n    this.isPendingReview = m.prop(this.meta.isPendingReview() || false);\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return 'Blog post settings';\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('summary', (\r\n      <div className=\"Form-group\">\r\n        <label>Article summary:</label>\r\n        <textarea className=\"FormControl\" style={{ maxWidth: '100%', minWidth: '100%', width: '100%', minHeight: '120px' }} value={this.summary()} placeholder={\"Please enter a summary\"} oninput={m.withAttr('value', this.summary)}/>\r\n\r\n        <small>This summary will be visible on the blog overview page and will be used for SEO purposes.</small>\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('image', (\r\n      <div className=\"Form-group\">\r\n        <label>Article image URL:</label>\r\n        <input type=\"text\" className=\"FormControl\" value={this.featuredImage()} placeholder={\"https://\"} oninput={m.withAttr('value', this.featuredImage)}/>\r\n\r\n        <small>Best image resolution for social media: 1200x630</small>\r\n\r\n        {this.featuredImage() != \"\" && (\r\n          <img src={this.featuredImage()} alt={this.props.article.title()} title={\"Blog post image\"} width={\"100%\"} style={{ marginTop: '15px' }} />\r\n        )}\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('sized', (\r\n      <div className=\"Form-group\">\r\n        {Switch.component({\r\n          state: this.isSized() == true,\r\n          onchange: (val) => {\r\n            this.isSized(val);\r\n          },\r\n          children: [\r\n            <b>Highlighted post</b>, \r\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>Give this post a big image on the blog overview page.</div>,\r\n          ]\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    items.add('submit', <div className=\"Form-group\">\r\n      {Button.component({\r\n        type: 'submit',\r\n        className: 'Button Button--primary SupportModal-save',\r\n        loading: this.loading,\r\n        children: 'Update'\r\n      })}\r\n    </div>, -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      summary: this.summary(),\r\n      featuredImage: this.featuredImage(),\r\n      isFeatured: this.isFeatured(),\r\n      isSized: this.isSized(),\r\n      isPendingReview: this.isPendingReview(),\r\n      relationships: this.isNew && {\r\n        discussion: this.props.article\r\n      }\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.meta\r\n      .save(this.submitData())\r\n      .then(() => {\r\n        if(this.isNew) {\r\n          this.props.article.pushData({\r\n            relationships: {\r\n              blogMeta: this.meta\r\n            }\r\n          });\r\n        }\r\n\r\n        this.hide();\r\n        m.redraw();\r\n      },\r\n      response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      });\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport { slug } from 'flarum/utils/string';\r\n\r\nexport default class RenameArticleModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.article = this.props.article;\r\n\r\n    this.name = m.prop(this.article.title() || '');\r\n    this.slug = m.prop(this.article.slug() || '');\r\n\r\n    this.redirect = this.props.redirect;\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('v17development-flarum-blog.forum.tools.rename_article');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('name', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.title')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.title')} value={this.name()} oninput={e => {\r\n          this.name(e.target.value);\r\n          this.slug(slug(e.target.value));\r\n        }}/>\r\n      </div>\r\n    ), 50);\r\n\r\n    items.add('slug', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.slug')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.slug')} value={this.slug()} oninput={m.withAttr('value', this.slug)}/>\r\n      </div>\r\n    ), 40);\r\n\r\n    items.add('submit', (\r\n      <div className=\"Form-group\">\r\n        {Button.component({\r\n          type: 'submit',\r\n          className: 'Button Button--primary SupportModal-save',\r\n          loading: this.loading,\r\n          children: 'Update'\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.article.save({\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    })\r\n      .then(() => {\r\n        this.hide();\r\n\r\n        // Redirect\r\n        if(this.redirect) {\r\n          const url =  `/knowledgebase/${this.article.id()}-${this.slug()}`;\r\n\r\n          m.route(url, true);\r\n          window.history.replaceState(null, document.title, url);\r\n        }\r\n      }, response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      }\r\n    );\r\n  }\r\n}","import BlogItem from \"./pages/BlogItem\";\r\nimport Model from 'flarum/Model';\r\nimport Discussion from 'flarum/models/Discussion';\r\n\r\nimport BlogOverview from \"./pages/BlogOverview\";\r\nimport redirector from \"./utils/redirector\";\r\nimport BlogMeta from \"../common/Models/BlogMeta\";\r\nimport extendTagOverview from \"./utils/extendTagOverview\";\r\n\r\n// Register Flarum Blog\r\napp.initializers.add('v17development-flarum-blog', app => {\r\n  app.routes.blog = { path: '/blog', component: BlogOverview.component() };\r\n  \r\n  app.routes.blogCategory = { path: '/blog/category/:slug', component: BlogOverview.component() };\r\n\r\n  app.routes.blogArticle = { path: '/blog/:id', component: BlogItem.component() };\r\n\r\n  app.store.models.blogMeta = BlogMeta;\r\n\r\n  Discussion.prototype.blogMeta = Model.hasOne('blogMeta');\r\n\r\n  // Redirect discussions/tags to their blog post/overview\r\n  redirector();\r\n\r\n  // Extend tag overview.\r\n  // Hide tags which are used as blog category\r\n  extendTagOverview();\r\n});","import Page from 'flarum/components/Page';\r\nimport Button from 'flarum/components/Button';\r\nimport CommentPost from 'flarum/components/CommentPost';\r\nimport ReplyComposer from 'flarum/components/ReplyComposer';\r\nimport PostStream from 'flarum/components/PostStream';\r\nimport BlogPostController from '../components/BlogPostController';\r\nimport BlogItemSidebar from '../components/BlogItemSidebar/BlogItemSidebar';\r\n\r\nexport default class BlogItem extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    // Send history push\r\n    app.history.push('blogArticle');\r\n\r\n    this.bodyClass = 'BlogItemPage';\r\n\r\n    this.loading = true;\r\n    this.found = false;\r\n    this.article = null;\r\n    // this.posts = [];\r\n\r\n    this.loadBlogItem();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogItem() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', m.route.param('id').split('-')[0])\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog post\r\n  show(article) {\r\n    // Set article data\r\n    this.article = article;\r\n\r\n    // Update title\r\n    app.setTitle(`${article.title()} - ${app.translator.trans('v17development-flarum-blog.forum.blog')}`);\r\n\r\n    this.loading = false;\r\n\r\n    let includedPosts = [];\r\n    if (article.payload && article.payload.included) {\r\n      const articleId = article.id();\r\n\r\n      includedPosts = article.payload.included\r\n        .filter(\r\n          (record) =>\r\n            record.type === 'posts' &&\r\n            record.relationships &&\r\n            record.relationships.discussion &&\r\n            record.relationships.discussion.data.id === articleId\r\n        )\r\n        .map((record) => app.store.getById('posts', record.id))\r\n        .sort((a, b) => a.id() - b.id())\r\n        .slice(0, 20);\r\n    }\r\n\r\n    this.stream = new PostStream({ discussion: article, includedPosts });\r\n    this.stream.on('positionChanged', this.positionChanged.bind(this));\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  view() {\r\n    const blogImage = this.article && this.article.blogMeta() && this.article.blogMeta().featuredImage() ? `url(${this.article.blogMeta().featuredImage()})` : null;\r\n    let articlePost = null;\r\n\r\n    if(!this.loading && this.article) {\r\n      articlePost = this.article.firstPost() ? this.article.firstPost() : app.store.getById('posts', this.article.firstPostId());\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlogItem\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"FlarumBlog-ToolButtons\"}>\r\n            <Button \r\n              className={\"Button\"}\r\n              onclick={() => {\r\n                if(app.previous && app.previous.props.routeName === \"blog\") {\r\n                  app.history.back();\r\n                }else{\r\n                  m.route(app.route(\"blog\"));\r\n                }\r\n              }}\r\n              icon={\"fas fa-angle-left\"}\r\n              >\r\n              {app.translator.trans('v17development-flarum-blog.forum.return_to_overview')}\r\n            </Button>\r\n          </div>\r\n          <div className={\"FlarumBlog-Article\"}>\r\n            <div className={\"FlarumBlog-Article-Container\"}>\r\n              <div className={\"FlarumBlog-Article-Content\"}>\r\n                <div \r\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image ${this.loading ? 'FlarumBlog-Article-GhostImage' : ''}`} \r\n                  style={{ \r\n                    backgroundImage: blogImage,\r\n                    opacity: this.article && this.article.isHidden() ? 0.4 : null\r\n                  }}\r\n                  />\r\n\r\n                {this.article && app.session.user && (app.session.user.canEdit() || this.article.canRename() || (this.article.posts() && this.article.posts()[0].canEdit())) && (\r\n                  <BlogPostController article={this.article} />\r\n                )}\r\n\r\n                {/* Article Categories */}\r\n                <div className={\"FlarumBlog-Article-Categories\"}>\r\n                  {!this.loading && this.article && this.article.tags() && this.article.tags().map(tag => (\r\n                    <a href={app.route(\"blogCategory\", { slug: tag.slug() })} config={m.route}>{tag.name()}</a>\r\n                  ))}\r\n\r\n                  {this.loading && (\r\n                    [0, 1].map(() => (<span className={\"FlarumBlog-Article-GhostCategory\"}>Category</span>))\r\n                  )}\r\n                </div>\r\n                \r\n                <div className={\"FlarumBlog-Article-Post\"}>\r\n                  {/* Article name */}\r\n                  <h3 className={this.loading ? 'FlarumBlog-Article-GhostTitle' : null}>\r\n                    {this.article ? this.article.title() : 'Ghost title'} \r\n                    {this.article && this.article.isHidden() && `(${app.translator.trans('v17development-flarum-blog.forum.hidden')})`}\r\n                  </h3>\r\n                  \r\n                  {this.loading && [0, 1, 2].map(() => (\r\n                    <div>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p>&nbsp;</p>\r\n                    </div>\r\n                  ))}\r\n\r\n                  {!this.loading && this.article.blogMeta() && this.article.blogMeta().isPendingReview() == true && (\r\n                    <div className={\"Post\"}>\r\n                      <blockquote class=\"uncited\" style={{ fontSize: '16px' }}><div><span className={\"far fa-clock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')}</div></blockquote>\r\n                    </div>\r\n                  )}\r\n\r\n                  {!this.loading && articlePost && <CommentPost post={articlePost} />}\r\n                </div>\r\n              </div>\r\n\r\n              <div className={\"FlarumBlog-Article-Comments\"}>\r\n                <h4>{app.translator.trans('v17development-flarum-blog.forum.comment_section.comments')} ({this.article ? (this.article.commentCount() - 1) : 0})</h4>\r\n                {/* Locked */}\r\n                {!this.loading && this.article.isLocked && this.article.isLocked() && (\r\n                  <div className={\"Post-body\"}>\r\n                    <blockquote class=\"uncited\"><div><span className={\"far fa-lock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.comment_section.locked')}</div></blockquote>\r\n                  </div>\r\n                )}\r\n\r\n                {!this.loading && this.stream && this.stream.render()}\r\n              </div>\r\n            </div>\r\n\r\n            <BlogItemSidebar article={this.article} loading={this.loading} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  positionChanged(startNumber, endNumber) {\r\n    const article = this.article;\r\n\r\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\r\n      article.save({ lastReadPostNumber: endNumber });\r\n      m.redraw();\r\n    }\r\n\r\n  }\r\n}","import Page from 'flarum/components/Page';\r\nimport Button from 'flarum/components/Button';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\nimport BlogCategories from '../components/BlogCategories';\r\nimport BlogComposer from '../utils/BlogComposer';\r\nimport tooltip from '../utils/tooltip';\r\n\r\nexport default class BlogOverview extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    this.bodyClass = 'BlogOverviewPage';\r\n\r\n    this.isLoading = true;\r\n    this.featuredPosts = [];\r\n    this.posts = [];\r\n    this.hasMore = null;\r\n\r\n    // Send history push\r\n    app.history.push('blog');\r\n\r\n    this.loadBlogOverview();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogOverview() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', {\r\n        filter: {\r\n          q: `is:blog${m.route.param('slug') ? ` tag:${m.route.param('slug')}` : ''}`\r\n        },\r\n        sort: '-createdAt'\r\n      })\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog posts\r\n  show(articles) {\r\n    if(articles.length === 0) {\r\n      this.isLoading = false;\r\n      m.lazyRedraw();\r\n      \r\n      return;\r\n    }\r\n\r\n    this.featuredPosts = articles.slice(0, 3);\r\n    this.posts = articles.length >= 4 ? articles.slice(3, articles.length) : [];\r\n\r\n    this.isLoading = false;\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  title() {\r\n    if(!m.route.param('slug')) {\r\n      return <h2>{app.translator.trans('v17development-flarum-blog.forum.recent_posts')}</h2>;\r\n    }\r\n\r\n    const tag = app.store.all('tags').filter(tag => tag.slug() === m.route.param('slug'));\r\n\r\n    return (\r\n      <h2>\r\n        {tag && tag[0] && tag[0].name()}\r\n        <small> - <a href={app.route(\"blog\")} config={m.route}>{app.translator.trans('v17development-flarum-blog.forum.return_to_overview')}</a></small>\r\n      </h2>\r\n    );\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className={\"FlarumBlogOverview\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"BlogFeatured\"}>\r\n            {app.forum.attribute('canWriteBlogPosts') && (\r\n              <Button \r\n                className={\"Button FlarumBlogWrite\"}\r\n                onclick={() => this.newArticle()}\r\n                icon={\"fas fa-pencil\"}\r\n                >\r\n                {app.translator.trans('v17development-flarum-blog.forum.compose.write_article')}\r\n              </Button>\r\n            )}\r\n\r\n            {this.title()}\r\n\r\n            <div style={{ clear: 'both' }} />\r\n\r\n            <div className={\"BlogFeatured-list\"}>\r\n              {/* Ghost data */}\r\n              {this.isLoading && [0, 1, 2].map(() => (\r\n                <div className={\"BlogFeatured-list-item BlogFeatured-list-item-ghost\"}>\r\n                  <div className={\"BlogFeatured-list-item-details\"}>\r\n                    <h4>&nbsp;</h4>\r\n\r\n                    <div className={\"data\"}>\r\n                      <span><i className={\"far fa-wave\"} /></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              {!this.isLoading && this.featuredPosts.length >= 0 && this.featuredPosts.map((article) => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const blogTag = article.tags() ? article.tags().filter(tag => tag.isChild()) : [];\r\n\r\n                return (\r\n                  <a \r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={\"BlogFeatured-list-item FlarumBlog-default-image\"} \r\n                    style={{ backgroundImage: blogImage }}\r\n                    config={m.route}\r\n                    >\r\n                    <div className={\"BlogFeatured-list-item-top\"}>\r\n                      {blogTag[0] && (\r\n                        <span>{blogTag[0].name()}</span>\r\n                      )}\r\n                      {article.isSticky() && (\r\n                        <span><i className={\"fas fa-thumbtack\"} /></span>\r\n                      )}\r\n                      {((article.blogMeta() && article.blogMeta().isPendingReview() == true) || article.isHidden()) && (\r\n                        <span><i className={\"fas fa-eye-slash\"} /></span>\r\n                      )}\r\n                      {article.blogMeta() && article.blogMeta().isPendingReview() == true && (\r\n                        <span title={app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')} config={tooltip.bind(this)} data-placement={\"bottom\"}><i className={\"far fa-clock\"} /> {app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review_title')}</span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className={\"BlogFeatured-list-item-details\"}>\r\n                      <h4>{article.title()}</h4>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={\"BlogScrubber\"}>\r\n            <div className={\"BlogList\"}>\r\n              {this.isLoading && [false, false, true, false].map((state) => {\r\n                return (\r\n                  <div className={`BlogList-item BlogList-item-${state === true ? 'sized' : 'default'} BlogList-item-ghost`}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>&nbsp;</h4>\r\n                      <p>&nbsp;</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-wave\"} /></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.posts.length >= 1 && this.posts.map(article => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const isSized = article.blogMeta() && article.blogMeta().isSized();\r\n                const summary = article.blogMeta() && article.blogMeta().summary() ? article.blogMeta().summary() : \"\";\r\n                \r\n                return (\r\n                  <a\r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={`BlogList-item BlogList-item-${isSized ? 'sized' : 'default'}`}\r\n                    config={m.route}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"} style={{ backgroundImage: blogImage }}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>\r\n                        {article.title()}\r\n                        {((article.blogMeta() && article.blogMeta().isPendingReview() == true) || article.isHidden()) && (\r\n                          <i className={\"fas fa-eye-slash\"} />\r\n                        )}\r\n                        {article.blogMeta() && article.blogMeta().isPendingReview() == true && (\r\n                          <i className={\"far fa-clock\"} title={app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')} config={tooltip.bind(this)} />\r\n                        )}\r\n                      </h4>\r\n                      <p>{summary}</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.featuredPosts.length > 0 && this.posts.length === 0 && (\r\n                <p className={\"FlarumBlog-reached-end\"}>{app.translator.trans('v17development-flarum-blog.forum.no_more_posts')}</p>\r\n              )}\r\n\r\n              {!this.isLoading && this.featuredPosts.length === 0 && this.posts.length === 0 && (\r\n                <p className={\"FlarumBlog-reached-end\"}>{app.translator.trans('v17development-flarum-blog.forum.category_empty')}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className={\"Sidebar\"}>\r\n              <BlogCategories />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  newArticle() {\r\n    const component = new BlogComposer({\r\n        user: app.session.user\r\n    });\r\n\r\n    let tags = [];\r\n\r\n    app.forum.attribute('blogTags').forEach(tagId => {\r\n      const tag = app.store.getById('tags', tagId);\r\n      \r\n      if(tag && tags.length === 0 && !tag.isChild()) {\r\n        tags.push(tag);\r\n      }\r\n    });\r\n\r\n    // Update tags\r\n    component.tags = tags;\r\n\r\n    app.composer.load(component);\r\n    app.composer.show();\r\n  }\r\n}","import DiscussionComposer from 'flarum/components/DiscussionComposer';\r\n\r\nexport default class BlogComposer extends DiscussionComposer {\r\n  onsubmit() {\r\n    this.loading = true;\r\n\r\n    const data = this.data();\r\n\r\n    app.store.createRecord('discussions').save(data).then(\r\n        article => {\r\n            app.composer.hide();\r\n            m.route(app.route('blogArticle', { id: article.id() + '-' + article.slug() }));\r\n        },\r\n        this.loaded.bind(this)\r\n    );\r\n  }\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport TagsPage from 'flarum/tags/components/TagsPage';\r\n\r\nexport default function extendTagOverview() {\r\n    extend(TagsPage.prototype, 'view', function(markup) {\r\n        if(app.forum.attribute('blogHideTags') == false) return markup;\r\n        \r\n        // Get knowledge base tag ID's\r\n        const knowledgeBaseTags = app.forum.attribute('blogTags') || [];\r\n\r\n        // Get tiles\r\n        let tag_tiles = markup.children[1].children[1].children[0].children;\r\n\r\n        // Map through the tiles and remove tiles that are part of the knowledge base \r\n        markup.children[1].children[1].children[0].children = tag_tiles.map((tile, i) => {\r\n            return knowledgeBaseTags.indexOf(this.tags[i].id()) >= 0 ? null : tile;\r\n        });\r\n\r\n        return markup;\r\n    });\r\n}\r\n","import IndexPage from 'flarum/components/IndexPage';\r\nimport DiscussionPage from 'flarum/components/DiscussionPage';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport { extend, override } from 'flarum/extend';\r\n\r\nexport default function() {\r\n  // Redirect tag to blog category\r\n  extend(IndexPage.prototype, 'config', function() {\r\n    const tag = this.currentTag();\r\n    const tagRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'tags_only';\r\n\r\n    // Only trigger when it's a tag page and the redirects are enabled\r\n    if(tag && tagRedirectEnabled) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      // Tag is inside list\r\n      if(blogTags.indexOf(tag.id()) >= 0 || (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)) {\r\n        m.route(app.route('blog'));\r\n      }\r\n    }\r\n  });\r\n\r\n  // Redirect discussion to blog article\r\n  override(DiscussionPage.prototype, 'view', function(original) {\r\n    const discussionRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'discussions_only';\r\n    if(discussionRedirectEnabled && this.discussion && this.discussion && this.discussion.tags().length > 0) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      const foundTags = this.discussion.tags().filter(tag => {\r\n        return blogTags.indexOf(tag.id()) >= 0 ||  (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\r\n      });\r\n\r\n      // Only redirect if the discussion has blog tags\r\n      if(foundTags.length > 0) {\r\n        // Redirect to discussion\r\n        const url = app.route('blogArticle', {\r\n          id: `${this.discussion.id()}-${this.discussion.slug()}`\r\n        });\r\n\r\n        document.location.href = url;\r\n\r\n        return (\r\n          <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n            <LoadingIndicator size={\"large\"} />\r\n            \r\n            <h2 style={{ marginTop: '40px' }}>{app.translator.trans('v17development-flarum-blog.forum.utils.redirect.title')}</h2>\r\n            {app.translator.trans('v17development-flarum-blog.forum.utils.redirect.link', {\r\n              a: <a href={url} />\r\n            })}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return original();\r\n  });\r\n}","export default function tooltip(element) {\r\n  $(element).tooltip();\r\n}","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/EditPostComposer'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/PostStream'];","module.exports = flarum.core.compat['components/ReplyComposer'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['tags/components/TagDiscussionModal'];","module.exports = flarum.core.compat['tags/components/TagsPage'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}