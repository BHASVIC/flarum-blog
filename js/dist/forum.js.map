{"version":3,"sources":["webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Switch']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Alert']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Component']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/avatar']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/PostStream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Dropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/extractText']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/string']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['models/Discussion']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/mixin']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/ReplyComposer']\"","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/./src/forum/utils/BlogComposer.js","webpack://@v17development/flarum-blog/./src/forum/utils/tooltip.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/./src/forum/utils/extendTagOverview.js","webpack://@v17development/flarum-blog/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_inheritsLoose","subClass","superClass","constructor","__proto__","flarum","core","compat","BlogCategories","init","this","blogCategories","app","forum","attribute","view","className","translator","trans","map","tagId","tag","store","getById","tags","push","categoryItem","all","forEach","_tag","isChild","parent","id","href","route","slug","config","icon","style","backgroundColor","color","Component","BlogPostSettingsModal","isNew","props","article","blogMeta","meta","createRecord","summary","prop","featuredImage","isFeatured","isSized","isPendingReview","title","content","fields","toArray","items","ItemList","add","maxWidth","minWidth","width","minHeight","placeholder","oninput","withAttr","type","src","alt","marginTop","Switch","component","state","onchange","val","children","fontWeight","Button","loading","submitData","relationships","discussion","onsubmit","e","preventDefault","save","then","pushData","hide","redraw","response","handleErrors","Modal","RenameArticleModal","redirect","target","url","window","history","replaceState","document","BlogPostController","loadedPost","buttons","canRename","onclick","modal","show","articlePost","firstPost","firstPostId","disabled","canEdit","composer","load","EditPostComposer","post","canTag","TagDiscussionModal","alerts","Alert","canLock","DiscussionControls","lockAction","isLocked","canHide","isHidden","restoreAction","canDelete","confirm","extractText","getCurrent","previous","back","hideAction","Dropdown","label","buttonClassName","menuClassName","onshow","find","BlogItem","setTitle","bodyClass","found","loadBlogItem","preloadBlogOverview","preloadedApiDocument","setTimeout","param","split","lazyRedraw","includedPosts","payload","included","articleId","filter","record","data","sort","a","b","slice","stream","PostStream","on","positionChanged","blogImage","backgroundImage","opacity","session","user","posts","class","fontSize","marginRight","trust","contentHtml","commentCount","render","avatar","padding","displayName","bio","startNumber","endNumber","lastReadPostNumber","Page","BlogComposer","loaded","DiscussionComposer","tooltip","element","$","BlogOverview","isLoading","featuredPosts","hasMore","loadBlogOverview","q","articles","length","newArticle","clear","blogTag","isSticky","data-placement","humanTime","createdAt","extend","IndexPage","currentTag","tagRedirectEnabled","blogTags","indexOf","override","DiscussionPage","original","location","textAlign","size","BlogMeta","mixin","Model","hasOne","extendTagOverview","TagsPage","markup","knowledgeBaseTags","tag_tiles","tile","initializers","routes","blog","path","blogCategory","blogArticle","models","Discussion","redirector"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['components/PostStream'];","module.exports = flarum.core.compat['tags/components/TagDiscussionModal'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/EditPostComposer'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/string'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['tags/components/TagsPage'];","module.exports = flarum.core.compat['components/ReplyComposer'];","import Component from 'flarum/Component';\r\n\r\nexport default class BlogCategories extends Component {\r\n  init() {\r\n    this.blogCategories = app.forum.attribute('blogTags');\r\n  }\r\n  \r\n  view() {\r\n    return (\r\n      <div className={\"BlogCategories\"}>\r\n        <h3>{app.translator.trans('v17development-flarum-blog.forum.categories')}</h3>\r\n\r\n        {this.blogCategories && this.blogCategories.map(tagId => {\r\n          const tag = app.store.getById('tags', tagId);\r\n\r\n          if(!tag) return null; \r\n\r\n          const tags = [];\r\n\r\n          // Add tag\r\n          tags.push(\r\n            this.categoryItem(tag)\r\n          );\r\n\r\n          // Add tags\r\n          app.store.all('tags').forEach(_tag => {\r\n            if(_tag.isChild() && _tag.parent().id() === tag.id()) {\r\n              tags.push(this.categoryItem(_tag));\r\n            }\r\n          });\r\n          \r\n          return tags;\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Category item\r\n  categoryItem(tag) {\r\n    return (\r\n      <a \r\n        href={app.route(\"blogCategory\", { slug: tag.slug() })} \r\n        className={`BlogCategories-item BlogCategories-item-${tag.id()} ${tag.isChild() && app.forum.attribute('blogCategoryHierarchy') == true ? 'BlogCategories-item-child' : ''}`} \r\n        config={m.route}\r\n        >\r\n        <span className={tag.icon() === '' ? 'BlogCategories-item-colored' : ''} style={{ backgroundColor: tag.icon() === '' ? tag.color() : null }}>\r\n          <i className={tag.icon()} />\r\n        </span>\r\n        {tag.name()}\r\n      </a>\r\n    )\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport Switch from 'flarum/components/Switch';\r\n\r\nexport default class BlogPostSettingsModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.isNew = this.props.article.blogMeta() ? false : true;\r\n    this.meta = this.props.article.blogMeta() ? this.props.article.blogMeta() : app.store.createRecord('blogMeta');\r\n    \r\n    this.summary = m.prop(this.meta.summary() || '');\r\n\r\n    this.featuredImage = m.prop(this.meta.featuredImage() || '');\r\n\r\n    this.isFeatured = m.prop(this.meta.isFeatured() || false);\r\n    this.isSized = m.prop(this.meta.isSized() || false);\r\n    this.isPendingReview = m.prop(this.meta.isPendingReview() || false);\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return 'Blog post settings';\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('summary', (\r\n      <div className=\"Form-group\">\r\n        <label>Article summary:</label>\r\n        <textarea className=\"FormControl\" style={{ maxWidth: '100%', minWidth: '100%', width: '100%', minHeight: '120px' }} value={this.summary()} placeholder={\"Please enter a summary\"} oninput={m.withAttr('value', this.summary)}/>\r\n\r\n        <small>This summary will be visible on the blog overview page and will be used for SEO purposes.</small>\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('image', (\r\n      <div className=\"Form-group\">\r\n        <label>Article image URL:</label>\r\n        <input type=\"text\" className=\"FormControl\" value={this.featuredImage()} placeholder={\"https://\"} oninput={m.withAttr('value', this.featuredImage)}/>\r\n\r\n        <small>Best image resolution for social media: 1200x630</small>\r\n\r\n        {this.featuredImage() != \"\" && (\r\n          <img src={this.featuredImage()} alt={this.props.article.title()} title={\"Blog post image\"} width={\"100%\"} style={{ marginTop: '15px' }} />\r\n        )}\r\n      </div>\r\n    ), 30);\r\n\r\n    items.add('sized', (\r\n      <div className=\"Form-group\">\r\n        {Switch.component({\r\n          state: this.isSized() == true,\r\n          onchange: (val) => {\r\n            this.isSized(val);\r\n          },\r\n          children: [\r\n            <b>Highlighted post</b>, \r\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>Give this post a big image on the blog overview page.</div>,\r\n          ]\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    items.add('submit', <div className=\"Form-group\">\r\n      {Button.component({\r\n        type: 'submit',\r\n        className: 'Button Button--primary SupportModal-save',\r\n        loading: this.loading,\r\n        children: 'Update'\r\n      })}\r\n    </div>, -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      summary: this.summary(),\r\n      featuredImage: this.featuredImage(),\r\n      isFeatured: this.isFeatured(),\r\n      isSized: this.isSized(),\r\n      isPendingReview: this.isPendingReview(),\r\n      relationships: this.isNew && {\r\n        discussion: this.props.article\r\n      }\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.meta\r\n      .save(this.submitData())\r\n      .then(() => {\r\n        if(this.isNew) {\r\n          this.props.article.pushData({\r\n            relationships: {\r\n              blogMeta: this.meta\r\n            }\r\n          });\r\n        }\r\n\r\n        this.hide();\r\n        m.redraw();\r\n      },\r\n      response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      });\r\n  }\r\n}","import Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport { slug } from 'flarum/utils/string';\r\n\r\nexport default class RenameArticleModal extends Modal {\r\n  init() {\r\n    super.init();\r\n\r\n    this.article = this.props.article;\r\n\r\n    this.name = m.prop(this.article.title() || '');\r\n    this.slug = m.prop(this.article.slug() || '');\r\n\r\n    this.redirect = this.props.redirect;\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small Support-Modal';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('v17development-flarum-blog.forum.tools.rename_article');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('name', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.title')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.title')} value={this.name()} oninput={e => {\r\n          this.name(e.target.value);\r\n          this.slug(slug(e.target.value));\r\n        }}/>\r\n      </div>\r\n    ), 50);\r\n\r\n    items.add('slug', (\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans('v17development-flarum-blog.forum.article.slug')}:</label>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('v17development-flarum-blog.forum.article.slug')} value={this.slug()} oninput={m.withAttr('value', this.slug)}/>\r\n      </div>\r\n    ), 40);\r\n\r\n    items.add('submit', (\r\n      <div className=\"Form-group\">\r\n        {Button.component({\r\n          type: 'submit',\r\n          className: 'Button Button--primary SupportModal-save',\r\n          loading: this.loading,\r\n          children: 'Update'\r\n        })}\r\n      </div>\r\n    ), -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.article.save({\r\n      title: this.name(),\r\n      slug: this.slug()\r\n    })\r\n      .then(() => {\r\n        this.hide();\r\n\r\n        // Redirect\r\n        if(this.redirect) {\r\n          const url =  `/knowledgebase/${this.article.id()}-${this.slug()}`;\r\n\r\n          m.route(url, true);\r\n          window.history.replaceState(null, document.title, url);\r\n        }\r\n      }, response => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      }\r\n    );\r\n  }\r\n}","import Component from 'flarum/Component';\r\nimport TagDiscussionModal from 'flarum/tags/components/TagDiscussionModal';\r\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\r\nimport Alert from 'flarum/components/Alert';\r\nimport Button from 'flarum/components/Button';\r\nimport Dropdown from 'flarum/components/Dropdown';\r\nimport BlogPostSettingsModal from './Modals/BlogPostSettingsModal';\r\nimport EditPostComposer from 'flarum/components/EditPostComposer';\r\nimport extractText from 'flarum/utils/extractText';\r\nimport RenameArticleModal from './Modals/RenameArticleModal';\r\n\r\nexport default class BlogPostController extends Component {\r\n  init() {\r\n    this.loadedPost = false;\r\n  }\r\n  \r\n  view() {\r\n    const article = this.props.article;\r\n    let buttons = [];\r\n\r\n    // Rename article\r\n    if(article.canRename()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new RenameArticleModal({ article })),\r\n          icon: 'fas fa-pencil-alt',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.rename_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    const articlePost = article.firstPost() ? article.firstPost() : app.store.getById('posts', article.firstPostId());\r\n\r\n    // Edit article\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        disabled: !articlePost || !articlePost.canEdit(),\r\n        onclick: () => {\r\n          app.composer.load(new EditPostComposer({post: articlePost}));\r\n          app.composer.show();\r\n        },\r\n        icon: 'fas fa-edit',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.edit_article')\r\n      })\r\n    );\r\n\r\n    // Article settings\r\n    buttons.push(\r\n      Button.component({\r\n        className: 'Button',\r\n        onclick: () => app.modal.show(new BlogPostSettingsModal({ article })),\r\n        icon: 'fas fa-cogs',\r\n        children: app.translator.trans('v17development-flarum-blog.forum.tools.article_settings')\r\n      })\r\n    );\r\n\r\n    // Update categories\r\n    if(article.canTag()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: () => app.modal.show(new TagDiscussionModal({ discussion: article })),\r\n          icon: 'fas fa-tag',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.tools.update_category')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Approve article\r\n    if(article.blogMeta() && article.blogMeta().isPendingReview()) {\r\n      buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          disabled: !app.forum.attribute('canApproveBlogPosts'),\r\n          onclick: () => {\r\n            article.blogMeta().save({\r\n              isPendingReview: false\r\n            }).then(() => {\r\n              app.alerts.show(new Alert({type: 'success', children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article_approved')}));\r\n            },\r\n            response => {\r\n              this.loading = false;\r\n              this.handleErrors(response);\r\n            });\r\n          },\r\n          icon: 'fas fa-thumbs-up',\r\n          children: app.translator.trans('v17development-flarum-blog.forum.review_article.approve_article')\r\n        })\r\n      );\r\n    }\r\n\r\n    buttons.push(<li className=\"Dropdown-separator\"/>);\r\n\r\n    // Lock article\r\n    if(article.canLock()) {\r\n      buttons.push(\r\n        Button.component({\r\n          className: 'Button',\r\n          onclick: DiscussionControls.lockAction.bind(article),\r\n          icon: `fas ${article.isLocked() ? 'fa-comments' : 'fa-comment-slash'}`,\r\n          children: article.isLocked() ? app.translator.trans('v17development-flarum-blog.forum.tools.enable_comments') : app.translator.trans('v17development-flarum-blog.forum.tools.disable_comments')\r\n        })\r\n      );\r\n    }\r\n\r\n    // Hide/show/delete\r\n    if(article.canHide()) {\r\n      // Article is hidden\r\n      if(article.isHidden()) {\r\n        // Recover article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.restoreAction.bind(article),\r\n            icon: 'fas fa-eye',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.recover_article')\r\n          })\r\n        );\r\n\r\n        // Delete article\r\n        if(article.canDelete()) {\r\n          buttons.push(\r\n            Button.component({\r\n              className: 'Button',\r\n              onclick: () => {\r\n                // Confirm deletion\r\n                if (confirm(extractText(app.translator.trans('core.forum.discussion_controls.delete_confirmation')))) {\r\n                  // Redirect if the current page is an blog article\r\n                  if (app.history.getCurrent().name === 'blogArticle') {\r\n                    if(app.previous) {\r\n                      app.history.back();\r\n                    }else{\r\n                      m.route(app.route('blog'));\r\n                    }\r\n                  }\r\n            \r\n                  return article.delete().then(() => {\r\n                    m.redraw();\r\n                  });\r\n                }            \r\n              },\r\n              icon: 'far fa-trash-alt',\r\n              children: app.translator.trans('v17development-flarum-blog.forum.tools.delete_forever')\r\n            })\r\n          );\r\n        }\r\n      }else{\r\n        // Hide article\r\n        buttons.push(\r\n          Button.component({\r\n            className: 'Button',\r\n            onclick: DiscussionControls.hideAction.bind(article),\r\n            icon: 'fas fa-eye-slash',\r\n            children: app.translator.trans('v17development-flarum-blog.forum.tools.hide_article')\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\r\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\r\n          {Dropdown.component({\r\n            icon: 'fas fa-cog',\r\n            label: 'Manage',\r\n            buttonClassName: 'Button',\r\n            menuClassName: 'Dropdown-menu--right',\r\n            children: buttons,\r\n            onshow: () => {\r\n              // Get post data to make sure they can edit the post\r\n              if(articlePost && !articlePost.canEdit() && !this.loadedPost) {\r\n                this.loadedPost = true;\r\n                app.store\r\n                  .find('posts', article.firstPost() ? article.firstPost().id() : article.firstPostId())\r\n                  .then(() => {})\r\n                  .catch(() => {})\r\n                  .then(() => m.redraw())\r\n              }     \r\n            }\r\n          })}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import Page from 'flarum/components/Page';\r\nimport avatar from 'flarum/helpers/avatar';\r\nimport Button from 'flarum/components/Button';\r\nimport ReplyComposer from 'flarum/components/ReplyComposer';\r\nimport PostStream from 'flarum/components/PostStream';\r\nimport BlogCategories from '../components/BlogCategories';\r\nimport BlogPostController from '../components/BlogPostController';\r\n\r\nexport default class BlogItem extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    // Send history push\r\n    app.history.push('blogArticle');\r\n\r\n    this.bodyClass = 'BlogItemPage';\r\n\r\n    this.loading = true;\r\n    this.found = false;\r\n    this.article = null;\r\n    // this.posts = [];\r\n\r\n    this.loadBlogItem();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogItem() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', m.route.param('id').split('-')[0])\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog post\r\n  show(article) {\r\n    // Set article data\r\n    this.article = article;\r\n\r\n    // Update title\r\n    app.setTitle(`${article.title()} - ${app.translator.trans('v17development-flarum-blog.forum.blog')}`);\r\n\r\n    this.loading = false;\r\n\r\n    let includedPosts = [];\r\n    if (article.payload && article.payload.included) {\r\n      const articleId = article.id();\r\n\r\n      includedPosts = article.payload.included\r\n        .filter(\r\n          (record) =>\r\n            record.type === 'posts' &&\r\n            record.relationships &&\r\n            record.relationships.discussion &&\r\n            record.relationships.discussion.data.id === articleId\r\n        )\r\n        .map((record) => app.store.getById('posts', record.id))\r\n        .sort((a, b) => a.id() - b.id())\r\n        .slice(0, 20);\r\n    }\r\n\r\n    this.stream = new PostStream({ discussion: article, includedPosts });\r\n    this.stream.on('positionChanged', this.positionChanged.bind(this));\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  view() {\r\n    const blogImage = this.article && this.article.blogMeta() && this.article.blogMeta().featuredImage() ? `url(${this.article.blogMeta().featuredImage()})` : null;\r\n    let articlePost = null;\r\n\r\n    if(!this.loading && this.article) {\r\n      articlePost = this.article.firstPost() ? this.article.firstPost() : app.store.getById('posts', this.article.firstPostId());\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlogItem\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"FlarumBlog-Article\"}>\r\n            <div className={\"FlarumBlog-Article-Container\"}>\r\n              <div className={\"FlarumBlog-Article-Content\"}>\r\n                <div \r\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image ${this.loading ? 'FlarumBlog-Article-GhostImage' : ''}`} \r\n                  style={{ \r\n                    backgroundImage: blogImage,\r\n                    opacity: this.article && this.article.isHidden() ? 0.4 : null\r\n                  }}\r\n                  />\r\n\r\n                {this.article && app.session.user && (app.session.user.canEdit() || this.article.canRename() || (this.article.posts() && this.article.posts()[0].canEdit())) && (\r\n                  <BlogPostController article={this.article} />\r\n                )}\r\n\r\n                {/* Article Categories */}\r\n                <div className={\"FlarumBlog-Article-Categories\"}>\r\n                  {!this.loading && this.article && this.article.tags() && this.article.tags().map(tag => (\r\n                    <a href={app.route(\"blogCategory\", { slug: tag.slug() })} config={m.route}>{tag.name()}</a>\r\n                  ))}\r\n\r\n                  {this.loading && (\r\n                    [0, 1].map(() => (<span className={\"FlarumBlog-Article-GhostCategory\"}>Category</span>))\r\n                  )}\r\n                </div>\r\n                \r\n                <div className={\"FlarumBlog-Article-Post\"}>\r\n                  {/* Article name */}\r\n                  <h3 className={this.loading ? 'FlarumBlog-Article-GhostTitle' : null}>\r\n                    {this.article ? this.article.title() : 'Ghost title'} \r\n                    {this.article && this.article.isHidden() && `(${app.translator.trans('v17development-flarum-blog.forum.hidden')})`}\r\n                  </h3>\r\n                  \r\n                  {this.loading && [0, 1, 2].map(() => (\r\n                    <div>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\r\n                      <p>&nbsp;</p>\r\n                    </div>\r\n                  ))}\r\n\r\n                  <div className={\"Post-body\"}>\r\n                    {!this.loading && this.article.blogMeta() && this.article.blogMeta().isPendingReview() == true && (\r\n                      <blockquote class=\"uncited\" style={{ fontSize: '16px' }}><div><span className={\"far fa-clock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')}</div></blockquote>\r\n                    )}\r\n\r\n                    {!this.loading && articlePost && m.trust(articlePost.contentHtml())}\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className={\"FlarumBlog-Article-Comments\"}>\r\n                <h4>{app.translator.trans('v17development-flarum-blog.forum.comment_section.comments')} ({this.article ? (this.article.commentCount() - 1) : 0})</h4>\r\n                {/* Locked */}\r\n                {!this.loading && this.article.isLocked && this.article.isLocked() && (\r\n                  <div className={\"Post-body\"}>\r\n                    <blockquote class=\"uncited\"><div><span className={\"far fa-lock\"} style={{ marginRight: '5px' }} /> {app.translator.trans('v17development-flarum-blog.forum.comment_section.locked')}</div></blockquote>\r\n                  </div>\r\n                )}\r\n\r\n                {!this.loading && this.stream && this.stream.render()}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={\"FlarumBlog-Article-Author\"}>\r\n              <div className={\"FlarumBlog-Article-Author-Info\"}>\r\n                <div className={`FlarumBlog-Article-Author-background ${this.loading ? 'FlarumBlog-Author-Ghost' : ''}`} style={{ backgroundColor: this.article && this.article.user() ? this.article && this.article.user().color() : null }} />\r\n\r\n                <div className={\"FlarumBlog-Article-Author-Avatar\"}>{this.article && this.article.user() ? avatar(this.article.user()) : <span className={\"Avatar FlarumBlog-Author-Ghost\"} />}</div>\r\n\r\n                {this.article && this.article.user() && (\r\n                  <div style={{ padding: '0 20px 20px' }}>\r\n                    <span className={\"FlarumBlog-Article-Author-Name\"}>{this.article.user().displayName()}</span>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio\"}>{this.article.user().bio()}</p>\r\n                  </div>\r\n                )}\r\n\r\n                {this.loading && (\r\n                  <div>\r\n                    <span className={\"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"}>&nbsp;</span>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                    <p className={\"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"}>&nbsp;</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <BlogCategories />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  positionChanged(startNumber, endNumber) {\r\n    const article = this.article;\r\n\r\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\r\n      article.save({ lastReadPostNumber: endNumber });\r\n      m.redraw();\r\n    }\r\n\r\n  }\r\n}","import DiscussionComposer from 'flarum/components/DiscussionComposer';\r\n\r\nexport default class BlogComposer extends DiscussionComposer {\r\n  onsubmit() {\r\n    this.loading = true;\r\n\r\n    const data = this.data();\r\n\r\n    app.store.createRecord('discussions').save(data).then(\r\n        article => {\r\n            app.composer.hide();\r\n            m.route(app.route('blogArticle', { id: article.id() + '-' + article.slug() }));\r\n        },\r\n        this.loaded.bind(this)\r\n    );\r\n  }\r\n}\r\n","export default function tooltip(element) {\r\n  $(element).tooltip();\r\n}","import Page from 'flarum/components/Page';\r\nimport Button from 'flarum/components/Button';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\nimport BlogCategories from '../components/BlogCategories';\r\nimport BlogComposer from '../utils/BlogComposer';\r\nimport tooltip from '../utils/tooltip';\r\n\r\nexport default class BlogOverview extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    app.setTitle(app.translator.trans('v17development-flarum-blog.forum.blog'));\r\n\r\n    this.bodyClass = 'BlogOverviewPage';\r\n\r\n    this.isLoading = true;\r\n    this.featuredPosts = [];\r\n    this.posts = [];\r\n    this.hasMore = null;\r\n\r\n    // Send history push\r\n    app.history.push('blog');\r\n\r\n    this.loadBlogOverview();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogOverview() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store.find('discussions', {\r\n        filter: {\r\n          q: `is:blog${m.route.param('slug') ? ` tag:${m.route.param('slug')}` : ''}`\r\n        }\r\n      })\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  // Show blog posts\r\n  show(articles) {\r\n    if(articles.length === 0) {\r\n      this.isLoading = false;\r\n      m.lazyRedraw();\r\n      \r\n      return;\r\n    }\r\n\r\n    this.featuredPosts = articles.slice(0, 3);\r\n    this.posts = articles.length >= 4 ? articles.slice(3, articles.length) : [];\r\n\r\n    this.isLoading = false;\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  title() {\r\n    if(!m.route.param('slug')) {\r\n      return <h2>{app.translator.trans('v17development-flarum-blog.forum.recent_posts')}</h2>;\r\n    }\r\n\r\n    const tag = app.store.all('tags').filter(tag => tag.slug() === m.route.param('slug'));\r\n\r\n    return (\r\n      <h2>\r\n        {tag && tag[0] && tag[0].name()}\r\n        <small> - <a href={app.route(\"blog\")} config={m.route}>{app.translator.trans('v17development-flarum-blog.forum.return_to_overview')}</a></small>\r\n      </h2>\r\n    );\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className={\"FlarumBlogOverview\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"BlogFeatured\"}>\r\n            {app.forum.attribute('canWriteBlogPosts') && (\r\n              <Button \r\n                className={\"Button FlarumBlogWrite\"}\r\n                onclick={() => this.newArticle()}\r\n                icon={\"fas fa-pencil\"}\r\n                >\r\n                {app.translator.trans('v17development-flarum-blog.forum.compose.write_article')}\r\n              </Button>\r\n            )}\r\n\r\n            {this.title()}\r\n\r\n            <div style={{ clear: 'both' }} />\r\n\r\n            <div className={\"BlogFeatured-list\"}>\r\n              {/* Ghost data */}\r\n              {this.isLoading && [0, 1, 2].map(() => (\r\n                <div className={\"BlogFeatured-list-item BlogFeatured-list-item-ghost\"}>\r\n                  <div className={\"BlogFeatured-list-item-details\"}>\r\n                    <h4>&nbsp;</h4>\r\n\r\n                    <div className={\"data\"}>\r\n                      <span><i className={\"far fa-wave\"} /></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              {!this.isLoading && this.featuredPosts.length >= 0 && this.featuredPosts.map((article) => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const blogTag = article.tags() ? article.tags().filter(tag => tag.isChild()) : [];\r\n\r\n                return (\r\n                  <a \r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={\"BlogFeatured-list-item FlarumBlog-default-image\"} \r\n                    style={{ backgroundImage: blogImage }}\r\n                    config={m.route}\r\n                    >\r\n                    <div className={\"BlogFeatured-list-item-top\"}>\r\n                      {blogTag[0] && (\r\n                        <span>{blogTag[0].name()}</span>\r\n                      )}\r\n                      {article.isSticky() && (\r\n                        <span><i className={\"fas fa-thumbtack\"} /></span>\r\n                      )}\r\n                      {((article.blogMeta() && article.blogMeta().isPendingReview() == true) || article.isHidden()) && (\r\n                        <span><i className={\"fas fa-eye-slash\"} /></span>\r\n                      )}\r\n                      {article.blogMeta() && article.blogMeta().isPendingReview() == true && (\r\n                        <span title={app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')} config={tooltip.bind(this)} data-placement={\"bottom\"}><i className={\"far fa-clock\"} /> {app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review_title')}</span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className={\"BlogFeatured-list-item-details\"}>\r\n                      <h4>{article.title()}</h4>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={\"BlogScrubber\"}>\r\n            <div className={\"BlogList\"}>\r\n              {this.isLoading && [false, false, true, false].map((state) => {\r\n                return (\r\n                  <div className={`BlogList-item BlogList-item-${state === true ? 'sized' : 'default'} BlogList-item-ghost`}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>&nbsp;</h4>\r\n                      <p>&nbsp;</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-wave\"} /></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.posts.length >= 1 && this.posts.map(article => {\r\n                const blogImage = article.blogMeta() && article.blogMeta().featuredImage() ? `url(${article.blogMeta().featuredImage()})` : null;\r\n                const isSized = article.blogMeta() && article.blogMeta().isSized();\r\n                const summary = article.blogMeta() && article.blogMeta().summary() ? article.blogMeta().summary() : \"\";\r\n                \r\n                return (\r\n                  <a\r\n                    href={app.route(\"blogArticle\", { id: `${article.id()}-${article.slug()}` })} \r\n                    className={`BlogList-item BlogList-item-${isSized ? 'sized' : 'default'}`}\r\n                    config={m.route}>\r\n                    <div className={\"BlogList-item-photo FlarumBlog-default-image\"} style={{ backgroundImage: blogImage }}></div>\r\n                    <div className={\"BlogList-item-content\"}>\r\n                      <h4>\r\n                        {article.title()}\r\n                        {((article.blogMeta() && article.blogMeta().isPendingReview() == true) || article.isHidden()) && (\r\n                          <i className={\"fas fa-eye-slash\"} />\r\n                        )}\r\n                        {article.blogMeta() && article.blogMeta().isPendingReview() == true && (\r\n                          <i className={\"far fa-clock\"} title={app.translator.trans('v17development-flarum-blog.forum.review_article.pending_review')} config={tooltip.bind(this)} />\r\n                        )}\r\n                      </h4>\r\n                      <p>{summary}</p>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span><i className={\"far fa-clock\"} /> {humanTime(article.createdAt())}</span>  \r\n                        <span><i className={\"far fa-user\"} /> {article.user() ? article.user().displayName() : '[Deleted]'}</span>\r\n                        <span><i className={\"far fa-comment\"} /> {article.commentCount()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                )\r\n              })}\r\n\r\n              {!this.isLoading && this.featuredPosts.length > 0 && this.posts.length === 0 && (\r\n                <p className={\"FlarumBlog-reached-end\"}>{app.translator.trans('v17development-flarum-blog.forum.no_more_posts')}</p>\r\n              )}\r\n\r\n              {!this.isLoading && this.featuredPosts.length === 0 && this.posts.length === 0 && (\r\n                <p className={\"FlarumBlog-reached-end\"}>{app.translator.trans('v17development-flarum-blog.forum.category_empty')}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className={\"Sidebar\"}>\r\n              <BlogCategories />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  newArticle() {\r\n    const component = new BlogComposer({\r\n        user: app.session.user\r\n    });\r\n\r\n    let tags = [];\r\n\r\n    app.forum.attribute('blogTags').forEach(tagId => {\r\n      const tag = app.store.getById('tags', tagId);\r\n      \r\n      if(tags.length === 0 && !tag.isChild()) {\r\n        tags.push(tag);\r\n      }\r\n    });\r\n\r\n    // Update tags\r\n    component.tags = tags;\r\n\r\n    app.composer.load(component);\r\n    app.composer.show();\r\n  }\r\n}","import IndexPage from 'flarum/components/IndexPage';\r\nimport DiscussionPage from 'flarum/components/DiscussionPage';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport { extend, override } from 'flarum/extend';\r\n\r\nexport default function() {\r\n  // Redirect tag to blog category\r\n  extend(IndexPage.prototype, 'config', function() {\r\n    const tag = this.currentTag();\r\n    const tagRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'tags_only';\r\n\r\n    // Only trigger when it's a tag page and the redirects are enabled\r\n    if(tag && tagRedirectEnabled) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      // Tag is inside list\r\n      if(blogTags.indexOf(tag.id()) >= 0 || (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)) {\r\n        m.route(app.route('blog'));\r\n      }\r\n    }\r\n  });\r\n\r\n  // Redirect discussion to blog article\r\n  override(DiscussionPage.prototype, 'view', function(original) {\r\n    const discussionRedirectEnabled = app.forum.attribute('blogRedirectsEnabled') === 'both' || app.forum.attribute('blogRedirectsEnabled') === 'discussions_only';\r\n    if(discussionRedirectEnabled && this.discussion && this.discussion && this.discussion.tags().length > 0) {\r\n      const blogTags = app.forum.attribute('blogTags');\r\n\r\n      const foundTags = this.discussion.tags().filter(tag => {\r\n        return blogTags.indexOf(tag.id()) >= 0 ||  (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\r\n      });\r\n\r\n      // Only redirect if the discussion has blog tags\r\n      if(foundTags.length > 0) {\r\n        // Redirect to discussion\r\n        const url = app.route('blogArticle', {\r\n          id: `${this.discussion.id()}-${this.discussion.slug()}`\r\n        });\r\n\r\n        document.location.href = url;\r\n\r\n        return (\r\n          <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n            <LoadingIndicator size={\"large\"} />\r\n            \r\n            <h2 style={{ marginTop: '40px' }}>{app.translator.trans('v17development-flarum-blog.forum.utils.redirect.title')}</h2>\r\n            {app.translator.trans('v17development-flarum-blog.forum.utils.redirect.link', {\r\n              a: <a href={url} />\r\n            })}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return original();\r\n  });\r\n}","import Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class BlogMeta extends mixin(Model, {\r\n    discussion: Model.hasOne('discussion'),\r\n    featuredImage: Model.attribute('featuredImage'),\r\n    summary: Model.attribute('summary'),\r\n    isFeatured: Model.attribute('isFeatured'),\r\n    isSized: Model.attribute('isSized'),\r\n    isPendingReview: Model.attribute('isPendingReview'),\r\n}) {}","import { extend } from 'flarum/extend';\r\nimport TagsPage from 'flarum/tags/components/TagsPage';\r\n\r\nexport default function extendTagOverview() {\r\n    extend(TagsPage.prototype, 'view', function(markup) {\r\n        if(app.forum.attribute('blogHideTags') == false) return markup;\r\n        \r\n        // Get knowledge base tag ID's\r\n        const knowledgeBaseTags = app.forum.attribute('blogTags') || [];\r\n\r\n        // Get tiles\r\n        let tag_tiles = markup.children[1].children[1].children[0].children;\r\n\r\n        // Map through the tiles and remove tiles that are part of the knowledge base \r\n        markup.children[1].children[1].children[0].children = tag_tiles.map((tile, i) => {\r\n            return knowledgeBaseTags.indexOf(this.tags[i].id()) >= 0 ? null : tile;\r\n        });\r\n\r\n        return markup;\r\n    });\r\n}\r\n","import BlogItem from \"./pages/BlogItem\";\r\nimport Model from 'flarum/Model';\r\nimport Discussion from 'flarum/models/Discussion';\r\n\r\nimport BlogOverview from \"./pages/BlogOverview\";\r\nimport redirector from \"./utils/redirector\";\r\nimport BlogMeta from \"../common/Models/BlogMeta\";\r\nimport extendTagOverview from \"./utils/extendTagOverview\";\r\n\r\n// Register Flarum Blog\r\napp.initializers.add('v17development-flarum-blog', app => {\r\n  app.routes.blog = { path: '/blog', component: BlogOverview.component() };\r\n  \r\n  app.routes.blogCategory = { path: '/blog/category/:slug', component: BlogOverview.component() };\r\n\r\n  app.routes.blogArticle = { path: '/blog/:id', component: BlogItem.component() };\r\n\r\n  app.store.models.blogMeta = BlogMeta;\r\n\r\n  Discussion.prototype.blogMeta = Model.hasOne('blogMeta');\r\n\r\n  // Redirect discussions/tags to their blog post/overview\r\n  redirector();\r\n\r\n  // Extend tag overview.\r\n  // Hide tags which are used as blog category\r\n  extendTagOverview();\r\n});"],"sourceRoot":""}