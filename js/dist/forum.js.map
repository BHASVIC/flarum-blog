{"version":3,"sources":["webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/Component']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Link']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Switch']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Alert']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/Stream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Dropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/extractText']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/listItems']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/CommentPost']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/PostStream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['states/PostStreamState']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/avatar']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/SelectDropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/fullTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['models/Discussion']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/mixin']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/ComposerBody']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/TextEditor']\"","webpack://@v17development/flarum-blog/external \"flarum.core\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/LinkButton']\"","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogAuthor.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/./src/forum/components/ForumNav.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogItemSidebar.js","webpack://@v17development/flarum-blog/./src/forum/utils/tooltip.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/Language.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/LanguageDropdown.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/./src/forum/components/ArticleSubscription.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/./src/forum/utils/extendTagOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/discussionRouting.js","webpack://@v17development/flarum-blog/./src/forum/components/Composer/ComposerPreview.js","webpack://@v17development/flarum-blog/./src/forum/components/Composer/Composer.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogComposer.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@v17development/flarum-blog/./src/forum/utils/addSidebarNav.js","webpack://@v17development/flarum-blog/./src/forum/index.js","webpack://@v17development/flarum-blog/./src/forum/compat.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","flarum","core","compat","BlogPostSettingsModal","oninit","vnode","this","attrs","article","meta","blogMeta","app","store","createRecord","isNew","exists","summary","Stream","featuredImage","isFeatured","isSized","isPendingReview","className","title","content","fields","toArray","items","ItemList","add","style","maxWidth","minWidth","width","minHeight","bidi","placeholder","type","src","alt","marginTop","Switch","component","state","onchange","val","fontWeight","Button","loading","submitData","relationships","isComposer","discussion","onsubmit","e","preventDefault","pushData","attributes","hide","save","then","redraw","response","handleErrors","Modal","RenameArticleModal","redirect","translator","trans","onChange","url","slug","route","set","window","history","replaceState","document","BlogPostController","init","loadedPost","view","buttons","LanguageDiscussionModal","extensions","components","canRename","push","onclick","modal","show","icon","articlePost","firstPost","getById","firstPostId","disabled","canEdit","composer","load","EditPostComposer","post","canTag","TagDiscussionModal","forum","attribute","alerts","Alert","canChangeLanguage","canLock","DiscussionControls","lockAction","isLocked","canHide","isHidden","restoreAction","canDelete","confirm","extractText","getCurrent","previous","back","hideAction","Dropdown","label","buttonClassName","menuClassName","onshow","find","id","Component","BlogAuthor","author","user","backgroundColor","color","href","username","avatar","displayName","bio","listItems","BlogCategories","blogCategories","map","tagId","tag","tags","showSubTags","length","param","all","forEach","_tag","isChild","parent","categoryItem","ForumNav","navItems","IndexPage","screen","remove","BlogItemSidebar","itemlist","tooltip","element","$","Language","languages","options","reduce","lang","code","extra","language","uppercase","toUpperCase","LanguageDropdown","selected","keys","active","BlogOverview","setTitle","bodyClass","isLoading","featuredPosts","posts","hasMore","isLoadingMore","currentSelectedLanguage","locale","loadBlogOverview","preloadBlogOverview","preloadedApiDocument","setTimeout","reloadData","q","filter","sort","articles","payload","links","next","slice","loadMore","replace","data","defaultImage","newArticle","location","pathname","clear","blogImage","blogTag","backgroundImage","isSticky","config","data-placement","humanTime","createdAt","commentCount","blogTags","indexOf","currentCategory","getBy","join","undefined","Page","ArticleSubscription","currentSubscriptionState","subscription","notifyEmail","session","preferences","notifyTooltip","saveSubscription","oncreate","dom","placement","BlogItem","near","found","loadBlogItem","split","includedPosts","included","articleId","record","a","b","stream","PostStreamState","goToNumber","matches","class","opacity","fullTime","fontSize","marginRight","PostStream","onPositionChange","positionChanged","startNumber","endNumber","lastReadPostNumber","extend","currentTag","tagRedirectEnabled","override","DiscussionPage","original","BlogMeta","mixin","Model","hasOne","extendTagOverview","TagsPage","markup","knowledgeBaseTags","tag_tiles","children","tile","original_discussion_route","shouldRedirect","ComposerPreview","s9e","TextFormatter","preview","Composer","previewContent","hasContent","TextEditor","submitLabel","jumpToPreview","ComposerBody","BlogComposer","articleLanguage","tagList","Array","isArray","foundTag","isSaving","openTagsModal","selectedTags","openNameArticleModal","openBlogSettings","cursor","originalContent","alert","_extends","assign","target","arguments","source","apply","addSidebarNav","initializers","routes","blog","path","blogCategory","blogComposer","blogArticle","models","Discussion","redirector","discussionRouting"],"mappings":"2BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,I,+BClFtC,SAASC,EAAgBvB,EAAGqB,GAMzC,OALAE,EAAkBtB,OAAOuB,gBAAkB,SAAyBxB,EAAGqB,GAErE,OADArB,EAAEyB,UAAYJ,EACPrB,IAGcA,EAAGqB,GCLb,SAASK,EAAeC,EAAUC,GAC/CD,EAASR,UAAYlB,OAAOY,OAAOe,EAAWT,WAC9CQ,EAASR,UAAUU,YAAcF,EACjC,EAAeA,EAAUC,G,iDCJ3BtC,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,sB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,qB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,oB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,sB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAe,Q,cCA5C1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAc,O,cCA3C1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,qB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,mB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,yB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,iB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,qB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,oB,eCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,uC,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,wB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,sB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,sB,eCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,6B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,sB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,2B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,0B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,2B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,gC,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,mB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,8B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,qB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,sB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,8B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,gB,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,6B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,4B,cCApC1C,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,0B,cCApC1C,EAAOD,QAAUyC,OAAOC,M,cCAxBzC,EAAOD,QAAUyC,OAAOC,KAAKC,OAAO,0B,4RCMfC,E,0GACnBC,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAETC,KAAKC,MAAMC,QACbF,KAAKG,KACHH,KAAKC,MAAMC,SAAWF,KAAKC,MAAMC,QAAQE,WACrCJ,KAAKC,MAAMC,QAAQE,WACnBC,IAAIC,MAAMC,aAAa,YAE7BP,KAAKG,KAAOH,KAAKC,MAAME,KACnBH,KAAKC,MAAME,KACXE,IAAIC,MAAMC,aAAa,YAG7BP,KAAKQ,OAASR,KAAKG,KAAKM,OAExBT,KAAKU,QAAUC,IAAOX,KAAKG,KAAKO,WAAa,IAE7CV,KAAKY,cAAgBD,IAAOX,KAAKG,KAAKS,iBAAmB,IAEzDZ,KAAKa,WAAaF,IAAOX,KAAKG,KAAKU,eAAgB,GACnDb,KAAKc,QAAUH,IAAOX,KAAKG,KAAKW,YAAa,GAC7Cd,KAAKe,gBAAkBJ,IAAOX,KAAKG,KAAKY,oBAAqB,I,EAG/DC,UAAA,WACE,MAAO,8B,EAGTC,MAAA,WACE,MAAO,sB,EAGTC,QAAA,WACE,OACE,SAAKF,UAAU,cACb,SAAKA,UAAU,QAAQhB,KAAKmB,SAASC,a,EAK3CD,OAAA,WAAS,WACDE,EAAQ,IAAIC,IAwFlB,OAtFAD,EAAME,IACJ,UACA,SAAKP,UAAU,cACb,mCACA,cACEA,UAAU,cACVQ,MAAO,CACLC,SAAU,OACVC,SAAU,OACVC,MAAO,OACPC,UAAW,SAEbC,KAAM7B,KAAKU,QACXoB,YAAa,2BAGf,6GAKF,IAGFT,EAAME,IACJ,QACA,SAAKP,UAAU,cACb,qCACA,WACEe,KAAK,OACLf,UAAU,cACVa,KAAM7B,KAAKY,cACXkB,YAAa,aAGf,mEAEyB,IAAxB9B,KAAKY,iBACJ,SACEoB,IAAKhC,KAAKY,gBACVqB,IAAK,gBACLhB,MAAO,kBACPU,MAAO,OACPH,MAAO,CAAEU,UAAW,WAI1B,IAGFb,EAAME,IACJ,QACA,SAAKP,UAAU,cACZmB,IAAOC,UACN,CACEC,MAAyB,GAAlBrC,KAAKc,UACZwB,SAAU,SAACC,GACT,EAAKzB,QAAQyB,KAGjB,CACE,+BACA,SAAKvB,UAAU,WAAWQ,MAAO,CAAEgB,WAAY,MAA/C,6DAML,IAGHnB,EAAME,IACJ,SACA,SAAKP,UAAU,cACZyB,IAAOL,UACN,CACEL,KAAM,SACNf,UAAW,2CACX0B,QAAS1C,KAAK0C,SAEhB,YAGH,IAGIrB,G,EAGTsB,WAAA,WACE,MAAO,CACLjC,QAASV,KAAKU,UACdE,cAAeZ,KAAKY,gBACpBC,WAAYb,KAAKa,aACjBC,QAASd,KAAKc,UACdC,gBAAiBf,KAAKe,kBACtB6B,cACE5C,KAAKQ,QAAUR,KAAKC,MAAM4C,WACtB,CACEC,WAAY9C,KAAKC,MAAMC,SAEzB,O,EAIV6C,SAAA,SAASC,GAAG,WAIV,GAHAA,EAAEC,iBAGEjD,KAAKC,MAAM8C,SAUb,OARA/C,KAAKG,KAAK+C,SAAS,CACjBC,WAAYnD,KAAK2C,eAInB3C,KAAKC,MAAM8C,SAAS/C,KAAKG,WAEzBH,KAAKoD,OAIPpD,KAAK0C,SAAU,EAEf1C,KAAKG,KAAKkD,KAAKrD,KAAK2C,cAAcW,MAChC,WACM,EAAKrD,MAAMC,SACb,EAAKD,MAAMC,QAAQgD,SAAS,CAC1BN,cAAe,CACbxC,SAAU,EAAKD,QAKrB,EAAKiD,OACL7F,EAAEgG,YAEJ,SAACC,GACC,EAAKd,SAAU,EACf,EAAKe,aAAaD,O,GAxLyBE,K,kCCD9BC,E,0GACnB7D,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbC,KAAKE,QAAUF,KAAKC,MAAMC,QAE1BF,KAAKtC,KAAOiD,IAAOX,KAAKE,QAAQe,SAAW,IAE3CjB,KAAK4D,SAAW5D,KAAKC,MAAM2D,U,EAG7B5C,UAAA,WACE,MAAO,8B,EAGTC,MAAA,WACE,OAAOZ,IAAIwD,WAAWC,MACpB,0D,EAIJ5C,QAAA,WACE,OACE,SAAKF,UAAU,cACb,SAAKA,UAAU,QAAQhB,KAAKmB,SAASC,a,EAK3CD,OAAA,WACE,IAAME,EAAQ,IAAIC,IAqClB,OAnCAD,EAAME,IACJ,OACA,SAAKP,UAAU,cACb,eACGX,IAAIwD,WAAWC,MACd,kDAFJ,KAMA,WACE9C,UAAU,cACVc,YAAazB,IAAIwD,WAAWC,MAC1B,kDAEFjC,KAAM7B,KAAKtC,QAGf,IAGF2D,EAAME,IACJ,SACA,SAAKP,UAAU,cACZyB,IAAOL,UACN,CACEL,KAAM,SACNf,UAAW,2CACX0B,QAAS1C,KAAK0C,SAEhB,YAGH,IAGIrB,G,EAGTsB,WAAA,WACE,MAAO,CACL1B,MAAOjB,KAAKtC,S,EAIhBqF,SAAA,SAASC,GAAG,WAMV,GALAA,EAAEC,iBAEFjD,KAAK0C,SAAU,EAGX1C,KAAKC,MAAM8D,SAIb,OAHA/D,KAAKC,MAAM8D,SAAS/D,KAAKtC,aACzBsC,KAAKoD,OAKPpD,KAAKE,QACFmD,KAAK,CACJpC,MAAOjB,KAAKtC,SAEb4F,MACC,WAIE,GAHA,EAAKF,OAGD,EAAKQ,SAAU,CACjB,IAAMI,EAAM,SAAS,EAAK9D,QAAQ+D,OAElC1G,EAAE2G,MAAMC,IAAIH,GAAK,GACjBI,OAAOC,QAAQC,aAAa,KAAMC,SAAStD,MAAO+C,OAGtD,SAACR,GACC,EAAKd,SAAU,EACf,EAAKe,aAAaD,O,GA3GoBE,KCM3Bc,E,0GACnBC,KAAA,WACEzE,KAAK0E,YAAa,G,EAGpBC,KAAA,WAAO,WACCzE,EAAUF,KAAKC,MAAMC,QACvB0E,EAAU,GAGRC,EACJnF,OAAOoF,WAAW,iCAEhB,IADKpF,OAAOoF,WAAW,2BAA2BC,WAEhDrF,OAAOoF,WAAW,2BAA2BC,WAC1CF,wBACH,KAGF3E,EAAQ8E,aACVJ,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACXkE,QAAS,kBAAM7E,IAAI8E,MAAMC,KAAKzB,EAAoB,CAAEzD,aACpDmF,KAAM,qBAERhF,IAAIwD,WAAWC,MACb,2DAMR,IAAMwB,EAAcpF,EAAQqF,YACxBrF,EAAQqF,YACRlF,IAAIC,MAAMkF,QAAQ,QAAStF,EAAQuF,eAiNvC,OA9MAb,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACX0E,UAAWJ,IAAgBA,EAAYK,UACvCT,QAAS,WACP7E,IAAIuF,SAASC,KAAKC,IAAkB,CAAEC,KAAMT,IAC5CjF,IAAIuF,SAASR,QAEfC,KAAM,eAERhF,IAAIwD,WAAWC,MACb,yDAMNc,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACXkE,QAAS,kBAAM7E,IAAI8E,MAAMC,KAAKvF,EAAuB,CAAEK,aACvDmF,KAAM,eAERhF,IAAIwD,WAAWC,MACb,6DAMF5D,EAAQ8F,UACVpB,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACXkE,QAAS,kBACP7E,IAAI8E,MAAMC,KAAKa,IAAoB,CAAEnD,WAAY5C,KACnDmF,KAAM,cAERhF,IAAIwD,WAAWC,MACb,4DAOJ5D,EAAQE,YAAcF,EAAQE,WAAWW,oBAC3C6D,EAAQK,KAAK,QAAIjE,UAAU,wBAE3B4D,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACX0E,UAAWrF,IAAI6F,MAAMC,UAAU,uBAC/BjB,QAAS,WACPhF,EACGE,WACAiD,KAAK,CACJtC,iBAAiB,IAElBuC,MACC,WACEjD,IAAI+F,OAAOhB,KACTiB,IACA,CAAEtE,KAAM,WACR1B,IAAIwD,WAAWC,MACb,gFAIN,SAACN,GACC,EAAKd,SAAU,EACf,EAAKe,aAAaD,OAI1B6B,KAAM,oBAERhF,IAAIwD,WAAWC,MACb,sEAQN5D,EAAQoG,mBACRpG,EAAQoG,qBACRzB,GAEAD,EAAQK,KACNxC,IAAOL,UACL,CACEiD,KAAM,eACNH,QAAS,kBACP7E,IAAI8E,MAAMC,KAAKP,EAAyB,CAAE/B,WAAY5C,MAE1DG,IAAIwD,WAAWC,MACb,8EAMRc,EAAQK,KAAK,QAAIjE,UAAU,wBAGvBd,EAAQqG,WACV3B,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACXkE,QAASsB,IAAmBC,WAAW9H,KAAKuB,GAC5CmF,KAAM,QACJnF,EAAQwG,WAAa,cAAgB,qBAGzCxG,EAAQwG,WACJrG,IAAIwD,WAAWC,MACb,0DAEFzD,IAAIwD,WAAWC,MACb,6DAOR5D,EAAQyG,YAENzG,EAAQ0G,YAEVhC,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACXkE,QAASsB,IAAmBK,cAAclI,KAAKuB,GAC/CmF,KAAM,cAERhF,IAAIwD,WAAWC,MACb,4DAMF5D,EAAQ4G,aACVlC,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACXkE,QAAS,WAEP,GACE6B,QACEC,IACE3G,IAAIwD,WAAWC,MACb,wDAcN,MARsC,gBAAlCzD,IAAIgE,QAAQ4C,aAAavJ,OACvB2C,IAAI6G,SACN7G,IAAIgE,QAAQ8C,OAEZ5J,EAAE2G,MAAMC,IAAI9D,IAAI6D,MAAM,UAInBhE,EAAO,SAAUoD,MAAK,WAC3B/F,EAAEgG,aAIR8B,KAAM,oBAERhF,IAAIwD,WAAWC,MACb,4DAORc,EAAQK,KACNxC,IAAOL,UACL,CACEpB,UAAW,SACXkE,QAASsB,IAAmBY,WAAWzI,KAAKuB,GAC5CmF,KAAM,oBAERhF,IAAIwD,WAAWC,MACb,0DAQR,SAAK9C,UAAW,0CACd,SAAKA,UAAW,4CACbqG,IAASjF,UACR,CACEiD,KAAM,aACNiC,MAAO,SACPC,gBAAiB,SACjBC,cAAe,uBACfC,OAAQ,YAEFnC,GAAgBA,EAAYK,WAAc,EAAKjB,aACjD,EAAKA,YAAa,EAClBrE,IAAIC,MACDoH,KACC,QACAxH,EAAQqF,YACJrF,EAAQqF,YAAYoC,KACpBzH,EAAQuF,eAEbnC,MAAK,eAPR,OAQS,eACNA,MAAK,kBAAM/F,EAAEgG,eAItBqB,M,GA/QoCgD,K,kDCL3BC,E,0GACnBlD,KAAA,WACE,IAAMmD,EAAU9H,KAAKC,MAAMyC,QAIvB,KAHA1C,KAAKC,MAAMC,QACTF,KAAKC,MAAMC,QAAQ6H,OACnB/H,KAAKC,MAAM8H,KAGjB,OACE,SAAK/G,UAAW,6BACd,SACEA,UAAS,yCACPhB,KAAKC,MAAMyC,QAAU,0BAA4B,IAEnDlB,MAAO,CACLwG,gBAAiBF,GAAUA,EAAOG,QAAUH,EAAOG,QAAU,QAIjE,SAAKjH,UAAW,oCACb8G,EACC,EAAC,IAAD,CAAMI,KAAM7H,IAAI6D,MAAM,OAAQ,CAAEiE,SAAUL,EAAOK,cAC9CC,IAAON,IAGV,UAAM9G,UAAW,oCAIpB8G,GACC,SAAK9G,UAAW,kCACd,EAAC,IAAD,CACEkH,KAAM7H,IAAI6D,MAAM,OAAQ,CAAEiE,SAAUL,EAAOK,aAC3CnH,UAAW,kCAEV8G,EAAOO,eAEV,OAAGrH,UAAW,iCACX8G,EAAOQ,KAAOR,EAAOQ,OAGxB,QAAItH,UAAW,sCACZuH,IAAUvI,KAAKqB,QAAQD,aAK7BpB,KAAKC,MAAMyC,SACV,aACE,UACE1B,UACE,0DAFJ,KAOA,OACEA,UACE,yDAFJ,KAOA,OACEA,UACE,yDAFJ,KAOA,OACEA,UACE,yDAFJ,Q,EAaVK,MAAA,WACE,OAAO,IAAIC,K,GApFyBsG,KCHnBY,E,0GACnB1I,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbC,KAAKyI,eAAiBpI,IAAI6F,MAAMC,UAAU,a,EAG5CxB,KAAA,WAAO,WACL,OACE,SAAK3D,UAAU,iCACb,YACGX,IAAIwD,WAAWC,MAAM,gDAGvB9D,KAAKyI,gBACJzI,KAAKyI,eAAeC,KAAI,SAACC,GACvB,IAAMC,EAAMvI,IAAIC,MAAMkF,QAAQ,OAAQmD,GAEtC,IAAKC,EAAK,OAAO,KAEjB,IAAMC,EAAO,GACTC,EAC6B,IAA/B,EAAKL,eAAeM,QACpBH,EAAI3E,SAAW1G,EAAE2G,MAAM8E,MAAM,QAa/B,OAVA3I,IAAIC,MAAM2I,IAAI,QAAQC,SAAQ,SAACC,GACzBA,EAAKC,WAAaD,EAAKE,WAAaT,IAClCO,EAAKlF,SAAW1G,EAAE2G,MAAM8E,MAAM,UAChCF,GAAc,GAGhBD,EAAK5D,KAAK,EAAKqE,aAAaH,QAIzBL,EAAW,CACb,EAAKQ,aAAaV,IADL,OACcC,GAC5B,EAAKS,aAAaV,Q,EAOhCU,aAAA,SAAaV,GACX,OACE,EAAC,IAAD,CACEV,KAAM7H,IAAI6D,MAAM,eAAgB,CAAED,KAAM2E,EAAI3E,SAC5CjD,UAAS,2CAA6C4H,EAAIjB,KAAjD,KACPiB,EAAIQ,WAA6D,GAAhD/I,IAAI6F,MAAMC,UAAU,yBACjC,4BACA,KAGN,UACEnF,UAA0B,KAAf4H,EAAIvD,OAAgB,8BAAgC,GAC/D7D,MAAO,CAAEwG,gBAAgC,KAAfY,EAAIvD,OAAgBuD,EAAIX,QAAU,OAE5D,OAAGjH,UAAW4H,EAAIvD,UAEnBuD,EAAIlL,S,GA7D+BkK,K,iCCCvB2B,E,0GACnB5E,KAAA,WACE,OACE,SAAK3D,UAAU,+BACb,YACGX,IAAIwD,WAAWC,MAAM,+CAExB,SAAK9C,UAAU,yBACb,EAAC,IAAD,CAAgBuG,gBAAgB,SAASvG,UAAU,oBAChDhB,KAAKwJ,WAAWpI,c,EAO3BoI,SAAA,WACE,IAAMnI,EAAQoI,IAAU1K,UAAUyK,WAOlC,MAJqB,UAAjBnJ,IAAIqJ,UACNrI,EAAMsI,OAAO,QAGRtI,G,GAxB2BuG,KCGjBgC,G,0GACnBjF,KAAA,WACE,OACE,SAAK3D,UAAW,8BACd,YAAKuH,IAAUvI,KAAKqB,QAAQD,c,EAKlCC,MAAA,WACE,IAAMwI,EAAW,IAAIvI,IAQrB,OANAuI,EAAStI,IAAI,SAAUsG,EAAWzF,UAAUpC,KAAKC,OAAQ,GAEzD4J,EAAStI,IAAI,aAAciH,EAAepG,UAAUpC,KAAKC,OAAQ,GAEjE4J,EAAStI,IAAI,MAAOgI,EAASnH,UAAUpC,KAAKC,OAAQ,GAE7C4J,G,GAlBkCjC,K,oBCP9B,SAASkC,GAAQC,GAC9BC,EAAED,GAASD,U,ICCQG,G,0GACnBnK,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbC,KAAKkK,UAAY7J,IAAIC,MAAM2I,IAAI,wBAC/BjJ,KAAKmK,QAAUnK,KAAKkK,UAAUE,QAAO,SAACxM,EAAGyM,GAOvC,OANAzM,EAAEyM,EAAKC,QACL,cACE,OAAGtJ,UAAW,iBADhB,IACoCqJ,EAAK3M,QAIpCE,IACNoC,KAAKC,MAAMsK,OAAS,K,EAGzB5F,KAAA,WAAO,MAC2B3E,KAAKC,MAA7BuK,EADH,EACGA,SAAUC,EADb,EACaA,UACZ/M,EAAO8M,EAAS9M,QAAU,GAEhC,OACE,cACE,OAAGsD,UAAW,iBADhB,IAGGyJ,EAAY/M,EAAKgN,cAAgBhN,I,GAxBJkK,KCGjB+C,G,0GACnB7K,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GACbC,KAAKkK,UAAY7J,IAAIC,MAAM2I,IAAI,wBAC/BjJ,KAAKmK,QAAUnK,KAAKkK,UAAUE,QAAO,SAACxM,EAAGyM,GAGvC,OAFAzM,EAAEyM,EAAKC,QAAU,EAAC,GAAD,CAAUE,SAAUH,IAE9BzM,IACNoC,KAAKC,MAAMsK,OAAS,K,EAGzB5F,KAAA,WAAO,WACCiG,EAAW5K,KAAKC,MAAM2K,SAEtBvJ,EAAQxD,OAAOgN,KAAK7K,KAAKmK,SAASzB,KAAI,SAAChK,GAC3C,IACMoM,EAASpM,KADIkM,GAAY,OAG/B,OAAOnI,IAAOL,UACZ,CACE0I,SACAzF,MAAMyF,GAAS,eACf5F,QAAS,kBAAM,EAAKjF,MAAMiF,QAAQxG,KAEpC,EAAKyL,QAAQzL,OAIjB,OAAO2I,IAASjF,UACd,CACEmF,gBAAiB,SACjBD,MAAOtH,KAAKmK,QAAQS,IAAa5K,KAAKmK,QAAQnK,KAAKC,MAAL,SAC9CuH,cAAe,wBAEjBnG,I,GAlCwCuG,KCIzBmD,G,0GACnBjL,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbM,IAAI2K,SAAS3K,IAAIwD,WAAWC,MAAM,0CAElC9D,KAAKiL,UAAY,mBAEjBjL,KAAKkL,WAAY,EACjBlL,KAAKmL,cAAgB,GACrBnL,KAAKoL,MAAQ,GACbpL,KAAKqL,QAAU,KACfrL,KAAKsL,eAAgB,EAErBtL,KAAKkK,UAAY7J,IAAIC,MAAM2I,IAAI,wBAE/BjJ,KAAKuL,wBAA0BhO,EAAE2G,MAAM8E,MAAM,QACzCzL,EAAE2G,MAAM8E,MAAM,QACd3I,IAAIwD,WAAW2H,OAGnBnL,IAAIgE,QAAQY,KAAK,QAEjBjF,KAAKyL,oB,EAIPA,iBAAA,WACE,IAAMC,EAAsBrL,IAAIsL,uBAE5BD,EAKFE,WAAW5L,KAAKoF,KAAKzG,KAAKqB,KAAM0L,GAAsB,GAEtD1L,KAAK6L,aAGPtO,EAAEgG,U,EAGJsI,WAAA,WACE,IAAIC,EAAI,WACNvO,EAAE2G,MAAM8E,MAAM,QAAd,QAAgCzL,EAAE2G,MAAM8E,MAAM,QAAY,IAGrC,OAAnBhJ,KAAKkK,WAAsBlK,KAAKkK,UAAUnB,QAAU,IACtD+C,GAAK,aAAa9L,KAAKuL,yBAGzBlL,IAAIC,MACDoH,KAAK,cAAe,CACnBqE,OAAQ,CACND,KAEFE,KAAM,eAEP1I,KAAKtD,KAAKoF,KAAKzG,KAAKqB,OAPvB,OAQS,WACLzC,EAAEgG,a,EAKR6B,KAAA,SAAK6G,GACH,GAAwB,IAApBA,EAASlD,OAIX,OAHA/I,KAAKkL,WAAY,OACjB3N,EAAEgG,SAMJvD,KAAKqL,QACHY,EAASC,QAAQC,OAASF,EAASC,QAAQC,MAAMC,KAC7CH,EAASC,QAAQC,MAAMC,KACvB,KAENpM,KAAKmL,cAAgBc,EAASI,MAAM,EAAG,GACvCrM,KAAKoL,MAAQa,EAASlD,QAAU,EAAIkD,EAASI,MAAM,EAAGJ,EAASlD,QAAU,GAEzE/I,KAAKkL,WAAY,EAEjB3N,EAAEgG,U,EAIJ+I,SAAA,WAAW,WACTtM,KAAKsL,eAAgB,EAErBjL,IAAIC,MACDoH,KAAK1H,KAAKqL,QAAQkB,QAAQlM,IAAI6F,MAAMC,UAAU,UAAW,KACzD7C,MAAK,SAACkJ,GACLA,EAAK9D,KAAI,SAACxI,GAAD,OAAa,EAAKkL,MAAMnG,KAAK/E,MAGtC,EAAKmL,QACHmB,EAAKN,QAAQC,OAASK,EAAKN,QAAQC,MAAMC,KACrCI,EAAKN,QAAQC,MAAMC,KACnB,QATV,OAWS,eACN9I,MAAK,WACJ,EAAKgI,eAAgB,EACrB/N,EAAEgG,a,EAIRtC,MAAA,WACE,IAAK1D,EAAE2G,MAAM8E,MAAM,QACjB,OACE,YACG3I,IAAIwD,WAAWC,MACd,kDAMR,IAAM8E,EAAMvI,IAAIC,MACb2I,IAAI,QACJ8C,QAAO,SAACnD,GAAD,OAASA,EAAI3E,SAAW1G,EAAE2G,MAAM8E,MAAM,WAEhD,OACE,YACGJ,GAAOA,EAAI,IAAMA,EAAI,GAAGlL,OACzB,eACG,IADH,IAEI,IACF,EAAC,IAAD,CAAMwK,KAAM7H,IAAI6D,MAAM,SACnB7D,IAAIwD,WAAWC,MACd,2D,EAQZa,KAAA,WAAO,WACC8H,EAAepM,IAAI6F,MAAMC,UAAU,oBAApB,OAEf9F,IAAI6F,MAAMC,UAAU,WACpB,WACA9F,IAAI6F,MAAMC,UAAU,oBAJL,IAMjB,KAEJ,OACE,SAAKnF,UAAW,sBACd,SAAKA,UAAW,aACd,SAAKA,UAAW,gBACd,SAAKA,UAAW,uBACbX,IAAI6F,MAAMC,UAAU,sBACnB,EAAC,IAAD,CACEnF,UAAW,SACXkE,QAAS,kBAAM,EAAKwH,cACpBrH,KAAM,qBAELhF,IAAIwD,WAAWC,MACd,2DAKc,OAAnB9D,KAAKkK,WAAsBlK,KAAKkK,UAAUnB,QAAU,GACnD,EAAC,GAAD,CACE6B,SAAU5K,KAAKuL,wBACfrG,QAAS,SAACsF,GACR,EAAKe,wBAA0Bf,EAE/BjN,EAAE2G,MAAMC,IAAII,SAASoI,SAASC,SAAU,CACtCvC,KAAMG,IAGR,EAAKqB,iBAMZ7L,KAAKiB,QAEN,SAAKO,MAAO,CAAEqL,MAAO,UAErB,SAAK7L,UAAW,qBAEbhB,KAAKkL,WACJ,CAAC,EAAG,EAAG,GAAGxC,KAAI,kBACZ,SACE1H,UACE,uDAGF,SAAKA,UAAW,kCACd,iBAEA,SAAKA,UAAW,QACd,cACE,OAAGA,UAAW,wBAOxBhB,KAAKkL,WACLlL,KAAKmL,cAAcpC,QAAU,GAC7B/I,KAAKmL,cAAczC,KAAI,SAACxI,GACtB,IAAM4M,EACJ5M,EAAQE,YAAcF,EAAQE,WAAWQ,gBAAzC,OACWV,EAAQE,WAAWQ,gBAD9B,IAEI6L,EACAM,EAAU7M,EAAQ2I,OACpB3I,EAAQ2I,OAAOkD,QAAO,SAACnD,GAAD,OAASA,EAAIQ,aACnC,GAEJ,OACE,EAAC,IAAD,CACElB,KAAM7H,IAAI6D,MAAM,cAAe,CAC7ByD,GAAI,GAAGzH,EAAQ+D,SAEjBjD,UACE,kDAEFQ,MAAO,CAAEwL,gBAAiBF,IAE1B,SAAK9L,UAAW,8BACb+L,EAAQ,IAAM,cAAOA,EAAQ,GAAGrP,QAChCwC,EAAQ+M,YACP,cACE,OAAGjM,UAAW,uBAGfd,EAAQE,YAC+B,GAAxCF,EAAQE,WAAWW,mBACnBb,EAAQ0G,aACR,cACE,OAAG5F,UAAW,sBAGjBd,EAAQE,YACiC,GAAxCF,EAAQE,WAAWW,mBACjB,UACEE,MAAOZ,IAAIwD,WAAWC,MACpB,kEAEFoJ,OAAQpD,GAAQnL,KAAK,GACrBwO,iBAAgB,UAEhB,OAAGnM,UAAW,iBAAmB,IAChCX,IAAIwD,WAAWC,MACd,0EAMV,SAAK9C,UAAW,kCACd,YAAKd,EAAQe,SAEb,SAAKD,UAAW,QACd,cACE,OAAGA,UAAW,iBAAmB,IAChCoM,KAAUlN,EAAQmN,cAErB,cACE,OAAGrM,UAAW,gBAAkB,IAC/Bd,EAAQ6H,OACL7H,EAAQ6H,OAAOM,cACf,aAEN,cACE,OAAGrH,UAAW,mBAAqB,IAClCd,EAAQoN,eAAiB,WAU5C,SAAKtM,UAAW,gBACd,SAAKA,UAAW,YACbhB,KAAKkL,WACJ,EAAC,GAAO,GAAO,GAAM,GAAOxC,KAAI,SAACrG,GAC/B,OACE,SACErB,UAAS,iCACG,IAAVqB,EAAiB,QAAU,WADpB,wBAIT,SACErB,UACE,iDAGJ,SAAKA,UAAW,yBACd,iBACA,gBAEA,SAAKA,UAAW,QACd,cACE,OAAGA,UAAW,wBAQ1BhB,KAAKkL,WACLlL,KAAKoL,MAAMrC,QAAU,GACrB/I,KAAKoL,MAAM1C,KAAI,SAACxI,GACd,IAAM4M,EACJ5M,EAAQE,YAAcF,EAAQE,WAAWQ,gBAAzC,OACWV,EAAQE,WAAWQ,gBAD9B,IAEI6L,EACA3L,EACJZ,EAAQE,YAAcF,EAAQE,WAAWU,UACrCJ,EACJR,EAAQE,YAAcF,EAAQE,WAAWM,UACrCR,EAAQE,WAAWM,UACnB,GAEN,OACE,EAAC,IAAD,CACEwH,KAAM7H,IAAI6D,MAAM,cAAe,CAC7ByD,GAAI,GAAGzH,EAAQ+D,SAEjBjD,UAAS,gCACPF,EAAU,QAAU,YAGtB,SACEE,UACE,+CAEFQ,MAAO,CAAEwL,gBAAiBF,KAE5B,SAAK9L,UAAW,yBACd,YACGd,EAAQe,SACNf,EAAQE,YAC+B,GAAxCF,EAAQE,WAAWW,mBACnBb,EAAQ0G,aACR,OAAG5F,UAAW,qBAEfd,EAAQE,YACiC,GAAxCF,EAAQE,WAAWW,mBACjB,OACEC,UAAW,eACXC,MAAOZ,IAAIwD,WAAWC,MACpB,kEAEFoJ,OAAQpD,GAAQnL,KAAK,MAI7B,WAAI+B,GAEJ,SAAKM,UAAW,QACd,cACE,OAAGA,UAAW,iBAAmB,IAChCoM,KAAUlN,EAAQmN,cAErB,cACE,OAAGrM,UAAW,gBAAkB,IAC/Bd,EAAQ6H,OACL7H,EAAQ6H,OAAOM,cACf,aAEN,cACE,OAAGrH,UAAW,mBAAqB,IAClCd,EAAQoN,eAAiB,UAQtCtN,KAAKkL,WACLlL,KAAKmL,cAAcpC,OAAS,GACX,OAAjB/I,KAAKqL,SACH,OAAGrK,UAAW,0BACXX,IAAIwD,WAAWC,MACd,oDAKN9D,KAAKkL,WACyB,IAA9BlL,KAAKmL,cAAcpC,QACG,IAAtB/I,KAAKoL,MAAMrC,QACT,OAAG/H,UAAW,0BACXX,IAAIwD,WAAWC,MACd,qDAKN9D,KAAKkL,WAA8B,OAAjBlL,KAAKqL,SACvB,SAAKrK,UAAW,gCACd,EAAC,IAAD,CACEA,UAAW,SACXkE,QAAS,kBAAM,EAAKoH,YACpBjH,KAAM,sBACN3C,QAAS1C,KAAKsL,eAEbjL,IAAIwD,WAAWC,MACd,kDAOV,SAAK9C,UAAW,WACd,EAAC,EAAD,MACA,EAAC,EAAD,W,EAQZ0L,WAAA,WACE,IACI7D,EAAO,GAEL0E,EAAWlN,IAAI6F,MAAMC,UAAU,YAGrC9F,IAAIC,MAAM2I,IAAI,QAAQC,SAAQ,SAACC,IAI1BA,EAAKC,WACNmE,EAASC,QAAQrE,EAAKxB,OAAS,GAE/BkB,EAAK5D,KAAKkE,MAKd,IAAMsE,EAAkBpN,IAAIC,MAAMoN,MAChC,OACA,OACAnQ,EAAE2G,MAAM8E,MAAM,SAGZyE,GACF5E,EAAK5D,KAAKwI,GAIZlQ,EAAE2G,MAAMC,IACN9D,IAAI6D,MAAM,eAAgB,CACxB2E,KAAMA,EAAKH,KAAI,SAACE,GAAD,OAASA,EAAIjB,QAAMgG,OAClCtD,KACErK,KAAKkK,UAAUnB,OAAS,EAAI/I,KAAKuL,6BAA0BqC,M,GAld3BC,K,oBCLrBC,G,0GACnBnJ,KAAA,WACE,IAAMoJ,EAA2B/N,KAAKC,MAAM6C,WAAWkL,eAGjDC,EADc5N,IAAI6N,QAAQnG,KAAKoG,cACN,qBACzBC,EAAgBpH,IACpB3G,IAAIwD,WAAWC,MACbmK,EACI,+DACA,iEAIJhN,EAAQZ,IAAIwD,WAAWC,MACzB,gEAEEuB,EAAO,cAUX,MAPiC,WAA7B0I,IACF9M,EAAQZ,IAAIwD,WAAWC,MACrB,4DAEFuB,EAAO,eAIP,EAAC,IAAD,CACErE,UAAS,2DAA6D+M,EACtE1I,KAAMA,EACNpE,MAAOmN,EACPlJ,QAASlF,KAAKqO,iBAAiB1P,KAC7BqB,KACAA,KAAKC,MAAM6C,YACiD,IAA5D,CAAC,SAAU,UAAU0K,QAAQO,GACzB,KACA,WAGL9M,I,EAKPoN,iBAAA,SAAiBvL,EAAYkL,GAC3BlL,EAAWO,KAAK,CAAE2K,kB,EAGpBM,SAAA,SAASvO,GACPiK,EAAEjK,EAAMwO,KAAKzE,QAAQ,CACnB0E,UAAW,Y,GAnDgC5G,KCO5B6G,G,0GACnB3O,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbM,IAAI2K,SAAS3K,IAAIwD,WAAWC,MAAM,0CAGlCzD,IAAIgE,QAAQY,KAAK,eAEjBjF,KAAKiL,UAAY,eAEjBjL,KAAK0O,KAAOnR,EAAE2G,MAAM8E,MAAM,SAAW,EAErChJ,KAAK0C,SAAU,EACf1C,KAAK2O,OAAQ,EACb3O,KAAKE,QAAU,KAEfF,KAAK4O,gB,EAIPA,aAAA,WACE,IAAMlD,EAAsBrL,IAAIsL,uBAE5BD,EAKFE,WAAW5L,KAAKoF,KAAKzG,KAAKqB,KAAM0L,GAAsB,GAEtDrL,IAAIC,MACDoH,KAAK,cAAenK,EAAE2G,MAAM8E,MAAM,MAAM6F,MAAM,KAAK,IACnDvL,KAAKtD,KAAKoF,KAAKzG,KAAKqB,OAFvB,OAGS,WACLzC,EAAEgG,YAIRhG,EAAEgG,U,EAIJ6B,KAAA,SAAKlF,GAEHF,KAAKE,QAAUA,EAGfG,IAAI2K,SACC9K,EAAQe,QADb,MAC0BZ,IAAIwD,WAAWC,MACrC,0CAIJ9D,KAAK0C,SAAU,EAEf,IAAIoM,EAAgB,GACpB,GAAI5O,EAAQgM,SAAWhM,EAAQgM,QAAQ6C,SAAU,CAC/C,IAAMC,EAAY9O,EAAQyH,KAE1BmH,EAAgB5O,EAAQgM,QAAQ6C,SAC7BhD,QACC,SAACkD,GAAD,MACkB,UAAhBA,EAAOlN,MACPkN,EAAOrM,eACPqM,EAAOrM,cAAcE,YACrBmM,EAAOrM,cAAcE,WAAW0J,KAAK7E,KAAOqH,KAE/CtG,KAAI,SAACuG,GAAD,OAAY5O,IAAIC,MAAMkF,QAAQ,QAASyJ,EAAOtH,OAClDqE,MAAK,SAACkD,EAAGC,GAAJ,OAAUD,EAAEvH,KAAOwH,EAAExH,QAC1B0E,MAAM,EAAG,IAGdrM,KAAKoP,OAAS,IAAIC,IAAgBnP,EAAS4O,GAGvC9O,KAAK0O,MACP1O,KAAKoP,OAAOE,WAAWtP,KAAK0O,MAAM,GAGpCnR,EAAEgG,U,EAGJoB,KAAA,WACE,IAAM8H,EAAepM,IAAI6F,MAAMC,UAAU,oBAApB,OAEf9F,IAAI6F,MAAMC,UAAU,WACpB,WACA9F,IAAI6F,MAAMC,UAAU,oBAJL,IAMjB,KACE2G,EACJ9M,KAAKE,SACLF,KAAKE,QAAQE,YACbJ,KAAKE,QAAQE,WAAWQ,gBAFxB,OAGWZ,KAAKE,QAAQE,WAAWQ,gBAHnC,IAII6L,EACFnH,EAAc,KAQlB,OANKtF,KAAK0C,SAAW1C,KAAKE,UACxBoF,EAActF,KAAKE,QAAQqF,YACvBvF,KAAKE,QAAQqF,YACblF,IAAIC,MAAMkF,QAAQ,QAASxF,KAAKE,QAAQuF,gBAI5C,SAAKzE,UAAW,kBACd,SAAKA,UAAW,aACd,SAAKA,UAAW,0BACd,EAAC,IAAD,CACEkH,KAAM7H,IAAI6D,MAAM,QAChBlD,UAAW,SACXkE,QAAS,SAAClC,GACJ3C,IAAI6G,SAASqI,QAAQxE,MACvB/H,EAAEC,iBACFoB,QAAQ8C,UAIZ,OAAGqI,MAAM,uCACT,UAAMA,MAAM,gBACTnP,IAAIwD,WAAWC,MACd,0DAKR,SAAK9C,UAAW,sBACd,SAAKA,UAAW,gCACd,SAAKA,UAAW,8BACd,SACEA,UAAS,sDACPhB,KAAK0C,QAAU,gCAAkC,IAEnDlB,MAAO,CACLwL,gBAAiBF,EACjB2C,QACEzP,KAAKE,SAAWF,KAAKE,QAAQ0G,WAAa,GAAM,QAIrD5G,KAAKE,SACJG,IAAI6N,QAAQnG,OACX1H,IAAI6N,QAAQnG,KAAKpC,WAChB3F,KAAKE,QAAQ8E,aACZhF,KAAKE,QAAQkL,SACZpL,KAAKE,QAAQkL,QAAQ,GAAGzF,YAC1B,EAAC,EAAD,CAAoBzF,QAASF,KAAKE,UAItC,SAAKc,UAAW,kCACZhB,KAAK0C,SACL1C,KAAKE,SACLF,KAAKE,QAAQ2I,QACb7I,KAAKE,QACF2I,OACAH,KAAI,SAACE,GAAD,OACH,EAAC,IAAD,CACEV,KAAM7H,IAAI6D,MAAM,eAAgB,CAAED,KAAM2E,EAAI3E,UAE3C2E,EAAIlL,WAIZsC,KAAK0C,SACJ,CAAC,EAAG,GAAGgG,KAAI,kBACT,UAAM1H,UAAW,oCAAjB,gBAMN,SAAKA,UAAW,2BAEd,QACEA,UAAS,6BACPhB,KAAK0C,QAAU,gCAAkC,KAGlD1C,KAAKE,QAAUF,KAAKE,QAAQe,QAAU,cACtCjB,KAAKE,SACJF,KAAKE,QAAQ0G,YADd,IAEKvG,IAAIwD,WAAWC,MACjB,2CAHH,KAOH,SACE9C,UAAS,mCACPhB,KAAK0C,QAAU,sCAAwC,KAGxD1C,KAAKE,QACJwP,KAAS1P,KAAKE,QAAQmN,aAEtB,oBAIHrN,KAAK0C,SACJ,CAAC,EAAG,EAAG,GAAGgG,KAAI,kBACZ,aACE,OAAG1H,UAAW,qCAAd,KAGA,OAAGA,UAAW,qCAAd,KAGA,OAAGA,UAAW,qCAAd,KAGA,qBAIJhB,KAAK0C,SACL1C,KAAKE,QAAQE,YACgC,GAA7CJ,KAAKE,QAAQE,WAAWW,mBACtB,SAAKC,UAAW,QACd,gBACEwO,MAAM,UACNhO,MAAO,CAAEmO,SAAU,SAEnB,aACE,UACE3O,UAAW,eACXQ,MAAO,CAAEoO,YAAa,SACrB,IACFvP,IAAIwD,WAAWC,MACd,sEAOV9D,KAAK0C,SAAW4C,GAChB,EAAC,IAAD,CAAaS,KAAMT,MAKzB,SAAKtE,UAAW,gCAEZhB,KAAK0C,SACL1C,KAAKE,QAAQ8N,gBACXhO,KAAKE,QAAQwG,UACZ1G,KAAKE,QAAQwG,WAAa1G,KAAKE,QAAQwG,aACxC,EAAC,GAAD,CAAqB5D,WAAY9C,KAAKE,UAG1C,YACGG,IAAIwD,WAAWC,MACd,6DACC,IAHL,IAII9D,KAAKE,QAAUF,KAAKE,QAAQoN,eAAiB,EAAI,EAJrD,MAQEtN,KAAK0C,SACL1C,KAAKE,QAAQwG,UACb1G,KAAKE,QAAQwG,YACX,SAAK1F,UAAW,aACd,gBAAYwO,MAAM,WAChB,aACE,UACExO,UAAW,cACXQ,MAAO,CAAEoO,YAAa,SACrB,IACFvP,IAAIwD,WAAWC,MACd,+DAOV9D,KAAK0C,SACL1C,KAAKE,SACL2P,IAAWzN,UAAU,CACnBU,WAAY9C,KAAKE,QACjBkP,OAAQpP,KAAKoP,OACbU,iBAAkB9P,KAAK+P,gBAAgBpR,KAAKqB,UAKpD,EAAC,GAAD,CAAiBE,QAASF,KAAKE,QAASwC,QAAS1C,KAAK0C,c,EAOhEqN,gBAAA,SAAgBC,EAAaC,GAC3B,IAAM/P,EAAUF,KAAKE,QAEjBG,IAAI6N,QAAQnG,MAAQkI,GAAa/P,EAAQgQ,sBAAwB,KACnEhQ,EAAQmD,KAAK,CAAE6M,mBAAoBD,IACnC1S,EAAEgG,W,GA5S8BsK,K,mECPvB,cAEbsC,kBAAO1G,IAAU1K,UAAW,YAAY,WACtC,IAAM6J,EAAM5I,KAAKoQ,aACXC,EAC4C,SAAhDhQ,IAAI6F,MAAMC,UAAU,yBAC4B,cAAhD9F,IAAI6F,MAAMC,UAAU,wBAGtB,GAAIyC,GAAOyH,EAAoB,CAC7B,IAAM9C,EAAWlN,IAAI6F,MAAMC,UAAU,aAInCoH,EAASC,QAAQ5E,EAAIjB,OAAS,GAC7BiB,EAAIS,UAAYkE,EAASC,QAAQ5E,EAAIS,SAAS1B,OAAS,IAExDpK,EAAE2G,MAAMC,IAAI9D,IAAI6D,MAAM,aAM5BoM,oBAASC,KAAexR,UAAW,QAAQ,SAAUyR,EAAU1N,GAK7D,IAHkD,SAAhDzC,IAAI6F,MAAMC,UAAU,yBAC4B,qBAAhD9F,IAAI6F,MAAMC,UAAU,0BAIpBrD,GACAA,GACAA,EAAW+F,OAAOE,OAAS,EAC3B,CACA,IAAMwE,EAAWlN,IAAI6F,MAAMC,UAAU,YAUrC,GARkBrD,EAAW+F,OAAOkD,QAAO,SAACnD,GAC1C,OACE2E,EAASC,QAAQ5E,EAAIjB,OAAS,GAC7BiB,EAAIS,UAAYkE,EAASC,QAAQ5E,EAAIS,SAAS1B,OAAS,KAK9CoB,OAAS,EAAG,CAExB,IAAM/E,EAAM3D,IAAI6D,MAAM,cAAe,CACnCyD,GAAI7E,EAAWmB,SAKjB,OADA1G,EAAE2G,MAAMC,IAAIH,EAAK,MAAM,GAChB,MAIX,OAAOwM,EAAS1N,O,SCzDC2N,G,gGAAiBC,GAAMC,KAAO,CACjD7N,WAAY6N,KAAMC,OAAO,cACzBhQ,cAAe+P,KAAMxK,UAAU,iBAC/BzF,QAASiQ,KAAMxK,UAAU,WACzBtF,WAAY8P,KAAMxK,UAAU,cAC5BrF,QAAS6P,KAAMxK,UAAU,WACzBpF,gBAAiB4P,KAAMxK,UAAU,sB,oBCLpB,SAAS0K,KACtBV,kBAAOW,KAAS/R,UAAW,QAAQ,SAAUgS,GAAQ,WACnD,GAA2C,GAAvC1Q,IAAI6F,MAAMC,UAAU,gBAA0B,OAAO4K,EAGzD,IAAMC,EAAoB3Q,IAAI6F,MAAMC,UAAU,aAAe,GAGzD8K,EAAYF,EAAOG,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAAGA,SAS3D,OANAH,EAAOG,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAAGA,SAAWD,EAAUvI,KAC9D,SAACyI,EAAMhU,GACL,OAAO6T,EAAkBxD,QAAQ,EAAK3E,KAAK1L,GAAGwK,OAAS,EAAI,KAAOwJ,KAI/DJ,KAGTZ,kBAAO1G,IAAU1K,UAAW,YAAY,SAAUsC,GAChD,OAA2C,GAAvChB,IAAI6F,MAAMC,UAAU,kBAEP9F,IAAI6F,MAAMC,UAAU,aAAe,IAE3C+C,SAAQ,SAACvB,GAChBtG,EAAMsI,OAAN,MAAmBhC,MALoCtG,KCzB9C,kBAEb,IAAM+P,EAA4B/Q,IAAI6D,MAAMpB,WAc5CzC,IAAI6D,MAAMpB,WAAa,SAACA,EAAY4L,GAClC,IAGI2C,GAAiB,EACrB,IAHkD,SAAhDhR,IAAI6F,MAAMC,UAAU,yBAC4B,qBAAhD9F,IAAI6F,MAAMC,UAAU,0BAEWrD,EAAW+F,OAAOE,OAAS,EAAG,CAC7D,IAAMwE,EAAWlN,IAAI6F,MAAMC,UAAU,YAEnBrD,EAAW+F,OAAOkD,QAAO,SAACnD,GAC1C,OACE2E,EAASC,QAAQ5E,EAAIjB,OAAS,GAC7BiB,EAAIS,UAAYkE,EAASC,QAAQ5E,EAAIS,SAAS1B,OAAS,KAI9CoB,OAAS,IACrBsI,GAAiB,GAGrB,OAAIA,EACKvO,EAAWoN,qBAAuB,EACrC7P,IAAI6D,MAAM,mBAAoB,CAC5ByD,GAAI7E,EAAWmB,OACfyK,KAAM5L,EAAWoN,uBAEnB7P,IAAI6D,MAAM,cAAe,CACvByD,GAAI7E,EAAWmB,SAGdmN,EAA0BtO,EAAY4L,K,wCC3C9B4C,G,0GACnB3M,KAAA,WACE,OAAO,e,EAGT2J,SAAA,SAASvO,GACP,YAAMuO,SAAN,UAAevO,GAEfwR,IAAIC,cAAcC,QAAQ1R,EAAME,MAAMiB,SAAW,GAAInB,EAAMwO,M,GARlB3G,KCGxB8J,G,0GACnB5R,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbC,KAAK2R,gBAAiB,G,EAIxBhN,KAAA,WAAO,WACCiN,EACJ5R,KAAK4F,SAASzE,OAAOD,WAAgD,KAAnClB,KAAK4F,SAASzE,OAAOD,UACnDwB,EAAU1C,KAAK0C,SAAW1C,KAAKC,MAAMyF,SAE3C,OACE,SACE1E,UAAS,yBACP0B,EAAU,+BAAiC,KAG7C,SAAK1B,UAAW,6BACd,EAAC,IAAD,CACEA,WAAYhB,KAAK2R,gBAAkB,+BACnCzM,QAAS,kBAAO,EAAKyM,gBAAiB,IAErCtR,IAAIwD,WAAWC,MACd,oDAGJ,EAAC,IAAD,CACE9C,UAAWhB,KAAK2R,gBAAkB,+BAClCzM,QAAS,kBAAO,EAAKyM,gBAAiB,IAErCtR,IAAIwD,WAAWC,MACd,oDAKN,SACE9C,UAAS,uCACPhB,KAAK2R,eAAiB,kCAAoC,KAG3D3R,KAAK2R,gBACJ,SAAK3Q,UAAW,iCACZ4Q,GACAvR,IAAIwD,WAAWC,MACb,gEAGJ,EAAC,GAAD,CAAiB5C,QAASlB,KAAK4F,SAASzE,OAAOD,aAIlD2Q,KAAWzP,UAAU,CACpB0P,YACE9R,KAAKC,MAAM6R,aACXzR,IAAIwD,WAAWC,MAAM,0CACvBhC,YAAa9B,KAAKC,MAAM6B,YACxB4D,SAAUhD,EACVkD,SAAU5F,KAAK4F,SACf6L,QAASzR,KAAK+R,eAAiB/R,KAAK+R,cAAcpT,KAAKqB,MACvDsC,SAAUtC,KAAK4F,SAASzE,OAAOD,QAC/B6B,SAAU/C,KAAK+C,SAASpE,KAAKqB,MAC7B5B,MAAO4B,KAAK4F,SAASzE,OAAOD,e,EAQtC6B,SAAA,WACM/C,KAAKC,MAAM8C,UACb/C,KAAKC,MAAM8C,Y,GA1EqBiP,MCKjBC,G,0GACnBnS,OAAA,SAAOC,GAAO,WAMZ,GALA,YAAMD,OAAN,UAAaC,GAEbM,IAAI2K,SAAS3K,IAAIwD,WAAWC,MAAM,0CAG7BzD,IAAI6F,MAAMC,UAAU,qBAAzB,CAwBA,GAlBA9F,IAAIgE,QAAQY,KAAK,gBAGjBjF,KAAKkK,UAAY7J,IAAIC,MAAM2I,IAAI,wBAG/BjJ,KAAKiL,UAAY,eAGjBjL,KAAKkS,gBAAkB3U,EAAE2G,MAAM8E,MAAM,QACjCzL,EAAE2G,MAAM8E,MAAM,QACd3I,IAAIwD,WAAW2H,OACnBxL,KAAKE,QAAUG,IAAIC,MAAMC,aAAa,eACtCP,KAAKI,SAAW,KAEhBJ,KAAK6I,KAAO,GAGRtL,EAAE2G,MAAM8E,QAAQH,KAAM,CACxB,IAAMsJ,EAAUC,MAAMC,QAAQ9U,EAAE2G,MAAM8E,QAAQH,MAC1CtL,EAAE2G,MAAM8E,QAAQH,KAChBtL,EAAE2G,MAAM8E,QAAQH,KAAKgG,MAAM,KAE3BtR,EAAE2G,MAAM8E,QAAQH,KAAKE,OAAS,GAChCoJ,EAAQjJ,SAAQ,SAACP,GACf,IAAM2J,EAAWjS,IAAIC,MAAMkF,QAAQ,OAAQmD,GAEvC2J,GACF,EAAKzJ,KAAK5D,KAAKqN,MAMvBtS,KAAKuS,UAAW,OAvCdhV,EAAE2G,MAAMC,IAAI9D,IAAI6D,MAAM,U,EA0C1BsO,cAAA,SAAcxP,GAAU,oBAAVA,MAAI,MACZA,GACFA,EAAEC,iBAGAjD,KAAKuS,UAETlS,IAAI8E,MAAMC,KAAKa,IAAoB,CACjCwM,aAAczS,KAAK6I,KACnB9F,SAAU,SAAC8F,GACT,EAAKA,KAAOA,M,EAKlB6J,qBAAA,SAAqB1P,GAAU,oBAAVA,MAAI,MACnBA,GACFA,EAAEC,iBAGAjD,KAAKuS,UAETlS,IAAI8E,MAAMC,KAAKzB,EAAoB,CACjCzD,QAASF,KAAKE,QACd6D,SAAU,SAAC9C,GACT,EAAKf,QAAQgD,SAAS,CACpBC,WAAY,CACVlC,e,EAOV0R,iBAAA,SAAiB3P,GAAG,WAClBA,EAAEC,iBAEEjD,KAAKuS,UAETlS,IAAI8E,MAAMC,KAAKvF,EAAuB,CACpCM,KAAMH,KAAKI,SACX2C,SAAU,SAAC5C,GAAD,OAAW,EAAKC,SAAWD,M,EAIzCwE,KAAA,WAAO,WACC8H,EAAepM,IAAI6F,MAAMC,UAAU,oBAApB,OAEf9F,IAAI6F,MAAMC,UAAU,WACpB,WACA9F,IAAI6F,MAAMC,UAAU,oBAJL,IAMjB,KAEE2G,EACJ9M,KAAKI,UAAYJ,KAAKI,SAASQ,gBAA/B,OACWZ,KAAKI,SAASQ,gBADzB,IAEI6L,EAEN,OACE,SAAKzL,UAAW,kBACd,SAAKA,UAAW,aACd,SAAKA,UAAW,0BACd,EAAC,IAAD,CACEkH,KAAM7H,IAAI6D,MAAM,QAChBlD,UAAW,SACX0B,QAAS1C,KAAKuS,SACdlN,KAAM,qBAEN,OAAGmK,MAAM,uCACT,UAAMA,MAAM,gBACTnP,IAAIwD,WAAWC,MACd,0DAKR,SAAK9C,UAAW,sBACd,SAAKA,UAAW,gCACd,SAAKA,UAAW,8BACd,SACEA,UAAS,oDACTQ,MAAO,CACLwL,gBAAiBF,EACjB8F,OAAQ,WAEV1N,QAAS,SAAClC,GAAD,OAAO,EAAK2P,iBAAiB3P,MAGxC,SAAKhC,UAAW,0CACd,SACEA,UAC4B,IAA1BhB,KAAKkK,UAAUnB,OACX,2CACA,0CAGc,OAAnB/I,KAAKkK,WAAsBlK,KAAKkK,UAAUnB,QAAU,GACnD,EAAC,GAAD,CACE6B,SAAU5K,KAAKkS,gBACfhN,QAAS,SAACsF,GAAD,OACN,EAAK0H,gBAAkB1H,KAK9B,EAAC,IAAD,CACExJ,UAAW,SACXkE,QAAS,SAAClC,GAAD,OAAO,EAAK2P,iBAAiB3P,IACtCqC,KAAM,oBACN3C,QAAS1C,KAAKuS,UAJhB,0BAYJ,SAAKvR,UAAW,iCACbhB,KAAK6I,KAAKH,KAAI,SAACE,GAAD,OACb,OAAGV,KAAM,IAAKhD,QAAS,SAAClC,GAAD,OAAO,EAAKwP,cAAcxP,KAC9C4F,EAAIlL,WAIT,OAAGwK,KAAM,IAAKhD,QAAS,SAAClC,GAAD,OAAO,EAAKwP,cAAcxP,KACzB,IAArBhD,KAAK6I,KAAKE,OACP1I,IAAIwD,WAAWC,MACb,6DAEFzD,IAAIwD,WAAWC,MACb,6DACC,IACP,OAAG9C,UAAW,kBAIlB,SAAKA,UAAW,2BAEd,QACEkE,QAAS,kBAAM,EAAKwN,wBACpB1R,UAAU,2BACVQ,MAAO,CAAEoR,OAAQ,YAEhB5S,KAAKE,SACNF,KAAKE,QAAQe,SACY,KAAzBjB,KAAKE,QAAQe,QACTjB,KAAKE,QAAQe,QACbZ,IAAIwD,WAAWC,MACb,sDAGN,OAAGoE,KAAM,IAAKhD,QAAS,SAAClC,GAAD,OAAOA,EAAEC,mBAC9B,OAAGjC,UAAW,kBAIlB,SAAKA,UAAU,aACb,EAAC,GAAD,CACE4E,SAAUvF,IAAIuF,SACdiN,gBAAiB,GACjBf,YAAazR,IAAIwD,WAAWC,MAC1B,0DAEFhC,YAAazB,IAAIwD,WAAWC,MAC1B,gEAEFf,SAAU,kBAAM,EAAKtE,UACrBiH,SAAU1F,KAAKuS,cAMvB,SAAKvR,UAAW,+BACd,YACGX,IAAIwD,WAAWC,MACd,6DACC,IAHL,OAQA,SAAK9C,UAAW,aACd,gBAAYwO,MAAM,WAChB,aACE,UACExO,UAAW,aACXQ,MAAO,CAAEoO,YAAa,SACrB,IACFvP,IAAIwD,WAAWC,MACd,kEAOZ,SAAK9C,UAAW,8BACd,EAAC,EAAD,CAAY+G,KAAM1H,IAAI6N,QAAQnG,Y,EAQ1CtJ,OAAA,WAAS,WACD8O,EAAWlN,IAAI6F,MAAMC,UAAU,aAAe,GAGpD,GAAyB,IAArBnG,KAAK6I,KAAKE,OAMd,GAAK/I,KAAKE,QAAQe,SAAoC,KAAzBjB,KAAKE,QAAQe,QAW1C,GAA4B,IALPjB,KAAK6I,KAAKkD,QAAO,SAACnD,GACrC,OAAO2E,EAASC,QAAQ5E,EAAIjB,OAAS,KAItBoB,QASjB,GACqB,OAAlB/I,KAAKI,WACFJ,KAAKI,SAASQ,iBACbP,IAAI6F,MAAMC,UAAU,sBACtBnG,KAAKI,SAASM,WAChBqG,QACC1G,IAAIwD,WAAWC,MACb,qEAPN,CAcA,IAAIlB,EAAgB,CAClBiG,KAAM7I,KAAK6I,MAIT7I,KAAKkK,UAAUnB,OAAS,IAC1BnG,EAAc4H,SAAWnK,IAAIC,MAAMoN,MACjC,uBACA,OACA1N,KAAKkS,kBAIT,IAAM1F,EAAO,CACXvL,MAAOjB,KAAKE,QAAQe,QACpBC,QAASb,IAAIuF,SAASzE,OAAOD,UAC7B0B,gBACAxC,SACoB,OAAlBJ,KAAKI,SACD,CACEQ,cAAeZ,KAAKI,SAASQ,gBAC7BF,QAASV,KAAKI,SAASM,UACvBI,QAASd,KAAKI,SAASU,WAEzB,MAGRd,KAAKuS,UAAW,EAEhBvS,KAAKE,QACFmD,KAAKmJ,GACLlJ,MAAK,SAACpD,GACL0L,YAAW,WAETrO,EAAE2G,MAAMC,IAAI9D,IAAI6D,MAAM,cAAe,CAAEyD,GAAI,GAAGzH,EAAQ+D,YACrD,QANP,OAQS,WACL,EAAKsO,UAAW,EAChBhV,EAAEgG,kBA7DJuP,MACEzS,IAAIwD,WAAWC,MACb,yEAbJ9D,KAAK0S,4BANL1S,KAAKwS,iB,GAtQ+B3E,KCV3B,SAASkF,KAetB,OAdAA,GAAWlV,OAAOmV,QAAU,SAAUC,GACpC,IAAK,IAAI9V,EAAI,EAAGA,EAAI+V,UAAUnK,OAAQ5L,IAAK,CACzC,IAAIgW,EAASD,UAAU/V,GAEvB,IAAK,IAAIuB,KAAOyU,EACVtV,OAAOkB,UAAUC,eAAe1B,KAAK6V,EAAQzU,KAC/CuU,EAAOvU,GAAOyU,EAAOzU,IAK3B,OAAOuU,IAGOG,MAAMpT,KAAMkT,W,iCCXf,SAASG,KACtBlD,kBAAO1G,IAAU1K,UAAW,YAAY,SAAUsC,GAchD,OAZEhB,IAAI6F,MAAMC,UAAU,sBACyB,MAA7C9F,IAAI6F,MAAMC,UAAU,sBAEpB9E,EAAME,IACJ,OACA,EAAC,KAAD,CAAY8D,KAAK,iBAAiB6C,KAAM7H,IAAI6D,MAAM,SAC/C7D,IAAIwD,WAAWC,MAAM,0CAExB,IAIGzC,KCNXhB,IAAIiT,aAAa/R,IAAI,8BAA8B,SAAClB,GAClDA,EAAIkT,OAAOC,KAAO,CAAEC,KAAM,QAASrR,UAAW2I,IAE9C1K,EAAIkT,OAAOG,aAAe,CACxBD,KAAM,uBACNrR,UAAW2I,IAGb1K,EAAIkT,OAAOI,aAAe,CAAEF,KAAM,gBAAiBrR,UAAW6P,IAE9D5R,EAAIkT,OAAOK,YAAc,CAAEH,KAAM,YAAarR,UAAWqM,IAEzDpO,EAAIkT,OAAO,oBAAsB,CAC/BE,KAAM,kBACNrR,UAAWqM,IAGbpO,EAAIC,MAAMuT,OAAOzT,SAAWqQ,GAE5BqD,KAAW/U,UAAUqB,SAAWuQ,KAAMC,OAAO,YAG7CmD,KAIAlD,KAGAmD,KAGAX,QCxCA,GAAczT,UAAQ,CACpB,iDAAkDgK,GAClD,4CAA6C/B","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 40);\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['tags/components/TagDiscussionModal'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/PostStream'];","module.exports = flarum.core.compat['states/PostStreamState'];","module.exports = flarum.core.compat['components/EditPostComposer'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['components/SelectDropdown'];","module.exports = flarum.core.compat['helpers/fullTime'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['tags/components/TagsPage'];","module.exports = flarum.core.compat['components/ComposerBody'];","module.exports = flarum.core.compat['components/TextEditor'];","module.exports = flarum.core;","module.exports = flarum.core.compat['components/LinkButton'];","import Modal from \"flarum/components/Modal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport Stream from \"flarum/utils/Stream\";\r\nimport Switch from \"flarum/components/Switch\";\r\n\r\nexport default class BlogPostSettingsModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    if (this.attrs.article) {\r\n      this.meta =\r\n        this.attrs.article && this.attrs.article.blogMeta()\r\n          ? this.attrs.article.blogMeta()\r\n          : app.store.createRecord(\"blogMeta\");\r\n    } else {\r\n      this.meta = this.attrs.meta\r\n        ? this.attrs.meta\r\n        : app.store.createRecord(\"blogMeta\");\r\n    }\r\n\r\n    this.isNew = !this.meta.exists;\r\n\r\n    this.summary = Stream(this.meta.summary() || \"\");\r\n\r\n    this.featuredImage = Stream(this.meta.featuredImage() || \"\");\r\n\r\n    this.isFeatured = Stream(this.meta.isFeatured() || false);\r\n    this.isSized = Stream(this.meta.isSized() || false);\r\n    this.isPendingReview = Stream(this.meta.isPendingReview() || false);\r\n  }\r\n\r\n  className() {\r\n    return \"Modal--small Support-Modal\";\r\n  }\r\n\r\n  title() {\r\n    return \"Blog post settings\";\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">{this.fields().toArray()}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add(\r\n      \"summary\",\r\n      <div className=\"Form-group\">\r\n        <label>Article summary:</label>\r\n        <textarea\r\n          className=\"FormControl\"\r\n          style={{\r\n            maxWidth: \"100%\",\r\n            minWidth: \"100%\",\r\n            width: \"100%\",\r\n            minHeight: \"120px\",\r\n          }}\r\n          bidi={this.summary}\r\n          placeholder={\"Please enter a summary\"}\r\n        />\r\n\r\n        <small>\r\n          This summary will be visible on the blog overview page and will be\r\n          used for SEO purposes.\r\n        </small>\r\n      </div>,\r\n      30\r\n    );\r\n\r\n    items.add(\r\n      \"image\",\r\n      <div className=\"Form-group\">\r\n        <label>Article image URL:</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"FormControl\"\r\n          bidi={this.featuredImage}\r\n          placeholder={\"https://\"}\r\n        />\r\n\r\n        <small>Best image resolution for social media: 1200x630</small>\r\n\r\n        {this.featuredImage() != \"\" && (\r\n          <img\r\n            src={this.featuredImage()}\r\n            alt={\"Article image\"}\r\n            title={\"Blog post image\"}\r\n            width={\"100%\"}\r\n            style={{ marginTop: \"15px\" }}\r\n          />\r\n        )}\r\n      </div>,\r\n      30\r\n    );\r\n\r\n    items.add(\r\n      \"sized\",\r\n      <div className=\"Form-group\">\r\n        {Switch.component(\r\n          {\r\n            state: this.isSized() == true,\r\n            onchange: (val) => {\r\n              this.isSized(val);\r\n            },\r\n          },\r\n          [\r\n            <b>Highlighted post</b>,\r\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>\r\n              Give this post a big image on the blog overview page.\r\n            </div>,\r\n          ]\r\n        )}\r\n      </div>,\r\n      -10\r\n    );\r\n\r\n    items.add(\r\n      \"submit\",\r\n      <div className=\"Form-group\">\r\n        {Button.component(\r\n          {\r\n            type: \"submit\",\r\n            className: \"Button Button--primary SupportModal-save\",\r\n            loading: this.loading,\r\n          },\r\n          \"Update\"\r\n        )}\r\n      </div>,\r\n      -10\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      summary: this.summary(),\r\n      featuredImage: this.featuredImage(),\r\n      isFeatured: this.isFeatured(),\r\n      isSized: this.isSized(),\r\n      isPendingReview: this.isPendingReview(),\r\n      relationships:\r\n        this.isNew && !this.attrs.isComposer\r\n          ? {\r\n              discussion: this.attrs.article,\r\n            }\r\n          : null,\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // Submit data\r\n    if (this.attrs.onsubmit) {\r\n      // Update attributes\r\n      this.meta.pushData({\r\n        attributes: this.submitData(),\r\n      });\r\n\r\n      // Push\r\n      this.attrs.onsubmit(this.meta);\r\n\r\n      this.hide();\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n\r\n    this.meta.save(this.submitData()).then(\r\n      () => {\r\n        if (this.attrs.article) {\r\n          this.attrs.article.pushData({\r\n            relationships: {\r\n              blogMeta: this.meta,\r\n            },\r\n          });\r\n        }\r\n\r\n        this.hide();\r\n        m.redraw();\r\n      },\r\n      (response) => {\r\n        this.loading = false;\r\n        this.handleErrors(response);\r\n      }\r\n    );\r\n  }\r\n}\r\n","import Modal from \"flarum/components/Modal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport Stream from \"flarum/utils/Stream\";\r\n\r\nexport default class RenameArticleModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.article = this.attrs.article;\r\n\r\n    this.name = Stream(this.article.title() || \"\");\r\n\r\n    this.redirect = this.attrs.redirect;\r\n  }\r\n\r\n  className() {\r\n    return \"Modal--small Support-Modal\";\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans(\r\n      \"v17development-flarum-blog.forum.tools.rename_article\"\r\n    );\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">{this.fields().toArray()}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add(\r\n      \"name\",\r\n      <div className=\"Form-group\">\r\n        <label>\r\n          {app.translator.trans(\r\n            \"v17development-flarum-blog.forum.article.title\"\r\n          )}\r\n          :\r\n        </label>\r\n        <input\r\n          className=\"FormControl\"\r\n          placeholder={app.translator.trans(\r\n            \"v17development-flarum-blog.forum.article.title\"\r\n          )}\r\n          bidi={this.name}\r\n        />\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"submit\",\r\n      <div className=\"Form-group\">\r\n        {Button.component(\r\n          {\r\n            type: \"submit\",\r\n            className: \"Button Button--primary SupportModal-save\",\r\n            loading: this.loading,\r\n          },\r\n          \"Update\"\r\n        )}\r\n      </div>,\r\n      -10\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      title: this.name(),\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    // Do not save\r\n    if (this.attrs.onChange) {\r\n      this.attrs.onChange(this.name());\r\n      this.hide();\r\n\r\n      return;\r\n    }\r\n\r\n    this.article\r\n      .save({\r\n        title: this.name(),\r\n      })\r\n      .then(\r\n        () => {\r\n          this.hide();\r\n\r\n          // Redirect\r\n          if (this.redirect) {\r\n            const url = `/blog/${this.article.slug()}`;\r\n\r\n            m.route.set(url, true);\r\n            window.history.replaceState(null, document.title, url);\r\n          }\r\n        },\r\n        (response) => {\r\n          this.loading = false;\r\n          this.handleErrors(response);\r\n        }\r\n      );\r\n  }\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\r\nimport DiscussionControls from \"flarum/utils/DiscussionControls\";\r\nimport Alert from \"flarum/components/Alert\";\r\nimport Button from \"flarum/components/Button\";\r\nimport Dropdown from \"flarum/components/Dropdown\";\r\nimport BlogPostSettingsModal from \"./Modals/BlogPostSettingsModal\";\r\nimport EditPostComposer from \"flarum/components/EditPostComposer\";\r\nimport extractText from \"flarum/utils/extractText\";\r\nimport RenameArticleModal from \"./Modals/RenameArticleModal\";\r\n\r\nexport default class BlogPostController extends Component {\r\n  init() {\r\n    this.loadedPost = false;\r\n  }\r\n\r\n  view() {\r\n    const article = this.attrs.article;\r\n    let buttons = [];\r\n\r\n    // Working for GlowingBlue version\r\n    const LanguageDiscussionModal =\r\n      flarum.extensions[\"fof-discussion-language\"] &&\r\n      typeof flarum.extensions[\"fof-discussion-language\"].components !==\r\n        \"undefined\"\r\n        ? flarum.extensions[\"fof-discussion-language\"].components\r\n            .LanguageDiscussionModal\r\n        : null;\r\n\r\n    // Rename article\r\n    if (article.canRename()) {\r\n      buttons.push(\r\n        Button.component(\r\n          {\r\n            className: \"Button\",\r\n            onclick: () => app.modal.show(RenameArticleModal, { article }),\r\n            icon: \"fas fa-pencil-alt\",\r\n          },\r\n          app.translator.trans(\r\n            \"v17development-flarum-blog.forum.tools.rename_article\"\r\n          )\r\n        )\r\n      );\r\n    }\r\n\r\n    const articlePost = article.firstPost()\r\n      ? article.firstPost()\r\n      : app.store.getById(\"posts\", article.firstPostId());\r\n\r\n    // Edit article\r\n    buttons.push(\r\n      Button.component(\r\n        {\r\n          className: \"Button\",\r\n          disabled: !articlePost || !articlePost.canEdit(),\r\n          onclick: () => {\r\n            app.composer.load(EditPostComposer, { post: articlePost });\r\n            app.composer.show();\r\n          },\r\n          icon: \"fas fa-edit\",\r\n        },\r\n        app.translator.trans(\r\n          \"v17development-flarum-blog.forum.tools.edit_article\"\r\n        )\r\n      )\r\n    );\r\n\r\n    // Article settings\r\n    buttons.push(\r\n      Button.component(\r\n        {\r\n          className: \"Button\",\r\n          onclick: () => app.modal.show(BlogPostSettingsModal, { article }),\r\n          icon: \"fas fa-cogs\",\r\n        },\r\n        app.translator.trans(\r\n          \"v17development-flarum-blog.forum.tools.article_settings\"\r\n        )\r\n      )\r\n    );\r\n\r\n    // Update categories\r\n    if (article.canTag()) {\r\n      buttons.push(\r\n        Button.component(\r\n          {\r\n            className: \"Button\",\r\n            onclick: () =>\r\n              app.modal.show(TagDiscussionModal, { discussion: article }),\r\n            icon: \"fas fa-tag\",\r\n          },\r\n          app.translator.trans(\r\n            \"v17development-flarum-blog.forum.tools.update_category\"\r\n          )\r\n        )\r\n      );\r\n    }\r\n\r\n    // Approve article\r\n    if (article.blogMeta() && article.blogMeta().isPendingReview()) {\r\n      buttons.push(<li className=\"Dropdown-separator\" />);\r\n\r\n      buttons.push(\r\n        Button.component(\r\n          {\r\n            className: \"Button\",\r\n            disabled: !app.forum.attribute(\"canApproveBlogPosts\"),\r\n            onclick: () => {\r\n              article\r\n                .blogMeta()\r\n                .save({\r\n                  isPendingReview: false,\r\n                })\r\n                .then(\r\n                  () => {\r\n                    app.alerts.show(\r\n                      Alert,\r\n                      { type: \"success\" },\r\n                      app.translator.trans(\r\n                        \"v17development-flarum-blog.forum.review_article.approve_article_approved\"\r\n                      )\r\n                    );\r\n                  },\r\n                  (response) => {\r\n                    this.loading = false;\r\n                    this.handleErrors(response);\r\n                  }\r\n                );\r\n            },\r\n            icon: \"fas fa-thumbs-up\",\r\n          },\r\n          app.translator.trans(\r\n            \"v17development-flarum-blog.forum.review_article.approve_article\"\r\n          )\r\n        )\r\n      );\r\n    }\r\n\r\n    // Language\r\n    if (\r\n      article.canChangeLanguage &&\r\n      article.canChangeLanguage() &&\r\n      LanguageDiscussionModal\r\n    ) {\r\n      buttons.push(\r\n        Button.component(\r\n          {\r\n            icon: \"fas fa-globe\",\r\n            onclick: () =>\r\n              app.modal.show(LanguageDiscussionModal, { discussion: article }),\r\n          },\r\n          app.translator.trans(\r\n            \"fof-discussion-language.forum.discussion_controls.change_language_button\"\r\n          )\r\n        )\r\n      );\r\n    }\r\n\r\n    buttons.push(<li className=\"Dropdown-separator\" />);\r\n\r\n    // Lock article\r\n    if (article.canLock()) {\r\n      buttons.push(\r\n        Button.component(\r\n          {\r\n            className: \"Button\",\r\n            onclick: DiscussionControls.lockAction.bind(article),\r\n            icon: `fas ${\r\n              article.isLocked() ? \"fa-comments\" : \"fa-comment-slash\"\r\n            }`,\r\n          },\r\n          article.isLocked()\r\n            ? app.translator.trans(\r\n                \"v17development-flarum-blog.forum.tools.enable_comments\"\r\n              )\r\n            : app.translator.trans(\r\n                \"v17development-flarum-blog.forum.tools.disable_comments\"\r\n              )\r\n        )\r\n      );\r\n    }\r\n\r\n    // Hide/show/delete\r\n    if (article.canHide()) {\r\n      // Article is hidden\r\n      if (article.isHidden()) {\r\n        // Recover article\r\n        buttons.push(\r\n          Button.component(\r\n            {\r\n              className: \"Button\",\r\n              onclick: DiscussionControls.restoreAction.bind(article),\r\n              icon: \"fas fa-eye\",\r\n            },\r\n            app.translator.trans(\r\n              \"v17development-flarum-blog.forum.tools.recover_article\"\r\n            )\r\n          )\r\n        );\r\n\r\n        // Delete article\r\n        if (article.canDelete()) {\r\n          buttons.push(\r\n            Button.component(\r\n              {\r\n                className: \"Button\",\r\n                onclick: () => {\r\n                  // Confirm deletion\r\n                  if (\r\n                    confirm(\r\n                      extractText(\r\n                        app.translator.trans(\r\n                          \"core.forum.discussion_controls.delete_confirmation\"\r\n                        )\r\n                      )\r\n                    )\r\n                  ) {\r\n                    // Redirect if the current page is an blog article\r\n                    if (app.history.getCurrent().name === \"blogArticle\") {\r\n                      if (app.previous) {\r\n                        app.history.back();\r\n                      } else {\r\n                        m.route.set(app.route(\"blog\"));\r\n                      }\r\n                    }\r\n\r\n                    return article.delete().then(() => {\r\n                      m.redraw();\r\n                    });\r\n                  }\r\n                },\r\n                icon: \"far fa-trash-alt\",\r\n              },\r\n              app.translator.trans(\r\n                \"v17development-flarum-blog.forum.tools.delete_forever\"\r\n              )\r\n            )\r\n          );\r\n        }\r\n      } else {\r\n        // Hide article\r\n        buttons.push(\r\n          Button.component(\r\n            {\r\n              className: \"Button\",\r\n              onclick: DiscussionControls.hideAction.bind(article),\r\n              icon: \"fas fa-eye-slash\",\r\n            },\r\n            app.translator.trans(\r\n              \"v17development-flarum-blog.forum.tools.hide_article\"\r\n            )\r\n          )\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\r\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\r\n          {Dropdown.component(\r\n            {\r\n              icon: \"fas fa-cog\",\r\n              label: \"Manage\",\r\n              buttonClassName: \"Button\",\r\n              menuClassName: \"Dropdown-menu--right\",\r\n              onshow: () => {\r\n                // Get post data to make sure they can edit the post\r\n                if (articlePost && !articlePost.canEdit() && !this.loadedPost) {\r\n                  this.loadedPost = true;\r\n                  app.store\r\n                    .find(\r\n                      \"posts\",\r\n                      article.firstPost()\r\n                        ? article.firstPost().id()\r\n                        : article.firstPostId()\r\n                    )\r\n                    .then(() => {})\r\n                    .catch(() => {})\r\n                    .then(() => m.redraw());\r\n                }\r\n              },\r\n            },\r\n            buttons\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport listItems from \"flarum/helpers/listItems\";\r\nimport avatar from \"flarum/helpers/avatar\";\r\nimport Link from \"flarum/components/Link\";\r\n\r\nexport default class BlogAuthor extends Component {\r\n  view() {\r\n    const author = !this.attrs.loading\r\n      ? this.attrs.article\r\n        ? this.attrs.article.user()\r\n        : this.attrs.user\r\n      : null;\r\n\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Author\"}>\r\n        <div\r\n          className={`FlarumBlog-Article-Author-background ${\r\n            this.attrs.loading ? \"FlarumBlog-Author-Ghost\" : \"\"\r\n          }`}\r\n          style={{\r\n            backgroundColor: author && author.color() ? author.color() : null,\r\n          }}\r\n        />\r\n\r\n        <div className={\"FlarumBlog-Article-Author-Avatar\"}>\r\n          {author ? (\r\n            <Link href={app.route(\"user\", { username: author.username() })}>\r\n              {avatar(author)}\r\n            </Link>\r\n          ) : (\r\n            <span className={\"Avatar FlarumBlog-Author-Ghost\"} />\r\n          )}\r\n        </div>\r\n\r\n        {author && (\r\n          <div className={\"FlarumBlog-Article-Author-Info\"}>\r\n            <Link\r\n              href={app.route(\"user\", { username: author.username() })}\r\n              className={\"FlarumBlog-Article-Author-Name\"}\r\n            >\r\n              {author.displayName()}\r\n            </Link>\r\n            <p className={\"FlarumBlog-Article-Author-Bio\"}>\r\n              {author.bio && author.bio()}\r\n            </p>\r\n\r\n            <ul className={\"FlarumBlog-Article-Author-Extended\"}>\r\n              {listItems(this.items().toArray())}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        {this.attrs.loading && (\r\n          <div>\r\n            <span\r\n              className={\r\n                \"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"\r\n              }\r\n            >\r\n              &nbsp;\r\n            </span>\r\n            <p\r\n              className={\r\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\r\n              }\r\n            >\r\n              &nbsp;\r\n            </p>\r\n            <p\r\n              className={\r\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\r\n              }\r\n            >\r\n              &nbsp;\r\n            </p>\r\n            <p\r\n              className={\r\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\r\n              }\r\n            >\r\n              &nbsp;\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  items() {\r\n    return new ItemList();\r\n  }\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport Link from \"flarum/components/Link\";\r\n\r\nexport default class BlogCategories extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.blogCategories = app.forum.attribute(\"blogTags\");\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"BlogCategories BlogSideWidget\">\r\n        <h3>\r\n          {app.translator.trans(\"v17development-flarum-blog.forum.categories\")}\r\n        </h3>\r\n\r\n        {this.blogCategories &&\r\n          this.blogCategories.map((tagId) => {\r\n            const tag = app.store.getById(\"tags\", tagId);\r\n\r\n            if (!tag) return null;\r\n\r\n            const tags = [];\r\n            let showSubTags =\r\n              this.blogCategories.length === 1 ||\r\n              tag.slug() === m.route.param(\"slug\");\r\n\r\n            // Add tags\r\n            app.store.all(\"tags\").forEach((_tag) => {\r\n              if (_tag.isChild() && _tag.parent() === tag) {\r\n                if (_tag.slug() === m.route.param(\"slug\")) {\r\n                  showSubTags = true;\r\n                }\r\n\r\n                tags.push(this.categoryItem(_tag));\r\n              }\r\n            });\r\n\r\n            return showSubTags\r\n              ? [this.categoryItem(tag), ...tags]\r\n              : this.categoryItem(tag);\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Category item\r\n  categoryItem(tag) {\r\n    return (\r\n      <Link\r\n        href={app.route(\"blogCategory\", { slug: tag.slug() })}\r\n        className={`BlogSideWidget-item BlogSideWidget-item-${tag.id()} ${\r\n          tag.isChild() && app.forum.attribute(\"blogCategoryHierarchy\") == true\r\n            ? \"BlogSideWidget-item-child\"\r\n            : \"\"\r\n        }`}\r\n      >\r\n        <span\r\n          className={tag.icon() === \"\" ? \"BlogSideWidget-item-colored\" : \"\"}\r\n          style={{ backgroundColor: tag.icon() === \"\" ? tag.color() : null }}\r\n        >\r\n          <i className={tag.icon()} />\r\n        </span>\r\n        {tag.name()}\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport IndexPage from \"flarum/components/IndexPage\";\r\nimport SelectDropdown from \"flarum/components/SelectDropdown\";\r\n\r\nexport default class ForumNav extends Component {\r\n  view() {\r\n    return (\r\n      <div className=\"BlogForumNav BlogSideWidget\">\r\n        <h3>\r\n          {app.translator.trans(\"v17development-flarum-blog.forum.forum_nav\")}\r\n        </h3>\r\n        <nav className=\"IndexPage-nav sideNav\">\r\n          <SelectDropdown buttonClassName=\"Button\" className=\"App-titleControl\">\r\n            {this.navItems().toArray()}\r\n          </SelectDropdown>\r\n        </nav>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  navItems() {\r\n    const items = IndexPage.prototype.navItems();\r\n\r\n    // We want the active screen to show up in the top dropdown when on mobile.\r\n    if (app.screen() !== \"phone\") {\r\n      items.remove(\"blog\");\r\n    }\r\n\r\n    return items;\r\n  }\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport listItems from \"flarum/helpers/listItems\";\r\nimport BlogAuthor from \"./BlogAuthor\";\r\nimport BlogCategories from \"../BlogCategories\";\r\nimport ForumNav from \"../ForumNav\";\r\n\r\nexport default class BlogItemSidebar extends Component {\r\n  view() {\r\n    return (\r\n      <div className={\"FlarumBlog-Article-Sidebar\"}>\r\n        <ul>{listItems(this.items().toArray())}</ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  items() {\r\n    const itemlist = new ItemList();\r\n\r\n    itemlist.add(\"author\", BlogAuthor.component(this.attrs), 0);\r\n\r\n    itemlist.add(\"categories\", BlogCategories.component(this.attrs), 0);\r\n\r\n    itemlist.add(\"nav\", ForumNav.component(this.attrs), 0);\r\n\r\n    return itemlist;\r\n  }\r\n}\r\n","export default function tooltip(element) {\r\n  $(element).tooltip();\r\n}\r\n","import Component from \"flarum/common/Component\";\r\n\r\nexport default class Language extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.languages = app.store.all(\"discussion-languages\");\r\n    this.options = this.languages.reduce((o, lang) => {\r\n      o[lang.code()] = (\r\n        <span>\r\n          <i className={\"fas fa-globe\"} /> {lang.name()}\r\n        </span>\r\n      );\r\n\r\n      return o;\r\n    }, this.attrs.extra || {});\r\n  }\r\n\r\n  view() {\r\n    const { language, uppercase } = this.attrs;\r\n    const name = language.name() || \"\";\r\n\r\n    return (\r\n      <span>\r\n        <i className={\"fas fa-globe\"} />\r\n        &nbsp;\r\n        {uppercase ? name.toUpperCase() : name}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport Dropdown from \"flarum/components/Dropdown\";\r\nimport Button from \"flarum/components/Button\";\r\nimport Language from \"./Language\";\r\n\r\nexport default class LanguageDropdown extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.languages = app.store.all(\"discussion-languages\");\r\n    this.options = this.languages.reduce((o, lang) => {\r\n      o[lang.code()] = <Language language={lang} />;\r\n\r\n      return o;\r\n    }, this.attrs.extra || {});\r\n  }\r\n\r\n  view() {\r\n    const selected = this.attrs.selected;\r\n\r\n    const items = Object.keys(this.options).map((key) => {\r\n      const isSelected = selected || \"any\";\r\n      const active = key === isSelected;\r\n\r\n      return Button.component(\r\n        {\r\n          active,\r\n          icon: active ? \"fas fa-check\" : true,\r\n          onclick: () => this.attrs.onclick(key),\r\n        },\r\n        this.options[key]\r\n      );\r\n    });\r\n\r\n    return Dropdown.component(\r\n      {\r\n        buttonClassName: \"Button\",\r\n        label: this.options[selected] || this.options[this.attrs.default],\r\n        menuClassName: \"Dropdown-menu--right\",\r\n      },\r\n      items\r\n    );\r\n  }\r\n}\r\n","import Page from \"flarum/components/Page\";\r\nimport Button from \"flarum/components/Button\";\r\nimport humanTime from \"flarum/helpers/humanTime\";\r\nimport BlogCategories from \"../components/BlogCategories\";\r\nimport Link from \"flarum/components/Link\";\r\nimport tooltip from \"../utils/tooltip\";\r\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\r\nimport ForumNav from \"../components/ForumNav\";\r\n\r\nexport default class BlogOverview extends Page {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\r\n\r\n    this.bodyClass = \"BlogOverviewPage\";\r\n\r\n    this.isLoading = true;\r\n    this.featuredPosts = [];\r\n    this.posts = [];\r\n    this.hasMore = null;\r\n    this.isLoadingMore = false;\r\n\r\n    this.languages = app.store.all(\"discussion-languages\");\r\n\r\n    this.currentSelectedLanguage = m.route.param(\"lang\")\r\n      ? m.route.param(\"lang\")\r\n      : app.translator.locale;\r\n\r\n    // Send history push\r\n    app.history.push(\"blog\");\r\n\r\n    this.loadBlogOverview();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogOverview() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      this.reloadData();\r\n    }\r\n\r\n    m.redraw();\r\n  }\r\n\r\n  reloadData() {\r\n    let q = `is:blog${\r\n      m.route.param(\"slug\") ? ` tag:${m.route.param(\"slug\")}` : \"\"\r\n    }`;\r\n\r\n    if (this.languages !== null && this.languages.length >= 1) {\r\n      q += ` language:${this.currentSelectedLanguage}`;\r\n    }\r\n\r\n    app.store\r\n      .find(\"discussions\", {\r\n        filter: {\r\n          q,\r\n        },\r\n        sort: \"-createdAt\",\r\n      })\r\n      .then(this.show.bind(this))\r\n      .catch(() => {\r\n        m.redraw();\r\n      });\r\n  }\r\n\r\n  // Show blog posts\r\n  show(articles) {\r\n    if (articles.length === 0) {\r\n      this.isLoading = false;\r\n      m.redraw();\r\n\r\n      return;\r\n    }\r\n\r\n    // Set pagination\r\n    this.hasMore =\r\n      articles.payload.links && articles.payload.links.next\r\n        ? articles.payload.links.next\r\n        : null;\r\n\r\n    this.featuredPosts = articles.slice(0, 3);\r\n    this.posts = articles.length >= 4 ? articles.slice(3, articles.length) : [];\r\n\r\n    this.isLoading = false;\r\n\r\n    m.redraw();\r\n  }\r\n\r\n  // Load more blog posts\r\n  loadMore() {\r\n    this.isLoadingMore = true;\r\n\r\n    app.store\r\n      .find(this.hasMore.replace(app.forum.attribute(\"apiUrl\"), \"\"))\r\n      .then((data) => {\r\n        data.map((article) => this.posts.push(article));\r\n\r\n        // Update hasmore button\r\n        this.hasMore =\r\n          data.payload.links && data.payload.links.next\r\n            ? data.payload.links.next\r\n            : null;\r\n      })\r\n      .catch(() => {})\r\n      .then(() => {\r\n        this.isLoadingMore = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n\r\n  title() {\r\n    if (!m.route.param(\"slug\")) {\r\n      return (\r\n        <h2>\r\n          {app.translator.trans(\r\n            \"v17development-flarum-blog.forum.recent_posts\"\r\n          )}\r\n        </h2>\r\n      );\r\n    }\r\n\r\n    const tag = app.store\r\n      .all(\"tags\")\r\n      .filter((tag) => tag.slug() === m.route.param(\"slug\"));\r\n\r\n    return (\r\n      <h2>\r\n        {tag && tag[0] && tag[0].name()}\r\n        <small>\r\n          {\" \"}\r\n          -{\" \"}\r\n          <Link href={app.route(\"blog\")}>\r\n            {app.translator.trans(\r\n              \"v17development-flarum-blog.forum.return_to_overview\"\r\n            )}\r\n          </Link>\r\n        </small>\r\n      </h2>\r\n    );\r\n  }\r\n\r\n  view() {\r\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\r\n      ? `url(${\r\n          app.forum.attribute(\"baseUrl\") +\r\n          \"/assets/\" +\r\n          app.forum.attribute(\"blogDefaultImage\")\r\n        })`\r\n      : null;\r\n\r\n    return (\r\n      <div className={\"FlarumBlogOverview\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"BlogFeatured\"}>\r\n            <div className={\"BlogOverviewButtons\"}>\r\n              {app.forum.attribute(\"canWriteBlogPosts\") && (\r\n                <Button\r\n                  className={\"Button\"}\r\n                  onclick={() => this.newArticle()}\r\n                  icon={\"fas fa-pencil-alt\"}\r\n                >\r\n                  {app.translator.trans(\r\n                    \"v17development-flarum-blog.forum.compose.write_article\"\r\n                  )}\r\n                </Button>\r\n              )}\r\n\r\n              {this.languages !== null && this.languages.length >= 1 && (\r\n                <LanguageDropdown\r\n                  selected={this.currentSelectedLanguage}\r\n                  onclick={(language) => {\r\n                    this.currentSelectedLanguage = language;\r\n\r\n                    m.route.set(document.location.pathname, {\r\n                      lang: language,\r\n                    });\r\n\r\n                    this.reloadData();\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            {this.title()}\r\n\r\n            <div style={{ clear: \"both\" }} />\r\n\r\n            <div className={\"BlogFeatured-list\"}>\r\n              {/* Ghost data */}\r\n              {this.isLoading &&\r\n                [0, 1, 2].map(() => (\r\n                  <div\r\n                    className={\r\n                      \"BlogFeatured-list-item BlogFeatured-list-item-ghost\"\r\n                    }\r\n                  >\r\n                    <div className={\"BlogFeatured-list-item-details\"}>\r\n                      <h4>&nbsp;</h4>\r\n\r\n                      <div className={\"data\"}>\r\n                        <span>\r\n                          <i className={\"far fa-wave\"} />\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n              {!this.isLoading &&\r\n                this.featuredPosts.length >= 0 &&\r\n                this.featuredPosts.map((article) => {\r\n                  const blogImage =\r\n                    article.blogMeta() && article.blogMeta().featuredImage()\r\n                      ? `url(${article.blogMeta().featuredImage()})`\r\n                      : defaultImage;\r\n                  const blogTag = article.tags()\r\n                    ? article.tags().filter((tag) => tag.isChild())\r\n                    : [];\r\n\r\n                  return (\r\n                    <Link\r\n                      href={app.route(\"blogArticle\", {\r\n                        id: `${article.slug()}`,\r\n                      })}\r\n                      className={\r\n                        \"BlogFeatured-list-item FlarumBlog-default-image\"\r\n                      }\r\n                      style={{ backgroundImage: blogImage }}\r\n                    >\r\n                      <div className={\"BlogFeatured-list-item-top\"}>\r\n                        {blogTag[0] && <span>{blogTag[0].name()}</span>}\r\n                        {article.isSticky() && (\r\n                          <span>\r\n                            <i className={\"fas fa-thumbtack\"} />\r\n                          </span>\r\n                        )}\r\n                        {((article.blogMeta() &&\r\n                          article.blogMeta().isPendingReview() == true) ||\r\n                          article.isHidden()) && (\r\n                          <span>\r\n                            <i className={\"fas fa-eye-slash\"} />\r\n                          </span>\r\n                        )}\r\n                        {article.blogMeta() &&\r\n                          article.blogMeta().isPendingReview() == true && (\r\n                            <span\r\n                              title={app.translator.trans(\r\n                                \"v17development-flarum-blog.forum.review_article.pending_review\"\r\n                              )}\r\n                              config={tooltip.bind(this)}\r\n                              data-placement={\"bottom\"}\r\n                            >\r\n                              <i className={\"far fa-clock\"} />{\" \"}\r\n                              {app.translator.trans(\r\n                                \"v17development-flarum-blog.forum.review_article.pending_review_title\"\r\n                              )}\r\n                            </span>\r\n                          )}\r\n                      </div>\r\n\r\n                      <div className={\"BlogFeatured-list-item-details\"}>\r\n                        <h4>{article.title()}</h4>\r\n\r\n                        <div className={\"data\"}>\r\n                          <span>\r\n                            <i className={\"far fa-clock\"} />{\" \"}\r\n                            {humanTime(article.createdAt())}\r\n                          </span>\r\n                          <span>\r\n                            <i className={\"far fa-user\"} />{\" \"}\r\n                            {article.user()\r\n                              ? article.user().displayName()\r\n                              : \"[Deleted]\"}\r\n                          </span>\r\n                          <span>\r\n                            <i className={\"far fa-comment\"} />{\" \"}\r\n                            {article.commentCount() - 1}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </Link>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={\"BlogScrubber\"}>\r\n            <div className={\"BlogList\"}>\r\n              {this.isLoading &&\r\n                [false, false, true, false].map((state) => {\r\n                  return (\r\n                    <div\r\n                      className={`BlogList-item BlogList-item-${\r\n                        state === true ? \"sized\" : \"default\"\r\n                      } BlogList-item-ghost`}\r\n                    >\r\n                      <div\r\n                        className={\r\n                          \"BlogList-item-photo FlarumBlog-default-image\"\r\n                        }\r\n                      ></div>\r\n                      <div className={\"BlogList-item-content\"}>\r\n                        <h4>&nbsp;</h4>\r\n                        <p>&nbsp;</p>\r\n\r\n                        <div className={\"data\"}>\r\n                          <span>\r\n                            <i className={\"far fa-wave\"} />\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n\r\n              {!this.isLoading &&\r\n                this.posts.length >= 1 &&\r\n                this.posts.map((article) => {\r\n                  const blogImage =\r\n                    article.blogMeta() && article.blogMeta().featuredImage()\r\n                      ? `url(${article.blogMeta().featuredImage()})`\r\n                      : defaultImage;\r\n                  const isSized =\r\n                    article.blogMeta() && article.blogMeta().isSized();\r\n                  const summary =\r\n                    article.blogMeta() && article.blogMeta().summary()\r\n                      ? article.blogMeta().summary()\r\n                      : \"\";\r\n\r\n                  return (\r\n                    <Link\r\n                      href={app.route(\"blogArticle\", {\r\n                        id: `${article.slug()}`,\r\n                      })}\r\n                      className={`BlogList-item BlogList-item-${\r\n                        isSized ? \"sized\" : \"default\"\r\n                      }`}\r\n                    >\r\n                      <div\r\n                        className={\r\n                          \"BlogList-item-photo FlarumBlog-default-image\"\r\n                        }\r\n                        style={{ backgroundImage: blogImage }}\r\n                      ></div>\r\n                      <div className={\"BlogList-item-content\"}>\r\n                        <h4>\r\n                          {article.title()}\r\n                          {((article.blogMeta() &&\r\n                            article.blogMeta().isPendingReview() == true) ||\r\n                            article.isHidden()) && (\r\n                            <i className={\"fas fa-eye-slash\"} />\r\n                          )}\r\n                          {article.blogMeta() &&\r\n                            article.blogMeta().isPendingReview() == true && (\r\n                              <i\r\n                                className={\"far fa-clock\"}\r\n                                title={app.translator.trans(\r\n                                  \"v17development-flarum-blog.forum.review_article.pending_review\"\r\n                                )}\r\n                                config={tooltip.bind(this)}\r\n                              />\r\n                            )}\r\n                        </h4>\r\n                        <p>{summary}</p>\r\n\r\n                        <div className={\"data\"}>\r\n                          <span>\r\n                            <i className={\"far fa-clock\"} />{\" \"}\r\n                            {humanTime(article.createdAt())}\r\n                          </span>\r\n                          <span>\r\n                            <i className={\"far fa-user\"} />{\" \"}\r\n                            {article.user()\r\n                              ? article.user().displayName()\r\n                              : \"[Deleted]\"}\r\n                          </span>\r\n                          <span>\r\n                            <i className={\"far fa-comment\"} />{\" \"}\r\n                            {article.commentCount() - 1}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </Link>\r\n                  );\r\n                })}\r\n\r\n              {!this.isLoading &&\r\n                this.featuredPosts.length > 0 &&\r\n                this.hasMore === null && (\r\n                  <p className={\"FlarumBlog-reached-end\"}>\r\n                    {app.translator.trans(\r\n                      \"v17development-flarum-blog.forum.no_more_posts\"\r\n                    )}\r\n                  </p>\r\n                )}\r\n\r\n              {!this.isLoading &&\r\n                this.featuredPosts.length === 0 &&\r\n                this.posts.length === 0 && (\r\n                  <p className={\"FlarumBlog-reached-end\"}>\r\n                    {app.translator.trans(\r\n                      \"v17development-flarum-blog.forum.category_empty\"\r\n                    )}\r\n                  </p>\r\n                )}\r\n\r\n              {!this.isLoading && this.hasMore !== null && (\r\n                <div className={\"FlarumBlog-reached-load-more\"}>\r\n                  <Button\r\n                    className={\"Button\"}\r\n                    onclick={() => this.loadMore()}\r\n                    icon={\"fas fa-chevron-down\"}\r\n                    loading={this.isLoadingMore}\r\n                  >\r\n                    {app.translator.trans(\r\n                      \"core.forum.discussion_list.load_more_button\"\r\n                    )}\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className={\"Sidebar\"}>\r\n              <BlogCategories />\r\n              <ForumNav />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  newArticle() {\r\n    let foundMainTag = false;\r\n    let tags = [];\r\n\r\n    const blogTags = app.forum.attribute(\"blogTags\");\r\n\r\n    // Pre-select selected tags\r\n    app.store.all(\"tags\").forEach((_tag) => {\r\n      // Find main blog tag\r\n      if (\r\n        !foundMainTag &&\r\n        !_tag.isChild() &&\r\n        blogTags.indexOf(_tag.id()) >= 0\r\n      ) {\r\n        tags.push(_tag);\r\n      }\r\n    });\r\n\r\n    // Get current category\r\n    const currentCategory = app.store.getBy(\r\n      \"tags\",\r\n      \"slug\",\r\n      m.route.param(\"slug\")\r\n    );\r\n\r\n    if (currentCategory) {\r\n      tags.push(currentCategory);\r\n    }\r\n\r\n    // Redirect to the composer\r\n    m.route.set(\r\n      app.route(\"blogComposer\", {\r\n        tags: tags.map((tag) => tag.id()).join(),\r\n        lang:\r\n          this.languages.length > 0 ? this.currentSelectedLanguage : undefined,\r\n      })\r\n    );\r\n  }\r\n}\r\n","import Component from \"flarum/common/Component\";\r\nimport Button from \"flarum/components/Button\";\r\nimport extractText from \"flarum/utils/extractText\";\r\n\r\nexport default class ArticleSubscription extends Component {\r\n  view() {\r\n    const currentSubscriptionState = this.attrs.discussion.subscription();\r\n\r\n    const preferences = app.session.user.preferences();\r\n    const notifyEmail = preferences[\"notify_newPost_email\"];\r\n    const notifyTooltip = extractText(\r\n      app.translator.trans(\r\n        notifyEmail\r\n          ? \"flarum-subscriptions.forum.sub_controls.notify_email_tooltip\"\r\n          : \"flarum-subscriptions.forum.sub_controls.notify_alert_tooltip\"\r\n      )\r\n    );\r\n\r\n    let title = app.translator.trans(\r\n      \"flarum-subscriptions.forum.sub_controls.not_following_button\"\r\n    );\r\n    let icon = \"far fa-star\";\r\n\r\n    // Following\r\n    if (currentSubscriptionState === \"follow\") {\r\n      title = app.translator.trans(\r\n        \"flarum-subscriptions.forum.sub_controls.following_button\"\r\n      );\r\n      icon = \"fas fa-star\";\r\n    }\r\n\r\n    return (\r\n      <Button\r\n        className={`Button BlogArticleSubscription SubscriptionMenu-button--${currentSubscriptionState}`}\r\n        icon={icon}\r\n        title={notifyTooltip}\r\n        onclick={this.saveSubscription.bind(\r\n          this,\r\n          this.attrs.discussion,\r\n          [\"follow\", \"ignore\"].indexOf(currentSubscriptionState) !== -1\r\n            ? null\r\n            : \"follow\"\r\n        )}\r\n      >\r\n        {title}\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  saveSubscription(discussion, subscription) {\r\n    discussion.save({ subscription });\r\n  }\r\n\r\n  oncreate(vnode) {\r\n    $(vnode.dom).tooltip({\r\n      placement: \"bottom\",\r\n    });\r\n  }\r\n}\r\n","import Page from \"flarum/components/Page\";\r\nimport CommentPost from \"flarum/components/CommentPost\";\r\nimport PostStream from \"flarum/components/PostStream\";\r\nimport PostStreamState from \"flarum/states/PostStreamState\";\r\nimport BlogPostController from \"../components/BlogPostController\";\r\nimport BlogItemSidebar from \"../components/BlogItemSidebar/BlogItemSidebar\";\r\nimport Link from \"flarum/components/Link\";\r\nimport BlogOverview from \"./BlogOverview\";\r\nimport fullTime from \"flarum/helpers/fullTime\";\r\nimport ArticleSubscription from \"../components/ArticleSubscription\";\r\n\r\nexport default class BlogItem extends Page {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\r\n\r\n    // Send history push\r\n    app.history.push(\"blogArticle\");\r\n\r\n    this.bodyClass = \"BlogItemPage\";\r\n\r\n    this.near = m.route.param(\"near\") || 0;\r\n\r\n    this.loading = true;\r\n    this.found = false;\r\n    this.article = null;\r\n\r\n    this.loadBlogItem();\r\n  }\r\n\r\n  // Load blog overview\r\n  loadBlogItem() {\r\n    const preloadBlogOverview = app.preloadedApiDocument();\r\n\r\n    if (preloadBlogOverview) {\r\n      // We must wrap this in a setTimeout because if we are mounting this\r\n      // component for the first time on page load, then any calls to m.redraw\r\n      // will be ineffective and thus any configs (scroll code) will be run\r\n      // before stuff is drawn to the page.\r\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\r\n    } else {\r\n      app.store\r\n        .find(\"discussions\", m.route.param(\"id\").split(\"-\")[0])\r\n        .then(this.show.bind(this))\r\n        .catch(() => {\r\n          m.redraw();\r\n        });\r\n    }\r\n\r\n    m.redraw();\r\n  }\r\n\r\n  // Show blog post\r\n  show(article) {\r\n    // Set article data\r\n    this.article = article;\r\n\r\n    // Update title\r\n    app.setTitle(\r\n      `${article.title()} - ${app.translator.trans(\r\n        \"v17development-flarum-blog.forum.blog\"\r\n      )}`\r\n    );\r\n\r\n    this.loading = false;\r\n\r\n    let includedPosts = [];\r\n    if (article.payload && article.payload.included) {\r\n      const articleId = article.id();\r\n\r\n      includedPosts = article.payload.included\r\n        .filter(\r\n          (record) =>\r\n            record.type === \"posts\" &&\r\n            record.relationships &&\r\n            record.relationships.discussion &&\r\n            record.relationships.discussion.data.id === articleId\r\n        )\r\n        .map((record) => app.store.getById(\"posts\", record.id))\r\n        .sort((a, b) => a.id() - b.id())\r\n        .slice(0, 20);\r\n    }\r\n\r\n    this.stream = new PostStreamState(article, includedPosts);\r\n\r\n    // Scroll to specific post\r\n    if (this.near) {\r\n      this.stream.goToNumber(this.near, true);\r\n    }\r\n\r\n    m.redraw();\r\n  }\r\n\r\n  view() {\r\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\r\n      ? `url(${\r\n          app.forum.attribute(\"baseUrl\") +\r\n          \"/assets/\" +\r\n          app.forum.attribute(\"blogDefaultImage\")\r\n        })`\r\n      : null;\r\n    const blogImage =\r\n      this.article &&\r\n      this.article.blogMeta() &&\r\n      this.article.blogMeta().featuredImage()\r\n        ? `url(${this.article.blogMeta().featuredImage()})`\r\n        : defaultImage;\r\n    let articlePost = null;\r\n\r\n    if (!this.loading && this.article) {\r\n      articlePost = this.article.firstPost()\r\n        ? this.article.firstPost()\r\n        : app.store.getById(\"posts\", this.article.firstPostId());\r\n    }\r\n\r\n    return (\r\n      <div className={\"FlarumBlogItem\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"FlarumBlog-ToolButtons\"}>\r\n            <Link\r\n              href={app.route(\"blog\")}\r\n              className={\"Button\"}\r\n              onclick={(e) => {\r\n                if (app.previous.matches(BlogOverview)) {\r\n                  e.preventDefault();\r\n                  history.back();\r\n                }\r\n              }}\r\n            >\r\n              <i class=\"icon fas fa-angle-left Button-icon\"></i>\r\n              <span class=\"Button-label\">\r\n                {app.translator.trans(\r\n                  \"v17development-flarum-blog.forum.return_to_overview\"\r\n                )}\r\n              </span>\r\n            </Link>\r\n          </div>\r\n          <div className={\"FlarumBlog-Article\"}>\r\n            <div className={\"FlarumBlog-Article-Container\"}>\r\n              <div className={\"FlarumBlog-Article-Content\"}>\r\n                <div\r\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image ${\r\n                    this.loading ? \"FlarumBlog-Article-GhostImage\" : \"\"\r\n                  }`}\r\n                  style={{\r\n                    backgroundImage: blogImage,\r\n                    opacity:\r\n                      this.article && this.article.isHidden() ? 0.4 : null,\r\n                  }}\r\n                />\r\n\r\n                {this.article &&\r\n                  app.session.user &&\r\n                  (app.session.user.canEdit() ||\r\n                    this.article.canRename() ||\r\n                    (this.article.posts() &&\r\n                      this.article.posts()[0].canEdit())) && (\r\n                    <BlogPostController article={this.article} />\r\n                  )}\r\n\r\n                {/* Article Categories */}\r\n                <div className={\"FlarumBlog-Article-Categories\"}>\r\n                  {!this.loading &&\r\n                    this.article &&\r\n                    this.article.tags() &&\r\n                    this.article\r\n                      .tags()\r\n                      .map((tag) => (\r\n                        <Link\r\n                          href={app.route(\"blogCategory\", { slug: tag.slug() })}\r\n                        >\r\n                          {tag.name()}\r\n                        </Link>\r\n                      ))}\r\n\r\n                  {this.loading &&\r\n                    [0, 1].map(() => (\r\n                      <span className={\"FlarumBlog-Article-GhostCategory\"}>\r\n                        Category\r\n                      </span>\r\n                    ))}\r\n                </div>\r\n\r\n                <div className={\"FlarumBlog-Article-Post\"}>\r\n                  {/* Article name */}\r\n                  <h3\r\n                    className={`FlarumBlog-Article-Title ${\r\n                      this.loading ? \"FlarumBlog-Article-GhostTitle\" : \"\"\r\n                    }`}\r\n                  >\r\n                    {this.article ? this.article.title() : \"Ghost title\"}\r\n                    {this.article &&\r\n                      this.article.isHidden() &&\r\n                      `(${app.translator.trans(\r\n                        \"v17development-flarum-blog.forum.hidden\"\r\n                      )})`}\r\n                  </h3>\r\n\r\n                  <div\r\n                    className={`FlarumBlog-Article-PublishDate ${\r\n                      this.loading ? \"FlarumBlog-Article-GhostPublishDate\" : \"\"\r\n                    }`}\r\n                  >\r\n                    {this.article ? (\r\n                      fullTime(this.article.createdAt())\r\n                    ) : (\r\n                      <span>&nbsp;</span>\r\n                    )}\r\n                  </div>\r\n\r\n                  {this.loading &&\r\n                    [0, 1, 2].map(() => (\r\n                      <div>\r\n                        <p className={\"FlarumBlog-Article-GhostParagraph\"}>\r\n                          &nbsp;\r\n                        </p>\r\n                        <p className={\"FlarumBlog-Article-GhostParagraph\"}>\r\n                          &nbsp;\r\n                        </p>\r\n                        <p className={\"FlarumBlog-Article-GhostParagraph\"}>\r\n                          &nbsp;\r\n                        </p>\r\n                        <p>&nbsp;</p>\r\n                      </div>\r\n                    ))}\r\n\r\n                  {!this.loading &&\r\n                    this.article.blogMeta() &&\r\n                    this.article.blogMeta().isPendingReview() == true && (\r\n                      <div className={\"Post\"}>\r\n                        <blockquote\r\n                          class=\"uncited\"\r\n                          style={{ fontSize: \"16px\" }}\r\n                        >\r\n                          <div>\r\n                            <span\r\n                              className={\"far fa-clock\"}\r\n                              style={{ marginRight: \"5px\" }}\r\n                            />{\" \"}\r\n                            {app.translator.trans(\r\n                              \"v17development-flarum-blog.forum.review_article.pending_review\"\r\n                            )}\r\n                          </div>\r\n                        </blockquote>\r\n                      </div>\r\n                    )}\r\n\r\n                  {!this.loading && articlePost && (\r\n                    <CommentPost post={articlePost} />\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className={\"FlarumBlog-Article-Comments\"}>\r\n                {/* Show subscription state */}\r\n                {!this.loading &&\r\n                  this.article.subscription &&\r\n                  (!this.article.isLocked ||\r\n                    (this.article.isLocked && !this.article.isLocked())) && (\r\n                    <ArticleSubscription discussion={this.article} />\r\n                  )}\r\n\r\n                <h4>\r\n                  {app.translator.trans(\r\n                    \"v17development-flarum-blog.forum.comment_section.comments\"\r\n                  )}{\" \"}\r\n                  ({this.article ? this.article.commentCount() - 1 : 0})\r\n                </h4>\r\n\r\n                {/* Locked */}\r\n                {!this.loading &&\r\n                  this.article.isLocked &&\r\n                  this.article.isLocked() && (\r\n                    <div className={\"Post-body\"}>\r\n                      <blockquote class=\"uncited\">\r\n                        <div>\r\n                          <span\r\n                            className={\"far fa-lock\"}\r\n                            style={{ marginRight: \"5px\" }}\r\n                          />{\" \"}\r\n                          {app.translator.trans(\r\n                            \"v17development-flarum-blog.forum.comment_section.locked\"\r\n                          )}\r\n                        </div>\r\n                      </blockquote>\r\n                    </div>\r\n                  )}\r\n\r\n                {!this.loading &&\r\n                  this.article &&\r\n                  PostStream.component({\r\n                    discussion: this.article,\r\n                    stream: this.stream,\r\n                    onPositionChange: this.positionChanged.bind(this),\r\n                  })}\r\n              </div>\r\n            </div>\r\n\r\n            <BlogItemSidebar article={this.article} loading={this.loading} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  positionChanged(startNumber, endNumber) {\r\n    const article = this.article;\r\n\r\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\r\n      article.save({ lastReadPostNumber: endNumber });\r\n      m.redraw();\r\n    }\r\n  }\r\n}\r\n","import IndexPage from \"flarum/components/IndexPage\";\r\nimport DiscussionPage from \"flarum/components/DiscussionPage\";\r\nimport { extend, override } from \"flarum/extend\";\r\n\r\nexport default function () {\r\n  // Redirect tag to blog category\r\n  extend(IndexPage.prototype, \"oncreate\", function () {\r\n    const tag = this.currentTag();\r\n    const tagRedirectEnabled =\r\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\r\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"tags_only\";\r\n\r\n    // Only trigger when it's a tag page and the redirects are enabled\r\n    if (tag && tagRedirectEnabled) {\r\n      const blogTags = app.forum.attribute(\"blogTags\");\r\n\r\n      // Tag is inside list\r\n      if (\r\n        blogTags.indexOf(tag.id()) >= 0 ||\r\n        (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\r\n      ) {\r\n        m.route.set(app.route(\"blog\"));\r\n      }\r\n    }\r\n  });\r\n\r\n  // Redirect discussion to blog article\r\n  override(DiscussionPage.prototype, \"show\", function (original, discussion) {\r\n    const discussionRedirectEnabled =\r\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\r\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\r\n\r\n    if (\r\n      discussionRedirectEnabled &&\r\n      discussion &&\r\n      discussion &&\r\n      discussion.tags().length > 0\r\n    ) {\r\n      const blogTags = app.forum.attribute(\"blogTags\");\r\n\r\n      const foundTags = discussion.tags().filter((tag) => {\r\n        return (\r\n          blogTags.indexOf(tag.id()) >= 0 ||\r\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\r\n        );\r\n      });\r\n\r\n      // Only redirect if the discussion has blog tags\r\n      if (foundTags.length > 0) {\r\n        // Redirect to blog article\r\n        const url = app.route(\"blogArticle\", {\r\n          id: discussion.slug(),\r\n        });\r\n\r\n        // Setting the 3rd argument to true replaces the current state in the browser history, that way the browser back button works as expected.\r\n        m.route.set(url, null, true);\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return original(discussion);\r\n  });\r\n}\r\n","import Model from \"flarum/Model\";\r\nimport mixin from \"flarum/utils/mixin\";\r\n\r\nexport default class BlogMeta extends mixin(Model, {\r\n  discussion: Model.hasOne(\"discussion\"),\r\n  featuredImage: Model.attribute(\"featuredImage\"),\r\n  summary: Model.attribute(\"summary\"),\r\n  isFeatured: Model.attribute(\"isFeatured\"),\r\n  isSized: Model.attribute(\"isSized\"),\r\n  isPendingReview: Model.attribute(\"isPendingReview\"),\r\n}) {}\r\n","import { extend } from \"flarum/extend\";\r\nimport IndexPage from \"flarum/components/IndexPage\";\r\nimport TagsPage from \"flarum/tags/components/TagsPage\";\r\n\r\nexport default function extendTagOverview() {\r\n  extend(TagsPage.prototype, \"view\", function (markup) {\r\n    if (app.forum.attribute(\"blogHideTags\") == false) return markup;\r\n\r\n    // Get knowledge base tag ID's\r\n    const knowledgeBaseTags = app.forum.attribute(\"blogTags\") || [];\r\n\r\n    // Get tiles\r\n    let tag_tiles = markup.children[1].children[1].children[0].children;\r\n\r\n    // Map through the tiles and remove tiles that are part of the knowledge base\r\n    markup.children[1].children[1].children[0].children = tag_tiles.map(\r\n      (tile, i) => {\r\n        return knowledgeBaseTags.indexOf(this.tags[i].id()) >= 0 ? null : tile;\r\n      }\r\n    );\r\n\r\n    return markup;\r\n  });\r\n\r\n  extend(IndexPage.prototype, \"navItems\", function (items) {\r\n    if (app.forum.attribute(\"blogHideTags\") == false) return items;\r\n\r\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\r\n\r\n    blogTags.forEach((id) => {\r\n      items.remove(`tag${id}`);\r\n    });\r\n\r\n    return items;\r\n  });\r\n}\r\n","export default function () {\r\n  // Save the original function before we override it\r\n  const original_discussion_route = app.route.discussion;\r\n\r\n  /**\r\n   * Generate a URL to a discussion OR a Blog Article.\r\n   *\r\n   * CORE_CODE_OVERRIDE: This overrides the standard function from flarum/core.\r\n   * The code is inspired from js/src/forum/routes.js and now handles different types of discussions.\r\n   * It will try to keep the original function executed if the discussion being\r\n   * processed isn't a blog article.\r\n   *\r\n   * @param {Discussion} discussion\r\n   * @param {Integer} [near]\r\n   * @return {String}\r\n   */\r\n  app.route.discussion = (discussion, near) => {\r\n    const discussionRedirectEnabled =\r\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\r\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\r\n    let shouldRedirect = false;\r\n    if (discussionRedirectEnabled && discussion.tags().length > 0) {\r\n      const blogTags = app.forum.attribute(\"blogTags\");\r\n\r\n      const foundTags = discussion.tags().filter((tag) => {\r\n        return (\r\n          blogTags.indexOf(tag.id()) >= 0 ||\r\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\r\n        );\r\n      });\r\n\r\n      if (foundTags.length > 0) {\r\n        shouldRedirect = true;\r\n      }\r\n    }\r\n    if (shouldRedirect) {\r\n      return discussion.lastReadPostNumber() > 1\r\n        ? app.route(\"blogArticle.near\", {\r\n            id: discussion.slug(),\r\n            near: discussion.lastReadPostNumber(),\r\n          })\r\n        : app.route(\"blogArticle\", {\r\n            id: discussion.slug(),\r\n          });\r\n    } else {\r\n      return original_discussion_route(discussion, near);\r\n    }\r\n  };\r\n}\r\n","import Component from \"flarum/common/Component\";\r\n\r\nexport default class ComposerPreview extends Component {\r\n  view() {\r\n    return <div />;\r\n  }\r\n\r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n\r\n    s9e.TextFormatter.preview(vnode.attrs.content || \"\", vnode.dom);\r\n  }\r\n}\r\n","import ComposerBody from \"flarum/components/ComposerBody\";\r\nimport Button from \"flarum/components/Button\";\r\nimport TextEditor from \"flarum/components/TextEditor\";\r\nimport ComposerPreview from \"./ComposerPreview\";\r\n\r\nexport default class Composer extends ComposerBody {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.previewContent = false;\r\n  }\r\n\r\n  // Render\r\n  view() {\r\n    const hasContent =\r\n      this.composer.fields.content() && this.composer.fields.content() !== \"\";\r\n    const loading = this.loading || this.attrs.disabled;\r\n\r\n    return (\r\n      <div\r\n        className={`Flarum-Blog-Composer ${\r\n          loading ? \"Flarum-Blog-Composer-Loading\" : \"\"\r\n        }`}\r\n      >\r\n        <div className={\"Flarum-Blog-Composer-tabs\"}>\r\n          <Button\r\n            className={!this.previewContent && \"AricleComposerButtonSelected\"}\r\n            onclick={() => (this.previewContent = false)}\r\n          >\r\n            {app.translator.trans(\r\n              \"v17development-flarum-blog.forum.composer.write\"\r\n            )}\r\n          </Button>\r\n          <Button\r\n            className={this.previewContent && \"AricleComposerButtonSelected\"}\r\n            onclick={() => (this.previewContent = true)}\r\n          >\r\n            {app.translator.trans(\r\n              \"v17development-flarum-blog.forum.composer.view\"\r\n            )}\r\n          </Button>\r\n        </div>\r\n\r\n        <div\r\n          className={`Composer Flarum-Blog-Composer-body ${\r\n            this.previewContent ? \"Flarum-Blog-Composer-HideEditor\" : \"\"\r\n          }`}\r\n        >\r\n          {this.previewContent && (\r\n            <div className={\"Flarum-Blog-Composer-preview\"}>\r\n              {!hasContent &&\r\n                app.translator.trans(\r\n                  \"v17development-flarum-blog.forum.composer.nothing_to_preview\"\r\n                )}\r\n\r\n              <ComposerPreview content={this.composer.fields.content()} />\r\n            </div>\r\n          )}\r\n\r\n          {TextEditor.component({\r\n            submitLabel:\r\n              this.attrs.submitLabel ||\r\n              app.translator.trans(\"core.forum.composer_edit.submit_button\"),\r\n            placeholder: this.attrs.placeholder,\r\n            disabled: loading,\r\n            composer: this.composer,\r\n            preview: this.jumpToPreview && this.jumpToPreview.bind(this),\r\n            onchange: this.composer.fields.content,\r\n            onsubmit: this.onsubmit.bind(this),\r\n            value: this.composer.fields.content(),\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Submit trigger\r\n  onsubmit() {\r\n    if (this.attrs.onsubmit) {\r\n      this.attrs.onsubmit();\r\n    }\r\n  }\r\n}\r\n","import Page from \"flarum/components/Page\";\r\nimport Button from \"flarum/components/Button\";\r\nimport Link from \"flarum/components/Link\";\r\nimport BlogAuthor from \"../components/BlogItemSidebar/BlogAuthor\";\r\nimport RenameArticleModal from \"../components/Modals/RenameArticleModal\";\r\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\r\nimport BlogPostSettingsModal from \"../components/Modals/BlogPostSettingsModal\";\r\nimport Composer from \"../components/Composer/Composer\";\r\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\r\n\r\nexport default class BlogComposer extends Page {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\r\n\r\n    // User cannot write blogs\r\n    if (!app.forum.attribute(\"canWriteBlogPosts\")) {\r\n      m.route.set(app.route(\"blog\"));\r\n      return;\r\n    }\r\n\r\n    // Send history push\r\n    app.history.push(\"blogComposer\");\r\n\r\n    // Get languages (if enabled)\r\n    this.languages = app.store.all(\"discussion-languages\");\r\n\r\n    // Set body class\r\n    this.bodyClass = \"BlogItemPage\";\r\n\r\n    // Article data\r\n    this.articleLanguage = m.route.param(\"lang\")\r\n      ? m.route.param(\"lang\")\r\n      : app.translator.locale;\r\n    this.article = app.store.createRecord(\"discussions\");\r\n    this.blogMeta = null;\r\n\r\n    this.tags = [];\r\n\r\n    // Pre-select tags\r\n    if (m.route.param().tags) {\r\n      const tagList = Array.isArray(m.route.param().tags)\r\n        ? m.route.param().tags\r\n        : m.route.param().tags.split(\",\");\r\n\r\n      if (m.route.param().tags.length > 0) {\r\n        tagList.forEach((tagId) => {\r\n          const foundTag = app.store.getById(\"tags\", tagId);\r\n\r\n          if (foundTag) {\r\n            this.tags.push(foundTag);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    this.isSaving = false;\r\n  }\r\n\r\n  openTagsModal(e = null) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    if (this.isSaving) return;\r\n\r\n    app.modal.show(TagDiscussionModal, {\r\n      selectedTags: this.tags,\r\n      onsubmit: (tags) => {\r\n        this.tags = tags;\r\n      },\r\n    });\r\n  }\r\n\r\n  openNameArticleModal(e = null) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    if (this.isSaving) return;\r\n\r\n    app.modal.show(RenameArticleModal, {\r\n      article: this.article,\r\n      onChange: (title) => {\r\n        this.article.pushData({\r\n          attributes: {\r\n            title,\r\n          },\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  openBlogSettings(e) {\r\n    e.preventDefault();\r\n\r\n    if (this.isSaving) return;\r\n\r\n    app.modal.show(BlogPostSettingsModal, {\r\n      meta: this.blogMeta,\r\n      onsubmit: (meta) => (this.blogMeta = meta),\r\n    });\r\n  }\r\n\r\n  view() {\r\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\r\n      ? `url(${\r\n          app.forum.attribute(\"baseUrl\") +\r\n          \"/assets/\" +\r\n          app.forum.attribute(\"blogDefaultImage\")\r\n        })`\r\n      : null;\r\n\r\n    const blogImage =\r\n      this.blogMeta && this.blogMeta.featuredImage()\r\n        ? `url(${this.blogMeta.featuredImage()})`\r\n        : defaultImage;\r\n\r\n    return (\r\n      <div className={\"FlarumBlogItem\"}>\r\n        <div className={\"container\"}>\r\n          <div className={\"FlarumBlog-ToolButtons\"}>\r\n            <Link\r\n              href={app.route(\"blog\")}\r\n              className={\"Button\"}\r\n              loading={this.isSaving}\r\n              icon={\"fas fa-angle-left\"}\r\n            >\r\n              <i class=\"icon fas fa-angle-left Button-icon\"></i>\r\n              <span class=\"Button-label\">\r\n                {app.translator.trans(\r\n                  \"v17development-flarum-blog.forum.return_to_overview\"\r\n                )}\r\n              </span>\r\n            </Link>\r\n          </div>\r\n          <div className={\"FlarumBlog-Article\"}>\r\n            <div className={\"FlarumBlog-Article-Container\"}>\r\n              <div className={\"FlarumBlog-Article-Content\"}>\r\n                <div\r\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image`}\r\n                  style={{\r\n                    backgroundImage: blogImage,\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onclick={(e) => this.openBlogSettings(e)}\r\n                />\r\n\r\n                <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\r\n                  <div\r\n                    className={\r\n                      this.languages.length === 0\r\n                        ? \"FlarumBlog-Article-Content-Edit-Dropdown\"\r\n                        : \"FlarumBlog-Article-Content-EditButtons\"\r\n                    }\r\n                  >\r\n                    {this.languages !== null && this.languages.length >= 1 && (\r\n                      <LanguageDropdown\r\n                        selected={this.articleLanguage}\r\n                        onclick={(language) =>\r\n                          (this.articleLanguage = language)\r\n                        }\r\n                      />\r\n                    )}\r\n\r\n                    <Button\r\n                      className={\"Button\"}\r\n                      onclick={(e) => this.openBlogSettings(e)}\r\n                      icon={\"fas fa-pencil-alt\"}\r\n                      loading={this.isSaving}\r\n                    >\r\n                      Update blog settings\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Article Categories */}\r\n                <div className={\"FlarumBlog-Article-Categories\"}>\r\n                  {this.tags.map((tag) => (\r\n                    <a href={\"#\"} onclick={(e) => this.openTagsModal(e)}>\r\n                      {tag.name()}\r\n                    </a>\r\n                  ))}\r\n\r\n                  <a href={\"#\"} onclick={(e) => this.openTagsModal(e)}>\r\n                    {this.tags.length === 0\r\n                      ? app.translator.trans(\r\n                          \"v17development-flarum-blog.forum.composer.select_category\"\r\n                        )\r\n                      : app.translator.trans(\r\n                          \"v17development-flarum-blog.forum.composer.edit_categories\"\r\n                        )}{\" \"}\r\n                    <i className={\"fas fa-edit\"} />\r\n                  </a>\r\n                </div>\r\n\r\n                <div className={\"FlarumBlog-Article-Post\"}>\r\n                  {/* Article name */}\r\n                  <h3\r\n                    onclick={() => this.openNameArticleModal()}\r\n                    className=\"FlarumBlog-Article-Title\"\r\n                    style={{ cursor: \"pointer\" }}\r\n                  >\r\n                    {this.article &&\r\n                    this.article.title() &&\r\n                    this.article.title() !== \"\"\r\n                      ? this.article.title()\r\n                      : app.translator.trans(\r\n                          \"v17development-flarum-blog.forum.composer.no_title\"\r\n                        )}\r\n\r\n                    <a href={\"#\"} onclick={(e) => e.preventDefault()}>\r\n                      <i className={\"fas fa-edit\"} />\r\n                    </a>\r\n                  </h3>\r\n\r\n                  <div className=\"Post-body\">\r\n                    <Composer\r\n                      composer={app.composer}\r\n                      originalContent={\"\"}\r\n                      submitLabel={app.translator.trans(\r\n                        \"v17development-flarum-blog.forum.composer.post_article\"\r\n                      )}\r\n                      placeholder={app.translator.trans(\r\n                        \"v17development-flarum-blog.forum.composer.enter_message_here\"\r\n                      )}\r\n                      onsubmit={() => this.create()}\r\n                      disabled={this.isSaving}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className={\"FlarumBlog-Article-Comments\"}>\r\n                <h4>\r\n                  {app.translator.trans(\r\n                    \"v17development-flarum-blog.forum.comment_section.comments\"\r\n                  )}{\" \"}\r\n                  (0)\r\n                </h4>\r\n                {/* Locked */}\r\n\r\n                <div className={\"Post-body\"}>\r\n                  <blockquote class=\"uncited\">\r\n                    <div>\r\n                      <span\r\n                        className={\"fas fa-ban\"}\r\n                        style={{ marginRight: \"5px\" }}\r\n                      />{\" \"}\r\n                      {app.translator.trans(\r\n                        \"v17development-flarum-blog.forum.composer.comment_section\"\r\n                      )}\r\n                    </div>\r\n                  </blockquote>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className={\"FlarumBlog-Article-Sidebar\"}>\r\n              <BlogAuthor user={app.session.user} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  create() {\r\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\r\n\r\n    // Force tags\r\n    if (this.tags.length === 0) {\r\n      this.openTagsModal();\r\n      return;\r\n    }\r\n\r\n    // Force title\r\n    if (!this.article.title() || this.article.title() === \"\") {\r\n      this.openNameArticleModal();\r\n      return;\r\n    }\r\n\r\n    // Find knowledge base tags\r\n    const findblogTags = this.tags.filter((tag) => {\r\n      return blogTags.indexOf(tag.id()) >= 0;\r\n    });\r\n\r\n    // No knowledge base tags selected\r\n    if (findblogTags.length === 0) {\r\n      alert(\r\n        app.translator.trans(\r\n          \"v17development-flarum-blog.forum.composer.no_blog_tags_selected\"\r\n        )\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (\r\n      (this.blogMeta === null ||\r\n        (!this.blogMeta.featuredImage() &&\r\n          !app.forum.attribute(\"blogDefaultImage\")) ||\r\n        !this.blogMeta.summary()) &&\r\n      !confirm(\r\n        app.translator.trans(\r\n          \"v17development-flarum-blog.forum.composer.post_without_blog_info\"\r\n        )\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let relationships = {\r\n      tags: this.tags,\r\n    };\r\n\r\n    // Add languages if possible\r\n    if (this.languages.length > 0) {\r\n      relationships.language = app.store.getBy(\r\n        \"discussion-languages\",\r\n        \"code\",\r\n        this.articleLanguage\r\n      );\r\n    }\r\n\r\n    const data = {\r\n      title: this.article.title(),\r\n      content: app.composer.fields.content(),\r\n      relationships,\r\n      blogMeta:\r\n        this.blogMeta !== null\r\n          ? {\r\n              featuredImage: this.blogMeta.featuredImage(),\r\n              summary: this.blogMeta.summary(),\r\n              isSized: this.blogMeta.isSized(),\r\n            }\r\n          : null,\r\n    };\r\n\r\n    this.isSaving = true;\r\n\r\n    this.article\r\n      .save(data)\r\n      .then((article) => {\r\n        setTimeout(() => {\r\n          // Redirect to the article\r\n          m.route.set(app.route(\"blogArticle\", { id: `${article.slug()}` }));\r\n        }, 500);\r\n      })\r\n      .catch(() => {\r\n        this.isSaving = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n}\r\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import { extend } from \"flarum/extend\";\r\nimport IndexPage from \"flarum/components/IndexPage\";\r\nimport LinkButton from \"flarum/components/LinkButton\";\r\n\r\nexport default function addSidebarNav() {\r\n  extend(IndexPage.prototype, \"navItems\", function (items) {\r\n    if (\r\n      app.forum.attribute(\"blogAddSidebarNav\") &&\r\n      app.forum.attribute(\"blogAddSidebarNav\") !== \"0\"\r\n    ) {\r\n      items.add(\r\n        \"blog\",\r\n        <LinkButton icon=\"fas fa-comment\" href={app.route(\"blog\")}>\r\n          {app.translator.trans(\"v17development-flarum-blog.forum.blog\")}\r\n        </LinkButton>,\r\n        15\r\n      );\r\n    }\r\n\r\n    return items;\r\n  });\r\n}\r\n","import BlogItem from \"./pages/BlogItem\";\r\nimport Model from \"flarum/Model\";\r\nimport Discussion from \"flarum/models/Discussion\";\r\nimport BlogOverview from \"./pages/BlogOverview\";\r\nimport redirector from \"./utils/redirector\";\r\nimport BlogMeta from \"../common/Models/BlogMeta\";\r\nimport extendTagOverview from \"./utils/extendTagOverview\";\r\nimport discussionRouting from \"./utils/discussionRouting\";\r\nimport BlogComposer from \"./pages/BlogComposer\";\r\nimport compat from \"./compat\";\r\nimport addSidebarNav from \"./utils/addSidebarNav\";\r\n\r\n// Register Flarum Blog\r\napp.initializers.add(\"v17development-flarum-blog\", (app) => {\r\n  app.routes.blog = { path: \"/blog\", component: BlogOverview };\r\n\r\n  app.routes.blogCategory = {\r\n    path: \"/blog/category/:slug\",\r\n    component: BlogOverview,\r\n  };\r\n\r\n  app.routes.blogComposer = { path: \"/blog/compose\", component: BlogComposer };\r\n\r\n  app.routes.blogArticle = { path: \"/blog/:id\", component: BlogItem };\r\n\r\n  app.routes[\"blogArticle.near\"] = {\r\n    path: \"/blog/:id/:near\",\r\n    component: BlogItem,\r\n  };\r\n\r\n  app.store.models.blogMeta = BlogMeta;\r\n\r\n  Discussion.prototype.blogMeta = Model.hasOne(\"blogMeta\");\r\n\r\n  // Redirect discussions/tags to their blog post/overview\r\n  redirector();\r\n\r\n  // Extend tag overview.\r\n  // Hide tags which are used as blog category\r\n  extendTagOverview();\r\n\r\n  // Make that blog articles have a blog route and not a discussion route\r\n  discussionRouting();\r\n\r\n  // Add a link to the blog to the IndexPage sidebar, if enabled.\r\n  addSidebarNav();\r\n});\r\n\r\ncompat();\r\n","import { compat } from \"@flarum/core/forum\";\r\nimport BlogAuthor from \"./components/BlogItemSidebar/BlogAuthor\";\r\nimport BlogItemSidebar from \"./components/BlogItemSidebar/BlogItemSidebar\";\r\n\r\nexport default () => {\r\n  Object.assign(compat, {\r\n    \"v17development/blog/components/BlogItemSidebar\": BlogItemSidebar,\r\n    \"v17development/blog/components/BlogAuthor\": BlogAuthor,\r\n  });\r\n};\r\n"],"sourceRoot":""}