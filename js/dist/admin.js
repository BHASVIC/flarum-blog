module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=36)}([function(e,t,n){"use strict";function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return a}))},function(e,t){e.exports=flarum.core.compat["components/Button"]},function(e,t){e.exports=flarum.core.compat.Component},function(e,t){e.exports=flarum.core.compat["components/Switch"]},function(e,t){e.exports=flarum.core.compat["utils/ItemList"]},function(e,t){e.exports=flarum.core.compat.extend},,function(e,t){e.exports=flarum.core.compat["components/Alert"]},function(e,t){e.exports=flarum.core.compat["components/Page"]},function(e,t){e.exports=flarum.core.compat["components/Modal"]},,,function(e,t){e.exports=flarum.core.compat["utils/saveSettings"]},,function(e,t){e.exports=flarum.core.compat["components/FieldSet"]},,,,,,,,,,,,,,,,function(e,t){e.exports=flarum.core.compat["components/AdminNav"]},function(e,t){e.exports=flarum.core.compat["components/AdminLinkButton"]},function(e,t){e.exports=flarum.core.compat["components/BasicsPage"]},function(e,t){e.exports=flarum.core.compat["components/PermissionGrid"]},,,function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(8),s=n.n(o),i=n(12),r=n.n(i),l=n(7),c=n.n(l),d=n(2),g=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.view=function(){return m("div",null,m("div",{className:"FlarumBlog-header"},m("div",{className:"header-container"},m("h2",null,"Flarum Blog"),m("p",null,"Adds a blog to your forum"),m("div",{className:"clear"}))),m("div",{className:"container"},m("p",null,"Welcome to the Flarum Blog settings. If you have found a bug, have feedback or an idea, join the ",m("a",{href:"https://join.slack.com/t/v17dev/shared_invite/zt-g6ky1fd3-RreB9UB~636jL~QjDGfZHg"},"V17 Development Slack workspace"),". Also, for tips & tricks, check our ",m("a",{href:"https://community.v17.dev/knowledgebase/category/flarum-blog",target:"_blank"},"knowledge base"),". Do you want to contribute? Check the ",m("a",{href:"https://github.com/v17development/flarum-blog"},"GitHub repository")),m("h2",{style:{marginTop:"25px"}},"Blog settings")))},t}(n.n(d).a),p=n(1),u=n.n(p),h=n(14),b=n.n(h),f=n(3),v=n.n(f),y=n(9),_=function(e){function t(){return e.apply(this,arguments)||this}Object(a.a)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.blogCategoriesOriginal=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.blogCategories=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.isSaving=!1,this.hasChanges=!1},n.title=function(){return"Select blog categories"},n.className=function(){return"Modal modal-dialog FlarumBlog-TagsModal"},n.content=function(){var e=this;return m("div",null,m("div",{className:"Modal-body"},m("p",null,"Please select one or more tags that are considered blog tags. ",m("a",{href:app.forum.attribute("baseUrl")+"/blog",target:"_blank"},"Visit your blog.")),m("table",{className:"FlarumBlog-TagsTable"},m("thead",null,m("th",{width:"35"}),m("th",null,"Tag name"),m("th",{width:"50"})),m("tbody",null,0===app.store.all("tags").length&&m("tr",null,m("td",{colspan:"3"},"You currently have no tags.")),app.store.all("tags").map((function(t){if(!t.parent()){var n=function(){var n=e.blogCategories.indexOf(t.id());e.hasChanges=!0,n>=0?e.blogCategories.splice(n,1):e.blogCategories.push(t.id())};return m("tr",null,m("td",null,m("i",{className:t.icon()})),m("td",{onclick:n},t.name()),m("td",null,m(v.a,{state:e.blogCategories.indexOf(t.id())>=0,onchange:n})))}}))))),m("div",{style:"padding: 25px 30px; text-align: center;"},m(u.a,{type:"submit",className:"Button Button--primary",loading:this.loading},this.hasChanges?"Save changes":"Close")))},n.onsubmit=function(e){var t=this;e.preventDefault(),this.hasChanges?(this.isSaving=!0,r()({blog_tags:this.blogCategories.join("|")}).then((function(){app.alerts.show(new c.a({type:"success",children:app.translator.trans("core.admin.basics.saved_message")})),t.hide()})).catch((function(){app.alerts.show(new c.a({type:"error",children:app.translator.trans("core.lib.error.generic_message")}))})).then((function(){t.isSaving=!1}))):this.hide()},t}(n.n(y).a),w=function(e){function t(){return e.apply(this,arguments)||this}Object(a.a)(t,e);var n=t.prototype;return n.init=function(){this.hasChanges=!1,this.isSaving=!1,this.blogCategories=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.redirectsEnabled=app.data.settings.blog_redirects_enabled?app.data.settings.blog_redirects_enabled:"both",this.hideTagsInList=!app.data.settings.blog_hide_tags||app.data.settings.blog_hide_tags,this.allowComments=!app.data.settings.blog_allow_comments||app.data.settings.blog_allow_comments,this.requiresReviewOnPost=!!app.data.settings.blog_requires_review&&app.data.settings.blog_requires_review,this.addCategoryHierarchy=!app.data.settings.blog_category_hierarchy||app.data.settings.blog_category_hierarchy},n.view=function(){var e=this;return m("div",{className:"BasicsPage FlarumBlog"},g.component(),m("div",{className:"container"},m("div",{className:"FlarumBlog-SelectCategories"},this.blogCategories.length>=1?"You have "+this.blogCategories.length+" categories selected":"No categories selected",m(u.a,{className:"Button",onclick:function(){app.modal.show(new _)}},"Select blog categories")),b.a.component({label:"Blog",children:[v.a.component({state:1==this.allowComments,onchange:function(t){e.allowComments=t,e.hasChanges=!0},children:[m("b",null,"Allow comments"),m("div",{className:"helpText"},"By default, allow comments on blog posts. When disabled, it can be enabled individually per blog post. ",m("b",null,"Note:")," Changing this setting will not affect pre-existing blog posts.")]}),v.a.component({state:1==this.requiresReviewOnPost,onchange:function(t){e.requiresReviewOnPost=t,e.hasChanges=!0},children:[m("b",null,"Blog posts requires review"),m("div",{className:"helpText"},"When posting an article, it will not be visible directly and needs to be reviewed by a moderator.")]})]}),b.a.component({label:"Categories",children:[v.a.component({state:1==this.hideTagsInList,onchange:function(t){e.hideTagsInList=t,e.hasChanges=!0},children:[m("b",null,"Hide tags in taglist"),m("div",{className:"helpText"},"When enabled, this extension will hide the blog tags from your homepage. After changing this setting, clear the cache of your forum.")]}),v.a.component({state:1==this.addCategoryHierarchy,onchange:function(t){e.addCategoryHierarchy=t,e.hasChanges=!0},children:[m("b",null,"Show tag hierarchy"),m("div",{className:"helpText"},"Add spacing to child-categories and give the category-list a hierarchy.")]})]}),b.a.component({label:"Redirects",children:[v.a.component({state:"both"===this.redirectsEnabled||"discussions_only"===this.redirectsEnabled,onchange:function(t){t?"tags_only"===e.redirectsEnabled?e.redirectsEnabled="both":"none"===e.redirectsEnabled&&(e.redirectsEnabled="discussions_only"):"discussions_only"===e.redirectsEnabled?e.redirectsEnabled="none":e.redirectsEnabled="tags_only",e.hasChanges=!0},children:[m("b",null,"Redirect blog articles"),m("div",{className:"helpText"},"When enabled, this extension will redirect original discussion URLs to their blog URL.")]}),v.a.component({state:"both"===this.redirectsEnabled||"tags_only"===this.redirectsEnabled,onchange:function(t){t?"discussions_only"===e.redirectsEnabled?e.redirectsEnabled="both":"none"===e.redirectsEnabled&&(e.redirectsEnabled="tags_only"):"tags_only"===e.redirectsEnabled?e.redirectsEnabled="none":e.redirectsEnabled="discussions_only",e.hasChanges=!0},children:[m("b",null,"Redirect blog tags"),m("div",{className:"helpText"},"When enabled, this extension redirects blog tag URLs to the blog category URL.")]})]}),m(u.a,{loading:this.isSaving,className:"Button Button--primary",onclick:function(){return e.save()},disabled:!this.hasChanges},app.translator.trans("core.admin.basics.submit_button"))))},n.save=function(){var e=this;this.isSaving=!0,r()({blog_redirects_enabled:this.redirectsEnabled,blog_hide_tags:this.hideTagsInList,blog_requires_review:this.requiresReviewOnPost,blog_allow_comments:this.allowComments,blog_category_hierarchy:this.addCategoryHierarchy}).then((function(){e.hasChanges=!1,app.alerts.show(e.successAlert=new c.a({type:"success",children:app.translator.trans("core.admin.basics.saved_message")}))})).catch((function(){})).then((function(){e.isSaving=!1,m.redraw()}))},t}(s.a),x=n(5),C=n(30),B=n.n(C),N=n(31),O=n.n(N),S=n(32),E=n.n(S),j=n(33),P=n.n(j),T=n(4),k=n.n(T);function A(){var e=new k.a;return e.add("writeArticles",{icon:"fas fa-pencil-alt",label:"Write and edit blog articles",permission:"blog.writeArticles"},100),e.add("autoApprovePosts",{icon:"far fa-star",label:"Auto approve articles",permission:"blog.autoApprovePosts"},90),e.add("approvePreview",{icon:"far fa-thumbs-up",label:"Can approve blog articles",permission:"blog.canApprovePosts"},90),e}app.initializers.add("v17development-flarum-blog",(function(){app.routes.blog={path:"/blog",component:w.component()},Object(x.extend)(E.a.prototype,"homePageItems",(function(e){e.add("v17development-flarum-blog",{path:"/blog",label:"Blog"})})),Object(x.extend)(B.a.prototype,"items",(function(e){e.add("blog",O.a.component({href:app.route("blog"),icon:"fas fa-blog",children:"Blog",description:"Configure your forum's blog."}))})),Object(x.extend)(P.a.prototype,"permissionItems",(function(e){e.add("v17-development-blog",{label:"Blog",children:A().toArray()},80)}))}))}]);
//# sourceMappingURL=admin.js.map