module.exports=function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=36)}([function(e,t,s){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}s.d(t,"a",(function(){return n}))},function(e,t){e.exports=flarum.core.compat["components/Button"]},,function(e,t){e.exports=flarum.core.compat["components/Switch"]},,,function(e,t){e.exports=flarum.core.compat["components/Alert"]},,function(e,t){e.exports=flarum.core.compat.extend},,function(e,t){e.exports=flarum.core.compat["components/Modal"]},,,,,function(e,t){e.exports=flarum.core.compat["utils/saveSettings"]},,function(e,t){e.exports=flarum.core.compat["components/FieldSet"]},,,,,,,,,,,,,,,,function(e,t){e.exports=flarum.core.compat["components/PermissionGrid"]},function(e,t){e.exports=flarum.core.compat["components/ExtensionPage"]},,function(e,t,s){"use strict";s.r(t);var n=s(8),a=s(33),o=s.n(a),i=s(0),r=s(34),l=s.n(r),c=s(15),g=s.n(c),d=s(6),p=s.n(d),h=s(1),u=s.n(h),b=s(17),f=s.n(b),_=s(3),y=s.n(_),v=s(10),x=function(e){function t(){return e.apply(this,arguments)||this}Object(i.a)(t,e);var s=t.prototype;return s.oninit=function(t){e.prototype.oninit.call(this,t),this.blogCategoriesOriginal=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.blogCategories=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.isSaving=!1,this.hasChanges=!1},s.title=function(){return"Select blog categories"},s.className=function(){return"Modal modal-dialog FlarumBlog-TagsModal"},s.content=function(){var e=this;return m("div",null,m("div",{className:"Modal-body"},m("p",null,"Please select one or more tags that are considered blog tags. ",m("a",{href:app.forum.attribute("baseUrl")+"/blog",target:"_blank"},"Visit your blog.")),m("table",{className:"FlarumBlog-TagsTable"},m("thead",null,m("th",{width:"35"}),m("th",null,"Tag name"),m("th",{width:"50"})),m("tbody",null,0===app.store.all("tags").length&&m("tr",null,m("td",{colspan:"3"},"You currently have no tags.")),app.store.all("tags").map((function(t){if(!t.parent()){var s=function(){var s=e.blogCategories.indexOf(t.id());e.hasChanges=!0,s>=0?e.blogCategories.splice(s,1):e.blogCategories.push(t.id())};return m("tr",null,m("td",null,m("i",{className:t.icon()})),m("td",{onclick:s},t.name()),m("td",null,m(y.a,{state:e.blogCategories.indexOf(t.id())>=0,onchange:s})))}}))))),m("div",{style:"padding: 25px 30px; text-align: center;"},m(u.a,{type:"submit",className:"Button Button--primary",loading:this.loading},this.hasChanges?"Save changes":"Close")))},s.onsubmit=function(e){var t=this;e.preventDefault(),this.hasChanges?(this.isSaving=!0,g()({blog_tags:this.blogCategories.join("|")}).then((function(){app.alerts.show(p.a,{type:"success"},app.translator.trans("core.admin.basics.saved_message")),t.hide()})).catch((function(){app.alerts.show(p.a,{type:"error"},app.translator.trans("core.lib.error.generic_message"))})).then((function(){t.isSaving=!1}))):this.hide()},t}(s.n(v).a),C=function(e){function t(){return e.apply(this,arguments)||this}Object(i.a)(t,e);var s=t.prototype;return s.oninit=function(t){e.prototype.oninit.call(this,t),this.hasChanges=!1,this.isSaving=!1,this.blogCategories=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.redirectsEnabled=app.data.settings.blog_redirects_enabled?app.data.settings.blog_redirects_enabled:"both",this.hideTagsInList=!app.data.settings.blog_hide_tags||app.data.settings.blog_hide_tags,this.allowComments=!app.data.settings.blog_allow_comments||app.data.settings.blog_allow_comments,this.hideOnDiscussionList=!!app.data.settings.blog_filter_discussion_list&&app.data.settings.blog_filter_discussion_list,this.requiresReviewOnPost=!!app.data.settings.blog_requires_review&&app.data.settings.blog_requires_review,this.addCategoryHierarchy=!app.data.settings.blog_category_hierarchy||app.data.settings.blog_category_hierarchy},s.content=function(){var e=this;return m("div",{className:"BasicsPage FlarumBlog"},m("div",{className:"container"},m("div",{className:"FlarumBlog-SelectCategories"},this.blogCategories.length>=1?"You have "+this.blogCategories.length+" categories selected":"No categories selected",m(u.a,{className:"Button",onclick:function(){return app.modal.show(x)}},"Select blog categories")),f.a.component({label:"Blog"},[y.a.component({state:1==this.allowComments,onchange:function(t){e.allowComments=t,e.hasChanges=!0}},[m("b",null,"Allow comments"),m("div",{className:"helpText"},"By default, allow comments on blog posts. When disabled, it can be enabled individually per blog post. ",m("b",null,"Note:")," Changing this setting will not affect pre-existing blog posts.")]),y.a.component({state:1==this.requiresReviewOnPost,onchange:function(t){e.requiresReviewOnPost=t,e.hasChanges=!0}},[m("b",null,"Blog posts requires review"),m("div",{className:"helpText"},"When posting an article, it will not be visible directly and needs to be reviewed by a moderator.")]),y.a.component({state:1==this.hideOnDiscussionList,onchange:function(t){e.hideOnDiscussionList=t,e.hasChanges=!0}},[m("b",null,"Don't show on discussion list"),m("div",{className:"helpText"},"Hide blog posts from the discussions list.")])]),f.a.component({label:"Categories"},[y.a.component({state:1==this.hideTagsInList,onchange:function(t){e.hideTagsInList=t,e.hasChanges=!0}},[m("b",null,"Hide tags in taglist"),m("div",{className:"helpText"},"When enabled, this extension will hide the blog tags from your homepage. After changing this setting, clear the cache of your forum.")]),y.a.component({state:1==this.addCategoryHierarchy,onchange:function(t){e.addCategoryHierarchy=t,e.hasChanges=!0}},[m("b",null,"Show tag hierarchy"),m("div",{className:"helpText"},"Add spacing to child-categories and give the category-list a hierarchy.")])]),f.a.component({label:"Redirects"},[y.a.component({state:"both"===this.redirectsEnabled||"discussions_only"===this.redirectsEnabled,onchange:function(t){t?"tags_only"===e.redirectsEnabled?e.redirectsEnabled="both":"none"===e.redirectsEnabled&&(e.redirectsEnabled="discussions_only"):"discussions_only"===e.redirectsEnabled?e.redirectsEnabled="none":e.redirectsEnabled="tags_only",e.hasChanges=!0}},[m("b",null,"Redirect blog articles"),m("div",{className:"helpText"},"When enabled, this extension will redirect original discussion URLs to their blog URL.")]),y.a.component({state:"both"===this.redirectsEnabled||"tags_only"===this.redirectsEnabled,onchange:function(t){t?"discussions_only"===e.redirectsEnabled?e.redirectsEnabled="both":"none"===e.redirectsEnabled&&(e.redirectsEnabled="tags_only"):"tags_only"===e.redirectsEnabled?e.redirectsEnabled="none":e.redirectsEnabled="discussions_only",e.hasChanges=!0}},[m("b",null,"Redirect blog tags"),m("div",{className:"helpText"},"When enabled, this extension redirects blog tag URLs to the blog category URL.")])]),m(u.a,{loading:this.isSaving,className:"Button Button--primary",onclick:function(){return e.save()},disabled:!this.hasChanges},app.translator.trans("core.admin.basics.submit_button"))))},s.save=function(){var e=this;this.isSaving=!0,g()({blog_redirects_enabled:this.redirectsEnabled,blog_hide_tags:this.hideTagsInList,blog_requires_review:this.requiresReviewOnPost,blog_allow_comments:this.allowComments,blog_category_hierarchy:this.addCategoryHierarchy,blog_filter_discussion_list:this.hideOnDiscussionList}).then((function(){e.hasChanges=!1,app.alerts.show(p.a,{type:"success"},app.translator.trans("core.admin.basics.saved_message"))})).catch((function(){})).then((function(){e.isSaving=!1,m.redraw()}))},t}(l.a);app.initializers.add("v17development-flarum-blog",(function(){app.extensionData.for("v17development-blog").registerPage(C),app.extensionData.for("v17development-blog").registerPermission({icon:"fas fa-pencil-alt",label:"Write and edit blog articles",permission:"blog.writeArticles"},"blog",90).registerPermission({icon:"far fa-star",label:"Auto approve articles",permission:"blog.autoApprovePosts"},"blog",90).registerPermission({icon:"far fa-thumbs-up",label:"Can approve blog articles",permission:"blog.canApprovePosts"},"blog",90),Object(n.extend)(o.a.prototype,"permissionItems",(function(e){e.add("blog",{label:"Blog",children:this.attrs.extensionId?app.extensionData.getExtensionPermissions(this.extensionId,"blog").toArray():app.extensionData.getAllExtensionPermissions("blog").toArray()},80)}))}))}]);
//# sourceMappingURL=admin.js.map